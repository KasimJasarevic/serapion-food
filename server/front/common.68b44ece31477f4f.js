"use strict";(self.webpackChunkorder_app_redesign=self.webpackChunkorder_app_redesign||[]).push([[592],{7091:(p,h,o)=>{o.d(h,{N0:()=>u});var i=o(241);const a=new i.OlP("JWT_OPTIONS");let u=(()=>{class s{constructor(e=null){this.tokenGetter=e&&e.tokenGetter||function(){}}urlBase64Decode(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(t)}b64decode(e){let n="";if((e=String(e).replace(/=+$/,"")).length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let c,d,r=0,g=0;d=e.charAt(g++);~d&&(c=r%4?64*c+d:d,r++%4)?n+=String.fromCharCode(255&c>>(-2*r&6)):0)d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(d);return n}b64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(this.b64decode(e),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(e=this.tokenGetter()){if(!e||""===e)return null;const t=e.split(".");if(3!==t.length)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");const n=this.urlBase64Decode(t[1]);if(!n)throw new Error("Cannot decode the token.");return JSON.parse(n)}getTokenExpirationDate(e=this.tokenGetter()){let t;if(t=this.decodeToken(e),!t||!t.hasOwnProperty("exp"))return null;const n=new Date(0);return n.setUTCSeconds(t.exp),n}isTokenExpired(e=this.tokenGetter(),t){if(!e||""===e)return!0;const n=this.getTokenExpirationDate(e);return t=t||0,null!==n&&!(n.valueOf()>(new Date).valueOf()+1e3*t)}getAuthScheme(e,t){return"function"==typeof e?e(t):e}}return s.\u0275fac=function(e){return new(e||s)(i.LFG(a))},s.\u0275prov=i.Yz7({token:s,factory:s.\u0275fac}),s})()},4122:(p,h,o)=>{o.d(h,{Y:()=>i});class i{constructor(){this._subs=[]}add(...u){this._subs=this._subs.concat(u)}set sink(u){this._subs.push(u)}unsubscribe(){this._subs.forEach(u=>u&&u.unsubscribe()),this._subs=[]}}},6821:(p,h,o)=>{o.d(h,{K:()=>e});var i=o(3543),a=o(1251),u=o(7396),_=o(1680),f=o(6801),s=o(241),l=o(4522);let e=(()=>{class t{constructor(r){this._http=r,this._userCache=new Map,this.userSubject=new u.x,this.userSubjectChange=this.userSubject.asObservable(),this._user=null}set user(r){this._user=r,localStorage.setItem(i.$.FOOD_ORDERING_CURRENT_USER,JSON.stringify(this._user)),this.userSubject.next(this._user)}get user(){return this._user||(this._user=JSON.parse(localStorage.getItem(i.$.FOOD_ORDERING_CURRENT_USER))),this._user}removeUser(){localStorage.removeItem(i.$.FOOD_ORDERING_AUTH_TOKEN),localStorage.removeItem(i.$.FOOD_ORDERING_CURRENT_USER),this._user=null}getAllUsers(){return this._http.get(a.N.api_url+"/users")}getById(r){return this._userCache.has(r)?(0,_.of)(this._userCache.get(r)):this._http.get(a.N.api_url+`/users/${r}`).pipe((0,f.b)(c=>{this._userCache.set(r,c)}))}getByEmail(r){return this._http.get(a.N.api_url+`/users/${r}`)}updateOne(r){return this._http.put(a.N.api_url+"/users/",r)}updateSubscriptionId(r,c){return this._http.put(a.N.api_url+`/users/update-subscription-id/${r}/${c}`,null)}}return t.\u0275fac=function(r){return new(r||t)(s.LFG(l.eN))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);