"use strict";var cs=Object.defineProperty,hs=Object.defineProperties,ps=Object.getOwnPropertyDescriptors,dr=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,cr=(A,C,c)=>C in A?cs(A,C,{enumerable:!0,configurable:!0,writable:!0,value:c}):A[C]=c,L=(A,C)=>{for(var c in C||(C={}))fs.call(C,c)&&cr(A,c,C[c]);if(dr)for(var c of dr(C))ms.call(C,c)&&cr(A,c,C[c]);return A},re=(A,C)=>hs(A,ps(C));(self.webpackChunkorder_app_redesign=self.webpackChunkorder_app_redesign||[]).push([[510],{2510:(A,C,c)=>{c.r(C),c.d(C,{OrderingModule:()=>us});var p=c(6019),ne=c(439),hr=c(7091),g=c(3543),t=c(241),Z=c(6821);let pr=(()=>{class n{constructor(e,r){this._router=e,this._userService=r,this._helperSerivce=new hr.N0}canActivate(e,r){const s=localStorage.getItem(g.$.FOOD_ORDERING_AUTH_TOKEN);return s?!this._helperSerivce.isTokenExpired(s)||(this._userService.removeUser(),this._router.navigate(["login"]),!1):(this._router.navigate(["login"]),!1)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ne.F0),t.LFG(Z.K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=c(4122),y=c(7878),G=c(9634),q=c(9978);let Se=(()=>{class n{constructor(){const e=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_UI_PREFERENCES));e?this._isHidden$=new q.X(e.sidebar===G.t.COLLAPSED):(this._isHidden$=new q.X(!1),localStorage.setItem(g.$.FOOD_ORDERING_UI_PREFERENCES,JSON.stringify({theme:G.B.DARK,sidebar:G.t.EXPANDED})))}get isHidden$(){return this._isHidden$.asObservable()}toggleSidebar(){const e=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_UI_PREFERENCES));e.sidebar===G.t.COLLAPSED?(this._isHidden$.next(!1),e.sidebar=G.t.EXPANDED,localStorage.setItem(g.$.FOOD_ORDERING_UI_PREFERENCES,JSON.stringify(e))):(this._isHidden$.next(!0),e.sidebar=G.t.COLLAPSED,localStorage.setItem(g.$.FOOD_ORDERING_UI_PREFERENCES,JSON.stringify(e)))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var We=c(7396);let Oe=(()=>{class n{constructor(){this.showModal$=new We.x}modalOpen(e){this.showModal$.next(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var fr=c(6658),mr=c(9105),gr=c(8856),_r=c(5823),vr=c(5907),yr=c(9817),br=c(3406),wr=c(8919),Ee=c(2201);let Ke=(()=>{class n{constructor(e,r){this._renderer=e,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj),t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n}),n})(),U=(()=>{class n extends Ke{}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.n5z(n)))(r||n)}}(),n.\u0275dir=t.lG2({type:n,features:[t.qOj]}),n})();const T=new t.OlP("NgValueAccessor"),Sr={provide:T,useExisting:(0,t.Gpc)(()=>M),multi:!0},Er=new t.OlP("CompositionEventMode");let M=(()=>{class n extends Ke{constructor(e,r,s){super(e,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(Er,8))},n.\u0275dir=t.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,r){1&e&&t.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[t._Bn([Sr]),t.qOj]}),n})();function V(n){return null==n||0===n.length}function et(n){return null!=n&&"number"==typeof n.length}const w=new t.OlP("NgValidators"),D=new t.OlP("NgAsyncValidators"),Ar=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class S{static min(i){return n=i,i=>{if(V(i.value)||V(n))return null;const e=parseFloat(i.value);return!isNaN(e)&&e<n?{min:{min:n,actual:i.value}}:null};var n}static max(i){return n=i,i=>{if(V(i.value)||V(n))return null;const e=parseFloat(i.value);return!isNaN(e)&&e>n?{max:{max:n,actual:i.value}}:null};var n}static required(i){return V(i.value)?{required:!0}:null}static requiredTrue(i){return!0===i.value?null:{required:!0}}static email(i){return V((n=i).value)||Ar.test(n.value)?null:{email:!0};var n}static minLength(i){return n=i,i=>V(i.value)||!et(i.value)?null:i.value.length<n?{minlength:{requiredLength:n,actualLength:i.value.length}}:null;var n}static maxLength(i){return n=i,i=>et(i.value)&&i.value.length>n?{maxlength:{requiredLength:n,actualLength:i.value.length}}:null;var n}static pattern(i){return function(n){if(!n)return J;let i,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),i=new RegExp(e)):(e=n.toString(),i=n),r=>{if(V(r.value))return null;const s=r.value;return i.test(s)?null:{pattern:{requiredPattern:e,actualValue:s}}}}(i)}static nullValidator(i){return null}static compose(i){return ft(i)}static composeAsync(i){return mt(i)}}function J(n){return null}function ut(n){return null!=n}function dt(n){const i=(0,t.QGY)(n)?(0,fr.D)(n):n;return(0,t.CqO)(i),i}function ct(n){let i={};return n.forEach(e=>{i=null!=e?L(L({},i),e):i}),0===Object.keys(i).length?null:i}function ht(n,i){return i.map(e=>e(n))}function pt(n){return n.map(i=>function(n){return!n.validate}(i)?i:e=>i.validate(e))}function ft(n){if(!n)return null;const i=n.filter(ut);return 0==i.length?null:function(e){return ct(ht(e,i))}}function Ae(n){return null!=n?ft(pt(n)):null}function mt(n){if(!n)return null;const i=n.filter(ut);return 0==i.length?null:function(e){return function(...n){const i=(0,vr.jO)(n),{args:e,keys:r}=(0,gr.D)(n),s=new mr.y(o=>{const{length:a}=e;if(!a)return void o.complete();const l=new Array(a);let d=a,u=a;for(let h=0;h<a;h++){let f=!1;(0,_r.Xf)(e[h]).subscribe(new yr.Q(o,m=>{f||(f=!0,u--),l[h]=m},()=>d--,void 0,()=>{(!d||!f)&&(u||o.next(r?(0,wr.n)(r,l):l),o.complete())}))}});return i?s.pipe((0,br.Z)(i)):s}(ht(e,i).map(dt)).pipe((0,Ee.U)(ct))}}function Te(n){return null!=n?mt(pt(n)):null}function gt(n,i){return null===n?[i]:Array.isArray(n)?[...n,i]:[n,i]}function _t(n){return n._rawValidators}function vt(n){return n._rawAsyncValidators}function Ie(n){return n?Array.isArray(n)?n:[n]:[]}function ie(n,i){return Array.isArray(n)?n.includes(i):n===i}function yt(n,i){const e=Ie(i);return Ie(n).forEach(s=>{ie(e,s)||e.push(s)}),e}function bt(n,i){return Ie(i).filter(e=>!ie(n,e))}class wt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Ae(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=Te(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class x extends wt{get formDirective(){return null}get path(){return null}}class k extends wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ct{constructor(i){this._cd=i}is(i){var e,r,s;return"submitted"===i?!!(null==(e=this._cd)?void 0:e.submitted):!!(null==(s=null==(r=this._cd)?void 0:r.control)?void 0:s[i])}}let $=(()=>{class n extends Ct{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(k,2))},n.\u0275dir=t.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,r){2&e&&t.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[t.qOj]}),n})(),B=(()=>{class n extends Ct{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x,10))},n.\u0275dir=t.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,r){2&e&&t.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[t.qOj]}),n})();function oe(n,i){return[...i.path,n]}function Q(n,i){Ve(n,i),i.valueAccessor.writeValue(n.value),function(n,i){i.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xt(n,i)})}(n,i),function(n,i){const e=(r,s)=>{i.valueAccessor.writeValue(r),s&&i.viewToModelUpdate(r)};n.registerOnChange(e),i._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,i),function(n,i){i.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xt(n,i),"submit"!==n.updateOn&&n.markAsTouched()})}(n,i),function(n,i){if(i.valueAccessor.setDisabledState){const e=r=>{i.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),i._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,i)}function ae(n,i,e=!0){const r=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(r),i.valueAccessor.registerOnTouched(r)),ue(n,i),n&&(i._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function le(n,i){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function Ve(n,i){const e=_t(n);null!==i.validator?n.setValidators(gt(e,i.validator)):"function"==typeof e&&n.setValidators([e]);const r=vt(n);null!==i.asyncValidator?n.setAsyncValidators(gt(r,i.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();le(i._rawValidators,s),le(i._rawAsyncValidators,s)}function ue(n,i){let e=!1;if(null!==n){if(null!==i.validator){const s=_t(n);if(Array.isArray(s)&&s.length>0){const o=s.filter(a=>a!==i.validator);o.length!==s.length&&(e=!0,n.setValidators(o))}}if(null!==i.asyncValidator){const s=vt(n);if(Array.isArray(s)&&s.length>0){const o=s.filter(a=>a!==i.asyncValidator);o.length!==s.length&&(e=!0,n.setAsyncValidators(o))}}}const r=()=>{};return le(i._rawValidators,r),le(i._rawAsyncValidators,r),e}function xt(n,i){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function St(n,i){Ve(n,i)}function De(n,i){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function Ot(n,i){n._syncPendingControls(),i.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ke(n,i){if(!i)return null;let e,r,s;return Array.isArray(i),i.forEach(o=>{o.constructor===M?e=o:function(n){return Object.getPrototypeOf(n.constructor)===U}(o)?r=o:s=o}),s||r||e||null}function de(n,i){const e=n.indexOf(i);e>-1&&n.splice(e,1)}const z="VALID",ce="INVALID",j="PENDING",W="DISABLED";function Fe(n){return(Re(n)?n.validators:n)||null}function Et(n){return Array.isArray(n)?Ae(n):n||null}function Ze(n,i){return(Re(i)?i.asyncValidators:n)||null}function At(n){return Array.isArray(n)?Te(n):n||null}function Re(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ue{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=Et(this._rawValidators),this._composedAsyncValidatorFn=At(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===z}get invalid(){return this.status===ce}get pending(){return this.status==j}get disabled(){return this.status===W}get enabled(){return this.status!==W}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=Et(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=At(i)}addValidators(i){this.setValidators(yt(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(yt(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(bt(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(bt(i,this._rawAsyncValidators))}hasValidator(i){return ie(this._rawValidators,i)}hasAsyncValidator(i){return ie(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=j,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=W,this.errors=null,this._forEachChild(r=>{r.disable(re(L({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(re(L({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=z,this._forEachChild(r=>{r.enable(re(L({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(re(L({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===z||this.status===j)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?W:z}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=j,this._hasOwnPendingAsyncValidator=!0;const e=dt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function(n,i,e){if(null==i||(Array.isArray(i)||(i=i.split(".")),Array.isArray(i)&&0===i.length))return null;let r=n;return i.forEach(s=>{r=r instanceof F?r.controls.hasOwnProperty(s)?r.controls[s]:null:r instanceof Pe&&r.at(s)||null}),r}(this,i)}getError(i,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new t.vpe,this.statusChanges=new t.vpe}_calculateStatus(){return this._allControlsDisabled()?W:this.errors?ce:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(j)?j:this._anyControlsHaveStatus(ce)?ce:z}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Re(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class O extends Ue{constructor(i=null,e,r){super(Fe(e),Ze(r,e)),this._onChange=[],this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=null,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){de(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){de(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class F extends Ue{constructor(i,e,r){super(Fe(e),Ze(r,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,r={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,r={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){this._checkAllValuesPresent(i),Object.keys(i).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(i[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((r,s)=>{r.reset(i[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,r)=>(i[r]=e instanceof O?e.value:e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[i])throw new Error(`Cannot find form control with name: ${i}.`)}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&i(r,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&i(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,r)=>((e.enabled||this.disabled)&&(i[r]=e.value),i))}_reduceChildren(i,e){let r=i;return this._forEachChild((s,o)=>{r=e(r,s,o)}),r}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(i){this._forEachChild((e,r)=>{if(void 0===i[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class Pe extends Ue{constructor(i,e,r){super(Fe(e),Ze(r,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,r={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,r={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){this._checkAllValuesPresent(i),i.forEach((r,s)=>{this._throwIfControlMissing(s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((r,s)=>{r.reset(i[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>i instanceof O?i.value:i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(i))throw new Error(`Cannot find form control at index ${i}`)}_forEachChild(i){this.controls.forEach((e,r)=>{i(e,r)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_checkAllValuesPresent(i){this._forEachChild((e,r)=>{if(void 0===i[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const Lr={provide:x,useExisting:(0,t.Gpc)(()=>he)},K=(()=>Promise.resolve(null))();let he=(()=>{class n extends x{constructor(e,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new t.vpe,this.form=new F({},Ae(e),Te(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){K.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),Q(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){K.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),de(this._directives,e)})}addFormGroup(e){K.then(()=>{const r=this._findContainer(e.path),s=new F({});St(s,e),r.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){K.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){K.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Ot(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w,10),t.Y36(D,10))},n.\u0275dir=t.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&t.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[t._Bn([Lr]),t.qOj]}),n})(),Tt=(()=>{class n extends x{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return n.\u0275fac=function(){let i;return function(r){return(i||(i=t.n5z(n)))(r||n)}}(),n.\u0275dir=t.lG2({type:n,features:[t.qOj]}),n})();const qr={provide:k,useExisting:(0,t.Gpc)(()=>Le)},Nt=(()=>Promise.resolve(null))();let Le=(()=>{class n extends k{constructor(e,r,s,o){super(),this.control=new O,this._registered=!1,this.update=new t.vpe,this._parent=e,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=ke(0,o)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),De(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?oe(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Q(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Nt.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const r=e.isDisabled.currentValue,s=""===r||r&&"false"!==r;Nt.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x,9),t.Y36(w,10),t.Y36(D,10),t.Y36(T,10))},n.\u0275dir=t.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[t._Bn([qr]),t.qOj,t.TTD]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=t.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Br={provide:T,useExisting:(0,t.Gpc)(()=>Ge),multi:!0};let Vt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({}),n})(),jr=(()=>{class n{constructor(){this._accessors=[]}add(e,r){this._accessors.push([e,r])}remove(e){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===e)return void this._accessors.splice(r,1)}select(e){this._accessors.forEach(r=>{this._isSameGroup(r,e)&&r[1]!==e&&r[1].fireUncheck(e.value)})}_isSameGroup(e,r){return!!e[0].control&&e[0]._parent===r._control._parent&&e[1].name===r.name}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:Vt}),n})(),Ge=(()=>{class n extends U{constructor(e,r,s,o){super(e,r),this._registry=s,this._injector=o,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(k),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(jr),t.Y36(t.zs3))},n.\u0275dir=t.lG2({type:n,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,r){1&e&&t.NdJ("change",function(){return r.onChange()})("blur",function(){return r.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[t._Bn([Br]),t.qOj]}),n})();const qe=new t.OlP("NgModelWithFormControlWarning"),Hr={provide:k,useExisting:(0,t.Gpc)(()=>$e)};let $e=(()=>{class n extends k{constructor(e,r,s,o){super(),this._ngModelWarningConfig=o,this.update=new t.vpe,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=ke(0,s)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const r=e.form.previousValue;r&&ae(r,this,!1),Q(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}De(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ae(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(t.Y36(w,10),t.Y36(D,10),t.Y36(T,10),t.Y36(qe,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[t._Bn([Hr]),t.qOj,t.TTD]}),n})();const Jr={provide:x,useExisting:(0,t.Gpc)(()=>P)};let P=(()=>{class n extends x{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new t.vpe,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ue(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return Q(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){ae(e.control||null,e,!1),de(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,Ot(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,s=this.form.get(e.path);r!==s&&(ae(r||null,e),s instanceof O&&(Q(s,e),e.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);St(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function(n,i){return ue(n,i)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ve(this.form,this),this._oldForm&&ue(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w,10),t.Y36(D,10))},n.\u0275dir=t.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&t.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[t._Bn([Jr]),t.qOj,t.TTD]}),n})();const Qr={provide:x,useExisting:(0,t.Gpc)(()=>pe)};let pe=(()=>{class n extends Tt{constructor(e,r,s){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(s)}_checkParentType(){kt(this._parent)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x,13),t.Y36(w,10),t.Y36(D,10))},n.\u0275dir=t.lG2({type:n,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[t._Bn([Qr]),t.qOj]}),n})();const zr={provide:x,useExisting:(0,t.Gpc)(()=>fe)};let fe=(()=>{class n extends x{constructor(e,r,s){super(),this._parent=e,this._setValidators(r),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){kt(this._parent)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x,13),t.Y36(w,10),t.Y36(D,10))},n.\u0275dir=t.lG2({type:n,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[t._Bn([zr]),t.qOj]}),n})();function kt(n){return!(n instanceof pe||n instanceof P||n instanceof fe)}const Wr={provide:k,useExisting:(0,t.Gpc)(()=>H)};let H=(()=>{class n extends k{constructor(e,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.update=new t.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=ke(0,o)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),De(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(t.Y36(x,13),t.Y36(w,10),t.Y36(D,10),t.Y36(T,10),t.Y36(qe,8))},n.\u0275dir=t.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[t._Bn([Wr]),t.qOj,t.TTD]}),n})(),Yt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[Vt]]}),n})(),pn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Yt]}),n})(),Ht=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:qe,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Yt]}),n})(),mn=(()=>{class n{group(e,r=null){const s=this._reduceControls(e);let l,o=null,a=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,a=null!=r.asyncValidators?r.asyncValidators:null,l=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,a=null!=r.asyncValidator?r.asyncValidator:null)),new F(s,{asyncValidators:a,updateOn:l,validators:o})}control(e,r,s){return new O(e,r,s)}array(e,r,s){const o=e.map(a=>this._createControl(a));return new Pe(o,r,s)}_reduceControls(e){const r={};return Object.keys(e).forEach(s=>{r[s]=this._createControl(e[s])}),r}_createControl(e){return e instanceof O||e instanceof F||e instanceof Pe?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:Ht}),n})();var X=(()=>{return(n=X||(X={})).TAKEAWAY="TAKEAWAY",n.DELIVERY="DELIVERY",X;var n})(),E=(()=>{return(n=E||(E={})).INACTIVE="INACTIVE",n.ACTIVE="ACTIVE",E;var n})(),_=c(1251),ee=c(4522);let Jt=(()=>{class n{constructor(e){this._http=e,this._collapsedPlacesSub$=new q.X([]),this._collapsedPlaces$=this._collapsedPlacesSub$.asObservable(),this.collapsePlace=r=>{const s=this._collapsedPlacesSub$.value;s.push(r),this._collapsedPlacesSub$.next(s)},this.expandPlace=r=>{let s=this._collapsedPlacesSub$.value;s=s.filter(o=>o!==r),this._collapsedPlacesSub$.next(s)},this.togglePlace=r=>{let s=this._collapsedPlacesSub$.value;-1!==s.findIndex(a=>a===r)?s=s.filter(a=>a!==r):s.push(r),this._collapsedPlacesSub$.next(s)}}get collapsedPlaces$(){return this._collapsedPlaces$}addNewPlace(e){return this._http.post(_.N.api_url+"/restaurants",e)}getAllPlaces(){return this._http.get(`${_.N.api_url}/restaurants`)}updatePlace(e,r){return this._http.put(_.N.api_url+`/restaurants/${e}`,r)}getPlaceById(e){return this._http.get(`${_.N.api_url}/restaurants/${e}`)}deletePlace(e){return this._http.delete(`${_.N.api_url}/restaurants/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ee.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var b=(()=>{return(n=b||(b={})).COMMENT_EVENT="commentEvent",n.RESTAURANT_NEW_EVENT="newRestaurantEvent",n.ORDER_COMPLETED_EVENT="orderCompletedEvent",n.ORDER_CLOSED_EVENT="orderClosedEvent",n.RESTAURANT_NEW_UPDATE_EVENT="newRestaurantUpdateEvent",n.RESTAURANT_DELETED_EVENT="deleteRestaurantEvent",n.ORDER_ITEM_EVENT="orderItemEvent",n.ORDER_ITEM_DELETE_EVENT="orderItemDeleteEvent",n.ORDER_ITEM_USER_EVENT="orderItemUserEvent",n.ORDER_ITEM_USER_DELETE_EVENT="deleteOrderItemUserEvent",n.ORDER_NEW_EVENT="orderNewEvent",n.ORDER_TYPE_EVENT="orderTypeUpdatedEvent",n.CLEAN_UP_EVENT="cleanUpEvent",n.COMMENT_DELETED="commentDeletedEvent",b;var n})(),gn=c(5900);let ge=(()=>{class n{constructor(e){this._socket=e}onCommentReceived(){return this._socket.fromEvent(b.COMMENT_EVENT)}onCommentDeleted(){return this._socket.fromEvent(b.COMMENT_DELETED)}onOrderItemAdded(){return this._socket.fromEvent(b.ORDER_ITEM_EVENT)}onOrderItemDeleted(){return this._socket.fromEvent(b.ORDER_ITEM_DELETE_EVENT)}onOrderItemUserAdded(){return this._socket.fromEvent(b.ORDER_ITEM_USER_EVENT)}onOrderItemUserDeleted(){return this._socket.fromEvent(b.ORDER_ITEM_USER_DELETE_EVENT)}onOrderCompleted(){return this._socket.fromEvent(b.ORDER_COMPLETED_EVENT)}onOrderClosed(){return this._socket.fromEvent(b.ORDER_CLOSED_EVENT)}onRestaurantAdded(){return this._socket.fromEvent(b.RESTAURANT_NEW_EVENT)}onRestaurantUpdated(){return this._socket.fromEvent(b.RESTAURANT_NEW_UPDATE_EVENT)}onRestaurantDeleted(){return this._socket.fromEvent(b.RESTAURANT_DELETED_EVENT)}onOrderOpened(){return this._socket.fromEvent(b.ORDER_NEW_EVENT)}onOrderTypeUpdate(){return this._socket.fromEvent(b.ORDER_TYPE_EVENT)}onCleanUp(){return this._socket.fromEvent(b.CLEAN_UP_EVENT)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(gn.sk))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wn=(()=>{class n{constructor(){this.isOneSignalInitialized=!1,this.ngOneSignalFunctionQueue=[],this.injectScript=()=>{const e=document.createElement("script");e.id="onesignal-sdk",e.src="https://cdn.onesignal.com/sdks/OneSignalSDK.js",e.async=!0,document.head.appendChild(e)},this.doesOneSignalExist=()=>!!window.OneSignal,this.processQueuedOneSignalFunctions=()=>{this.ngOneSignalFunctionQueue.forEach(e=>{const{name:r,args:s,promiseResolver:o}=e;o?this[r](...s).then(a=>{o(a)}):window.OneSignal[r](...s)})},this.setupOneSignalIfMissing=()=>{this.doesOneSignalExist()||(window.OneSignal=window.OneSignal||[])}}init(e){return new Promise(r=>{if(this.isOneSignalInitialized)return;this.injectScript(),this.setupOneSignalIfMissing(),window.OneSignal.push(()=>{window.OneSignal.init(e)});const s=setTimeout(()=>{console.error("OneSignal is not setup correctly.")},3e4);window.OneSignal.push(()=>{clearTimeout(s),this.isOneSignalInitialized=!0,this.processQueuedOneSignalFunctions(),r()})})}on(e,r){this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.on(e,r)}):this.ngOneSignalFunctionQueue.push({name:"on",args:arguments})}off(e,r){this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.off(e,r)}):this.ngOneSignalFunctionQueue.push({name:"off",args:arguments})}once(e,r){this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.once(e,r)}):this.ngOneSignalFunctionQueue.push({name:"once",args:arguments})}isPushNotificationsEnabled(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.isPushNotificationsEnabled(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"isPushNotificationsEnabled",args:arguments,promiseResolver:r})})}showHttpPrompt(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showHttpPrompt(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showHttpPrompt",args:arguments,promiseResolver:r})})}registerForPushNotifications(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.registerForPushNotifications(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"registerForPushNotifications",args:arguments,promiseResolver:r})})}setDefaultNotificationUrl(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setDefaultNotificationUrl(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"setDefaultNotificationUrl",args:arguments,promiseResolver:r})})}setDefaultTitle(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setDefaultTitle(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"setDefaultTitle",args:arguments,promiseResolver:r})})}getTags(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getTags(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getTags",args:arguments,promiseResolver:r})})}sendTag(e,r,s){return new Promise((o,a)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.sendTag(e,r,s).then(l=>o(l)).catch(l=>a(l))}):this.ngOneSignalFunctionQueue.push({name:"sendTag",args:arguments,promiseResolver:o})})}sendTags(e,r){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.sendTags(e,r).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"sendTags",args:arguments,promiseResolver:s})})}deleteTag(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.deleteTag(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"deleteTag",args:arguments,promiseResolver:r})})}deleteTags(e,r){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.deleteTags(e,r).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"deleteTags",args:arguments,promiseResolver:s})})}addListenerForNotificationOpened(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.addListenerForNotificationOpened(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"addListenerForNotificationOpened",args:arguments,promiseResolver:r})})}setSubscription(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setSubscription(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"setSubscription",args:arguments,promiseResolver:r})})}showHttpPermissionRequest(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showHttpPermissionRequest(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showHttpPermissionRequest",args:arguments,promiseResolver:r})})}showNativePrompt(){return new Promise((e,r)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showNativePrompt().then(s=>e(s)).catch(s=>r(s))}):this.ngOneSignalFunctionQueue.push({name:"showNativePrompt",args:arguments,promiseResolver:e})})}showSlidedownPrompt(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showSlidedownPrompt(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showSlidedownPrompt",args:arguments,promiseResolver:r})})}showCategorySlidedown(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showCategorySlidedown(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showCategorySlidedown",args:arguments,promiseResolver:r})})}showSmsSlidedown(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showSmsSlidedown(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showSmsSlidedown",args:arguments,promiseResolver:r})})}showEmailSlidedown(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showEmailSlidedown(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showEmailSlidedown",args:arguments,promiseResolver:r})})}showSmsAndEmailSlidedown(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showSmsAndEmailSlidedown(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showSmsAndEmailSlidedown",args:arguments,promiseResolver:r})})}getNotificationPermission(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getNotificationPermission(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getNotificationPermission",args:arguments,promiseResolver:r})})}getUserId(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getUserId(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getUserId",args:arguments,promiseResolver:r})})}getSubscription(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getSubscription(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getSubscription",args:arguments,promiseResolver:r})})}setEmail(e,r){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setEmail(e,r).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"setEmail",args:arguments,promiseResolver:s})})}setSMSNumber(e,r){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setSMSNumber(e,r).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"setSMSNumber",args:arguments,promiseResolver:s})})}logoutEmail(){return new Promise((e,r)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.logoutEmail().then(s=>e(s)).catch(s=>r(s))}):this.ngOneSignalFunctionQueue.push({name:"logoutEmail",args:arguments,promiseResolver:e})})}logoutSMS(){return new Promise((e,r)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.logoutSMS().then(s=>e(s)).catch(s=>r(s))}):this.ngOneSignalFunctionQueue.push({name:"logoutSMS",args:arguments,promiseResolver:e})})}setExternalUserId(e,r){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setExternalUserId(e,r).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"setExternalUserId",args:arguments,promiseResolver:s})})}removeExternalUserId(){return new Promise((e,r)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.removeExternalUserId().then(s=>e(s)).catch(s=>r(s))}):this.ngOneSignalFunctionQueue.push({name:"removeExternalUserId",args:arguments,promiseResolver:e})})}getExternalUserId(){return new Promise((e,r)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getExternalUserId().then(s=>e(s)).catch(s=>r(s))}):this.ngOneSignalFunctionQueue.push({name:"getExternalUserId",args:arguments,promiseResolver:e})})}provideUserConsent(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.provideUserConsent(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"provideUserConsent",args:arguments,promiseResolver:r})})}getEmailId(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getEmailId(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getEmailId",args:arguments,promiseResolver:r})})}getSMSId(e){return new Promise((r,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getSMSId(e).then(o=>r(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getSMSId",args:arguments,promiseResolver:r})})}sendOutcome(e,r){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.sendOutcome(e,r).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"sendOutcome",args:arguments,promiseResolver:s})})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({factory:function(){return new n},token:n,providedIn:"root"}),n})(),_e=(()=>{class n{constructor(e,r,s){this._oneSignal=e,this._http=r,this._userService=s}init(){this._oneSignal.init({appId:_.N.notificationId}),this._oneSignal.on("subscriptionChange",()=>{this.getSubscriptionUserId()})}getSubscriptionUserId(){this._oneSignal.getUserId(e=>{if(e){localStorage.setItem(g.$.SUBSCRIPTION_ID,e);let r=this._userService.user;r&&r.subscriptionId!==e&&this._userService.updateSubscriptionId(r.id,e).subscribe()}})}sendOpenRestaurantMessage(e){const r=this.createContent(e+" is opened.");this.sendNotification(r)}sendOrderItemAddedMessage(e){const r=this.createContent(e);this.sendNotification(r)}sendCloseRestaurantMessage(e){const r=this.createContent(e+" is closed.");this.sendNotification(r)}sendLastCall(e){const r=this.createContent("Last call in "+e+" order.");this.sendNotification(r)}sendNotificationToUsers(e,r){const s=this.createContentForUsers(e,r);this.sendNotification(s)}sendMentionToUsers(e,r){const s=this.createContentForUsers(e,r);this.sendNotification(s)}createContent(e){return{app_id:_.N.notificationId,contents:{en:e},included_segments:["Active Users","Inactive Users"]}}getHeaders(){return(new ee.WM).set("Content-Type","application/json; charset=utf-8").set("Authorization","Basic "+_.N.signal_one_api_key)}sendNotification(e){this._http.post("https://onesignal.com/api/v1/notifications",e,{headers:this.getHeaders()}).subscribe()}createContentForUsers(e,r){return{app_id:_.N.notificationId,contents:{en:r},include_player_ids:e}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(wn),t.LFG(ee.eN),t.LFG(Z.K))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ye=(()=>{class n{constructor(e){this._http=e}getAllOrders(){return this._http.get(_.N.api_url+"/orders")}getOrderById(e){return this._http.get(_.N.api_url+`/orders/${e}`)}addNewOrder(e){return this._http.post(_.N.api_url+"/orders",e)}deleteOrderById(e){return this._http.delete(_.N.api_url+`/orders/order/${e}`)}deleteOrder(e){return this._http.delete(_.N.api_url+`/orders/${e}`)}getOrderItems(e){return this._http.get(_.N.api_url+`/order-items/order/${e}`)}getComments(e){return this._http.get(_.N.api_url+`/comments/order/${e}`)}addNewComment(e){return this._http.post(_.N.api_url+"/comments",e)}addNewOrderItem(e){return this._http.post(_.N.api_url+"/order-items",e)}addOrderItem(e){this._http.put(_.N.api_url+"/order-items",e).subscribe()}addOrderItemUser(e){var{id:r}=e,s=function(n,i){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(n);s<r.length;s++)i.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(e[r[s]]=n[r[s]])}return e}(e,["id"]);return this._http.post(_.N.api_url+`/order-items/${r}`,s)}removeOrderItemUser({itemId:e,userId:r}){const s={params:new ee.LE({fromString:`_user=${r}&_item=${e}`})};this._http.delete(_.N.api_url+"/order-items",s).subscribe()}deleteOrderItem(e){this._http.delete(_.N.api_url+`/order-items/${e}`).subscribe()}getOrderOrderer(e){return this._http.get(_.N.api_url+`/order-items/orders/${e}`)}completeOrder(e,r){return this._http.put(_.N.api_url+`/orders/${e}`,r)}updateTypeById(e,r){return this._http.put(_.N.api_url+`/orders/type/${e}`,{type:r}).subscribe()}deleteMessageWithId(e){return this._http.delete(_.N.api_url+`/comments/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ee.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var On=c(3453);let En=(()=>{class n{constructor(){this._showModalSub$=new q.X(""),this._resultSub$=new We.x,this.yesModal=e=>{this._showModalSub$.value===e&&this._resultSub$.next(!0)},this.noModal=e=>{this._showModalSub$.value===e&&this._resultSub$.next(!1)},this.toggleModal=e=>{this._showModalSub$.next(""===this._showModalSub$.value?e:"")}}get showModal$(){return this._showModalSub$.asObservable()}get result$(){return this._resultSub$.asObservable()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function An(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.Hsn(3),t.TgZ(4,"div",5),t.TgZ(5,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().yesModal()}),t._UZ(6,"i",7),t._uU(7," Yes "),t.qZA(),t.TgZ(8,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().noModal()}),t._UZ(9,"i",9),t._uU(10," No "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Tn(n,i){1&n&&t._UZ(0,"div",10)}const In=["*"];let Kt=(()=>{class n{constructor(e){this._sharedModalService=e,this.isVisible$=this._sharedModalService.showModal$,this.actionResult$=this._sharedModalService.result$,this.yesModal=()=>{this._sharedModalService.yesModal(this.id),this._sharedModalService.toggleModal(this.id)},this.noModal=()=>{this._sharedModalService.noModal(this.id),this._sharedModalService.toggleModal(this.id)},this.toggleModal=r=>(this._sharedModalService.toggleModal(r),this.actionResult$.pipe((0,On.q)(1)))}ngOnInit(){}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(En))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal"]],inputs:{id:"id"},ngContentSelectors:In,decls:4,vars:6,consts:[["class","z-100 fixed inset-0 justify-center items-center flex",4,"ngIf"],["class","absolute backdrop-filter backdrop-blur-lg inset-0 bg-opacity-10 bg-serapion-blue-300 z-90",4,"ngIf"],[1,"z-100","fixed","inset-0","justify-center","items-center","flex"],[1,"relative","mx-auto","w-1/2","max-w-2xl"],[1,"bg-serapion-white","rounded-md","p-8","shadow-lg","flex","flex-col","dark:bg-serapion-black-200"],[1,"pt-8","flex","flex-row-reverse","justify-between","items-center"],["type","button",1,"btn","btn-primary","w-1/2","ml-1",3,"click"],[1,"fas","fa-check","pr-1"],["type","button",1,"btn","btn-secondary","w-1/2",3,"click"],[1,"fas","fa-times","pr-1"],[1,"absolute","backdrop-filter","backdrop-blur-lg","inset-0","bg-opacity-10","bg-serapion-blue-300","z-90"]],template:function(e,r){1&e&&(t.F$t(),t.YNc(0,An,11,0,"div",0),t.ALo(1,"async"),t.YNc(2,Tn,1,0,"div",1),t.ALo(3,"async")),2&e&&(t.Q6J("ngIf",t.lcZ(1,2,r.isVisible$)===r.id),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,r.isVisible$)===r.id))},directives:[p.O5],pipes:[p.Ov],styles:[""],encapsulation:2}),n})(),Nn=(()=>{class n{transform(e,r,s){return r&&e?e.filter(o=>-1!==o.name.toLowerCase().indexOf(r.toLowerCase())):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"filter",type:n,pure:!0}),n})();const Mn=["deleteDialog"],Vn=function(n,i,e){return{"btn-disabled":n,"btn-primary":i,"cursor-not-allowed":e}};function Dn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().openRestaurant(s)}),t._UZ(2,"i",18),t._uU(3," Open "),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(2,Vn,r.hasActiveOrders(e),!r.hasActiveOrders(e),r.hasActiveOrders(e)))("disabled",r.hasActiveOrders(e))}}const kn=function(n){return{"line-through":n}},Xt=function(n,i){return{"cursor-not-allowed":n,"opacity-25":i}},Fn=function(n){return{"hover:text-serapion-purple":n}},Zn=function(n){return{"hover:text-serapion-grey-200 dark:hover:text-serapion-white":n}},Rn=function(){return{"hover:text-serapion-grey-200 dark:hover:text-serapion-white":!0}},Un=function(){return[]};function Pn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().togglePlace(o.id)}),t.ALo(4,"uppercase"),t._uU(5),t.ALo(6,"slice"),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"button",7),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().editRestaurant(o.id)}),t._UZ(9,"i",8),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().deletePlace(o.name)}),t._UZ(11,"i",9),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().togglePlace(o.id)}),t._UZ(13,"i",11),t.qZA(),t.qZA(),t.qZA(),t.YNc(14,Dn,4,6,"div",12),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"app-modal",13,14),t.TgZ(18,"div",15),t._uU(19),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(3),t.s9C("title",t.lcZ(4,13,e.name)),t.Q6J("ngClass",t.VKq(21,kn,r.hasActiveOrders(e))),t.xp6(2),t.hij(" ",e.name.length>20?t.Dn7(6,15,e.name,0,20)+"...":e.name," "),t.xp6(3),t.Q6J("ngClass",t.WLB(23,Xt,r.hasActiveOrders(e),r.hasActiveOrders(e)))("disabled",r.hasActiveOrders(e)),t.xp6(1),t.Q6J("ngClass",t.VKq(26,Fn,!r.hasActiveOrders(e))),t.xp6(1),t.Q6J("ngClass",t.WLB(28,Xt,r.hasActiveOrders(e),r.hasActiveOrders(e)))("disabled",r.hasActiveOrders(e)),t.xp6(1),t.Q6J("ngClass",t.VKq(31,Zn,!r.hasActiveOrders(e))),t.xp6(2),t.Q6J("ngClass",t.DdM(33,Rn)),t.xp6(1),t.Q6J("ngIf",r.isExpanded(t.lcZ(15,19,r.collapsedPlaces$)||t.DdM(34,Un),e.id)),t.xp6(2),t.MGl("id","delete-",e.name,""),t.xp6(3),t.hij(" Are you sure you want to delete ",e.name,"? ")}}let Ln=(()=>{class n{constructor(e,r,s,o,a,l){this._placeService=e,this._websocketService=r,this._notificationService=s,this._orderService=o,this._userService=a,this._modalService=l,this.filterStr="",this.collapsedPlaces$=this._placeService.collapsedPlaces$,this.updated=new Date,this.places=[],this.subs=new R.Y,this.hasActiveOrders=({orders:d})=>!!(d&&d.length&&d.filter(h=>h.status===E.ACTIVE).map(h=>h.status).length),this.togglePlace=d=>{d&&this._placeService.togglePlace(d)},this.isExpanded=(d,u)=>!(!u||-1===d.findIndex(f=>f===u))}ngOnInit(){this.subs.sink=this._placeService.getAllPlaces().subscribe(e=>{this.places=e}),this.subs.sink=this._websocketService.onRestaurantAdded().subscribe(e=>{this.places.push(e),this.updated=new Date}),this.subs.sink=this._websocketService.onOrderOpened().pipe((0,y.w)(()=>this._placeService.getAllPlaces())).subscribe(e=>{this.places=e,this.updated=new Date}),this.subs.sink=this._websocketService.onOrderClosed().pipe((0,y.w)(()=>this._placeService.getAllPlaces())).subscribe(e=>{this.places=e,this.updated=new Date}),this.subs.sink=this._websocketService.onOrderCompleted().pipe((0,y.w)(()=>this._placeService.getAllPlaces())).subscribe(e=>{this.places=e,this.updated=new Date}),this.subs.sink=this._websocketService.onRestaurantDeleted().subscribe(e=>{const r=this.places.findIndex(s=>s.id===e.id);this.places.splice(r,1),this.updated=new Date}),this.subs.sink=this._websocketService.onRestaurantUpdated().subscribe(e=>{this.places=this.places.map(r=>(r.id==e.id&&(r=e),r)),this.updated=new Date})}ngOnDestroy(){this.subs.unsubscribe()}openRestaurant(e){const r=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));r&&(this.subs.sink=this._orderService.addNewOrder({restaurant:e.id,user:r.id,type:X.DELIVERY,status:E.ACTIVE}).pipe((0,y.w)(()=>this._userService.getAllUsers())).subscribe(o=>{if(o&&o.length){const a=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(a&&a.subscriptionId){const l=o.filter(({subscriptionId:d})=>d!==a.subscriptionId).map(({subscriptionId:d})=>d);l.length&&this._notificationService.sendNotificationToUsers(l,`Restaurant ${e.name} opened!`)}}}))}editRestaurant(e){this._modalService.modalOpen(e)}deletePlace(e){this.subs.sink=this.deleteDialog.toggleModal(`delete-${e}`).subscribe(r=>{r&&this._placeService.deletePlace(e).subscribe()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Jt),t.Y36(ge),t.Y36(_e),t.Y36(ye),t.Y36(Z.K),t.Y36(Oe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-place-list"]],viewQuery:function(e,r){if(1&e&&t.Gf(Mn,5),2&e){let s;t.iGM(s=t.CRH())&&(r.deleteDialog=s.first)}},inputs:{filterStr:"filterStr"},decls:4,vars:5,consts:[[1,"min-h-screen","p-4","z-10","lg:pt-8","2xl:pt-8","rounded-t-xl","bg-serapion-blue-300","bg-opacity-50","shadow-md","dark:bg-serapion-black-100"],[1,"grid","grid-cols-2","gap-2","lg:grid-cols-2","lg:gap-4"],[4,"ngFor","ngForOf"],[1,"border-serapion-blue-300","px-2","py-4","bg-serapion-white","rounded-md","lg:transform","lg:hover:scale-102","lg:hover:shadow-lg","transition-all","duration-300","dark:bg-serapion-black-200"],[1,"flex","flex-row","justify-between","items-center","text-sm","font-thin"],[1,"uppercase","flex-1","mr-2","cursor-pointer",3,"title","ngClass","click"],[1,"flex","flex-row","space-x-2","text-serapion-grey-100","2xl:space-x-3","mr-1"],[3,"ngClass","disabled","click"],[1,"fas","fa-sm","fa-edit","transition-all","duration-300",3,"ngClass"],[1,"fas","fa-sm","fa-trash","transition-all","duration-300",3,"ngClass"],[3,"click"],[1,"fas","fa-sm","fa-compress-alt","transition-all","duration-300",3,"ngClass"],["class","flex pt-8 space-x-2 justify-center",4,"ngIf"],[3,"id"],["deleteDialog",""],[1,"uppercase","font-thin","text-lg"],[1,"flex","pt-8","space-x-2","justify-center"],[1,"btn","flex-1","mt-2",3,"ngClass","disabled","click"],[1,"fas","fa-sm","fa-external-link-alt","pr-1"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,Pn,20,35,"div",2),t.ALo(3,"filter"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.Dn7(3,1,r.places,r.filterStr,r.updated)))},directives:[p.sg,p.mk,p.O5,Kt],pipes:[Nn,p.gd,p.OU,p.Ov],styles:[""]}),n})();var be=c(4793),N=c(1680),Je=c(2387);function Gn(n,i){1&n&&(t.TgZ(0,"p"),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Name is required! "),t.qZA())}function qn(n,i){1&n&&(t.TgZ(0,"p"),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Name must be at least 4 characters long. "),t.qZA())}function $n(n,i){1&n&&(t.TgZ(0,"p"),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Name must be less than 140 characters. "),t.qZA())}function Bn(n,i){if(1&n&&(t.TgZ(0,"div",25),t.YNc(1,Gn,4,0,"p",26),t.YNc(2,qn,4,0,"p",26),t.YNc(3,$n,4,0,"p",26),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.name.errors?null:e.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.name.errors?null:e.name.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.name.errors?null:e.name.errors.maxlength)}}function jn(n,i){1&n&&(t.TgZ(0,"div",25),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," URL is invalid! "),t.qZA())}function Yn(n,i){1&n&&(t.TgZ(0,"div",25),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Phone number is invalid! "),t.qZA())}const Hn=function(n,i){return{"btn-primary":n,"btn-disabled":i}};function Jn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t._uU(4),t.qZA(),t.TgZ(5,"form",6),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(6,"div",7),t.YNc(7,Bn,4,3,"div",8),t.TgZ(8,"div",9),t.TgZ(9,"label",10),t._UZ(10,"i",11),t.qZA(),t._UZ(11,"input",12),t.qZA(),t.qZA(),t.TgZ(12,"div",13),t.YNc(13,jn,4,0,"div",8),t.TgZ(14,"div",9),t.TgZ(15,"label",14),t._UZ(16,"i",15),t.qZA(),t._UZ(17,"input",16),t.qZA(),t.qZA(),t.TgZ(18,"div",13),t.YNc(19,Yn,4,0,"div",8),t.TgZ(20,"div",9),t.TgZ(21,"label",17),t._UZ(22,"i",18),t.qZA(),t._UZ(23,"input",19),t.qZA(),t.qZA(),t.TgZ(24,"div",20),t.TgZ(25,"button",21),t._UZ(26,"i",22),t._uU(27),t.qZA(),t.TgZ(28,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModal()}),t._UZ(29,"i",24),t._uU(30," Close "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(4),t.hij(" ",e.place?"Edit "+e.place.name:"New Restaurant"," "),t.xp6(1),t.Q6J("formGroup",e.placeForm),t.xp6(2),t.Q6J("ngIf",e.name.invalid&&(e.name.dirty||e.name.touched)),t.xp6(6),t.Q6J("ngIf",(null==e.menu.errors?null:e.menu.errors.pattern)&&(e.menu.dirty||e.menu.touched)),t.xp6(6),t.Q6J("ngIf",(null==e.phone.errors?null:e.phone.errors.pattern)&&(e.phone.dirty||e.phone.touched)),t.xp6(6),t.Q6J("ngClass",t.WLB(8,Hn,!e.placeForm.invalid,e.placeForm.invalid))("disabled",e.placeForm.invalid),t.xp6(2),t.hij(" ",e.place?"Save":"Add"," ")}}function Qn(n,i){1&n&&t._UZ(0,"div",28)}let zn=(()=>{class n{constructor(e,r,s){this._modalService=e,this._placeService=r,this._toastr=s,this.subs=new R.Y,this.showModal=!1,this.placeForm=new F({name:new O(null,[S.required,S.minLength(2),S.maxLength(140)]),phone:new O(null,S.pattern("^\\d{3}\\s\\d{3,4}\\s\\d{3,4}$")),menu:new O(null,S.pattern("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\//)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$"))})}get name(){return this.placeForm.get("name")}get phone(){return this.placeForm.get("phone")}get menu(){return this.placeForm.get("menu")}closeModal(){this.place=void 0,this.placeForm.reset(),this.showModal=!1}onSubmit(){var e;const r=Object.assign({phoneNumber:null===(e=this.placeForm.get("phone"))||void 0===e?void 0:e.value},this.placeForm.value);this.subs.sink=this.place?this._placeService.updatePlace(this.place.id,r).pipe((0,be.K)(o=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,N.of)(void 0)))).subscribe():this._placeService.addNewPlace(r).pipe((0,be.K)(s=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,N.of)(void 0)))).subscribe(),this.closeModal()}ngOnInit(){this.subs.sink=this._modalService.showModal$.subscribe(e=>{this.showModal=!0,e&&this._placeService.getPlaceById(e).subscribe(r=>{this.place=r,this.placeForm.patchValue({name:r.name,menu:r.menu,phone:r.phoneNumber})})})}ngAfterViewInit(){}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Oe),t.Y36(Jt),t.Y36(Je._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-place-modal"]],decls:2,vars:2,consts:[["class","z-50 fixed inset-0 flex justify-center items-center",4,"ngIf"],["class","absolute backdrop-filter backdrop-blur-lg z-40 inset-0 bg-opacity-10 bg-serapion-blue-300",4,"ngIf"],[1,"z-50","fixed","inset-0","flex","justify-center","items-center"],[1,"relative","mx-auto","w-1/2","max-w-2xl"],[1,"bg-serapion-white","rounded-md","p-8","shadow-lg","flex","flex-col","dark:bg-serapion-black-200"],[1,"text-lg","font-thin","uppercase"],[1,"pt-4",3,"formGroup","ngSubmit"],[1,"w-full"],["class","text-xs text-serapion-purple pb-2",4,"ngIf"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],["for","name",1,"w-8","text-right","text-serapion-grey-100","mr-6"],[1,"fas","fa-md","fa-store"],["type","text","id","name","placeholder","e.g. Mozaik","autocomplete","off","name","name","formControlName","name",1,"flex-1","p-2","pl-0","text-md","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0"],[1,"w-full","mt-8"],["for","menu",1,"w-8","text-right","mr-6","text-serapion-grey-100"],[1,"fas","fa-md","fa-globe"],["type","text","id","menu","placeholder","e.g. https://www.google.com/","autocomplete","off","name","menu","formControlName","menu",1,"select-all","flex-1","p-2","pl-0","text-md","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0"],["for","phone",1,"w-8","text-right","mr-6","text-serapion-grey-100"],[1,"fas","fa-md","fa-phone"],["type","text","id","phone","placeholder","e.g. 062 225 883","autocomplete","off","name","phone","formControlName","phone",1,"select-all","flex-1","p-2","pl-0","text-md","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0"],[1,"pt-8","flex","flex-row-reverse","justify-between","items-center"],["type","submit",1,"btn","w-1/2","ml-1",3,"ngClass","disabled"],[1,"fas","fa-check","pr-1"],["type","button",1,"btn","btn-secondary","w-1/2",3,"click"],[1,"fas","fa-times","pr-1"],[1,"text-xs","text-serapion-purple","pb-2"],[4,"ngIf"],[1,"font-semibold"],[1,"absolute","backdrop-filter","backdrop-blur-lg","z-40","inset-0","bg-opacity-10","bg-serapion-blue-300"]],template:function(e,r){1&e&&(t.YNc(0,Jn,31,11,"div",0),t.YNc(1,Qn,1,0,"div",1)),2&e&&(t.Q6J("ngIf",r.showModal),t.xp6(1),t.Q6J("ngIf",r.showModal))},directives:[p.O5,Y,B,P,M,$,H,p.mk],styles:[""]}),n})(),Wn=(()=>{class n{constructor(e,r){this._modalService=e,this._sidebarService=r,this.filterInput="",this.showModal=!1,this.subs=new R.Y}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}openPlacesDialog(){this._modalService.modalOpen()}hideSidebar(){this._sidebarService.toggleSidebar()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Oe),t.Y36(Se))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-places"]],decls:21,vars:2,consts:[[1,"sticky","top-0","z-40","bg-serapion-white","dark:bg-serapion-black-200","dark:bg-opacity-95","bg-opacity-95"],[1,"flex","flex-row","items-center","p-4","z-50"],[1,"flex-1"],[1,"uppercase","font-thin","text-xl","tracking-widest"],[1,"text-sm","text-serapion-grey-100","font-thin"],[1,"flex","flex-row","space-x-2","justify-between","items-center"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-plus","fa-xs","pr-1"],[1,"hidden","shadow-md","lg:flex","flex-row","items-center","justify-center","bg-serapion-blue-100","dark:bg-serapion-black-100","bg-opacity-50","w-12","h-12","rounded-full","cursor-pointer",3,"click"],[1,"fas","fa-compress-alt","fa-md","text-serapion-grey-100","hover:text-serapion-grey-200","dark:hover:text-serapion-white","transition-all","duration-300"],[1,"pb-6","px-4","z-50"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],["for","filter",1,"w-8","text-right","mr-4","text-serapion-grey-100"],[1,"fas","fa-xs","fa-search"],["type","text","id","filter","placeholder","Restaurant name...","autocomplete","off","name","filter",1,"flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"ngModel","ngModelChange"],[3,"filterStr"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4,"Restaurants"),t.qZA(),t.TgZ(5,"div",4),t._uU(6," Choose from local restaurants "),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.NdJ("click",function(){return r.openPlacesDialog()}),t._UZ(9,"i",7),t._uU(10," New "),t.qZA(),t.TgZ(11,"div",8),t.NdJ("click",function(){return r.hideSidebar()}),t._UZ(12,"i",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"form"),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._UZ(17,"i",13),t.qZA(),t.TgZ(18,"input",14),t.NdJ("ngModelChange",function(o){return r.filterInput=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(19,"app-place-list",15),t._UZ(20,"app-place-modal")),2&e&&(t.xp6(18),t.Q6J("ngModel",r.filterInput),t.xp6(1),t.Q6J("filterStr",r.filterInput))},directives:[Y,B,he,M,$,Le,Ln,zn],styles:[".places-hero[_ngcontent-%COMP%]{background-image:url(places-raw.01abdea7d427bd8b.jpg);--tw-bg-opacity: 1;background-color:rgba(222,242,255,var(--tw-bg-opacity));background-size:cover;background-position:center;background-repeat:no-repeat;padding:10rem;background-blend-mode:darken;--tw-blur: var(--tw-empty, );--tw-brightness: var(--tw-empty, );--tw-contrast: var(--tw-empty, );--tw-grayscale: var(--tw-empty, );--tw-hue-rotate: var(--tw-empty, );--tw-invert: var(--tw-empty, );--tw-saturate: var(--tw-empty, );--tw-sepia: var(--tw-empty, );--tw-drop-shadow: var(--tw-empty, );filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);--tw-blur: blur(4px)}"]}),n})();function er(n,i,e,r,s,o,a){try{var l=n[o](a),d=l.value}catch(u){return void e(u)}l.done?i(d):Promise.resolve(d).then(r,s)}var Xn=c(5337),ei=c(9225);let ti=(()=>{class n{transform(e,r){return e&&e.filter((s,o,a)=>a.findIndex(l=>l.user.id===s.user.id)===o)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"uniqueFilter",type:n,pure:!0}),n})();function ri(n,i){if(1&n&&t._UZ(0,"img",21),2&n){const e=i.$implicit;t.s9C("src",e.user.photo,t.LSH),t.s9C("alt",e.user.firstName+" "+e.user.lastName+" Profile Picture"),t.s9C("title",e.user.firstName+" "+e.user.lastName)}}const ni=function(){return{}},tr=function(n,i){return{"text-serapion-grey-100":n,"cursor-not-allowed":i}};function ii(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"div",13),t.ALo(2,"uppercase"),t._uU(3),t.qZA(),t.TgZ(4,"div",14),t.TgZ(5,"div",15),t.YNc(6,ri,1,3,"img",16),t.ALo(7,"slice"),t.ALo(8,"uniqueFilter"),t.qZA(),t.TgZ(9,"div",17),t.TgZ(10,"button",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().removeItem(o)}),t._UZ(11,"i",19),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.TgZ(14,"button",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().addItem(o)}),t._UZ(15,"i",20),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit,r=t.oxw();t.xp6(1),t.s9C("title",t.lcZ(2,9,e.name)),t.xp6(2),t.hij(" ",e.name," "),t.xp6(3),t.Q6J("ngForOf",t.Dn7(7,11,t.xi3(8,15,e.orderedItems,r.updated),0,5)),t.xp6(4),t.Q6J("disabled",(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE||!r.haveThisItem(e)),t.xp6(1),t.Q6J("ngClass",t.DdM(18,ni))("ngClass",t.WLB(19,tr,!r.haveThisItem(e)||(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE,(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE)),t.xp6(2),t.hij("",e.orderedItems.length,"x"),t.xp6(1),t.Q6J("disabled",(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE),t.xp6(1),t.Q6J("ngClass",t.WLB(22,tr,(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE,(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE))}}const si=function(n){return{"cursor-not-allowed":n}},oi=function(n,i){return{"btn-primary":n,"btn-disabled":i}};let ai=(()=>{class n{constructor(e,r,s){this._orderService=e,this._websocketService=r,this._toastr=s,this.items=[],this.updated=new Date,this.subs=new R.Y,this.orderStatus=E,this.itemForm=new F({item:new O(null,[S.required,S.minLength(1),S.maxLength(140)])})}ngOnInit(){this.order.id&&(this.subs.sink=this._orderService.getOrderItems(this.order.id).subscribe(e=>{this.items=e})),this.subs.sink=this._websocketService.onOrderItemAdded().subscribe(e=>{e.order.id===this.order.id&&(this.items.push(e),this.updated=new Date)}),this.subs.sink=this._websocketService.onOrderItemDeleted().subscribe(e=>{this.items=this.items.filter(r=>r.id!=e),this.updated=new Date}),this.subs.sink=this._websocketService.onOrderItemUserAdded().subscribe(e=>{this.items.forEach(r=>{r.id===e.id&&(r.orderedItems=e.orderedItems,this.updated=new Date)})}),this.subs.sink=this._websocketService.onOrderItemUserDeleted().subscribe(e=>{this.items.forEach(r=>{var s;if(r.id===e.orderItem.id){const o=r.orderedItems.findIndex(a=>a.user.id==e.user.id);r.orderedItems.splice(o,1),0===(null===(s=r.orderedItems)||void 0===s?void 0:s.length)&&this._orderService.deleteOrderItem(e.orderItem.id)}this.updated=new Date})}),this.subs.sink=this._websocketService.onOrderCompleted().subscribe(e=>{var r;e.id===(null===(r=this.order)||void 0===r?void 0:r.id)&&(this.order=e,this.items=e.orderItems)})}onSubmit(){var r;this.itemForm.get("item"),JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));const o={name:null===(r=this.itemForm.get("item"))||void 0===r?void 0:r.value,order:this.order,orderedItems:[{user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER))}]};this.subs.sink=this._orderService.addNewOrderItem(o).pipe((0,be.K)(a=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,N.of)(void 0)))).subscribe(a=>{if(a){const l=Object.assign(Object.assign({},a),{user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER))});this._orderService.addOrderItemUser(l)}}),this.itemForm.reset()}addItem(e){const r={id:e.id,order:e.order,user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER))};this._orderService.addOrderItemUser(r).subscribe()}removeItem(e){const r=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));-1!==e.orderedItems.findIndex(a=>{var l;return(null===(l=a.user)||void 0===l?void 0:l.id)==r.id})&&this._orderService.removeOrderItemUser({itemId:e.id,userId:r.id})}haveThisItem(e){if(e){const r=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(e.orderedItems)return-1!==e.orderedItems.findIndex(o=>{var a;return(null===(a=o.user)||void 0===a?void 0:a.id)==r.id})}return!1}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ye),t.Y36(ge),t.Y36(Je._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-order-items"]],inputs:{order:"order"},decls:13,vars:13,consts:[[1,"pt-4"],[1,"relative","text-serapion-grey-100","text-xs","flex","flex-col","lg:flex-row","items-center","justify-between","gap-2",3,"formGroup","ngSubmit"],[1,"flex-1","group","w-full","lg:w-2/4","mr-1"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],[1,"w-6","text-right","mr-4","text-serapion-grey-100","cursor-pointer",3,"for"],[1,"fas","fa-xs","fa-hamburger"],["type","text","placeholder","e.g. Hamburger","autocomplete","off","name","item","formControlName","item",1,"flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"id","ngClass"],[1,"w-full","py-2","lg:w-max","lg:py-0"],["type","submit",1,"btn","btn-primary","w-full",3,"ngClass","disabled"],[1,"fas","fa-plus","fa-xs","pr-1"],[1,"flex","flex-col","justify-between"],["class","pt-8 flex flex-row justify-between items-center",4,"ngFor","ngForOf"],[1,"pt-8","flex","flex-row","justify-between","items-center"],[1,"uppercase","text-xs","font-thin",3,"title"],[1,"flex","flex-row","justify-between","items-center","flex-none","ml-1"],[1,"-space-x-2","ml-auto","mr-1"],["class","relative z-30 inline object-cover w-5 h-5 border-2 border-serapion-white rounded-full dark:border-serapion-black-200","referrerpolicy","no-referrer",3,"src","alt","title",4,"ngFor","ngForOf"],[1,"uppercase","text-xs","font-semibold"],[3,"disabled","click"],[1,"fas","fa-angle-left","fa-sm","pr-1","cursor-pointer",3,"ngClass"],[1,"fas","fa-angle-right","fa-sm","pl-1","cursor-pointer",3,"ngClass"],["referrerpolicy","no-referrer",1,"relative","z-30","inline","object-cover","w-5","h-5","border-2","border-serapion-white","rounded-full","dark:border-serapion-black-200",3,"src","alt","title"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"label",4),t._UZ(5,"i",5),t.qZA(),t._UZ(6,"input",6),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"button",8),t._UZ(9,"i",9),t._uU(10," Add "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",10),t.YNc(12,ii,16,25,"div",11),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",r.itemForm),t.xp6(3),t.MGl("for","item-",null==r.order?null:r.order.id,""),t.xp6(2),t.MGl("id","item-",null==r.order?null:r.order.id,""),t.Q6J("ngClass",t.VKq(8,si,(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE)),t.uIk("disabled",(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE?"":null),t.xp6(2),t.Q6J("ngClass",t.WLB(10,oi,!r.itemForm.invalid&&(null==r.order?null:r.order.status)===r.orderStatus.ACTIVE,r.itemForm.invalid||(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE))("disabled",r.itemForm.invalid||(null==r.order?null:r.order.status)===r.orderStatus.INACTIVE),t.xp6(4),t.Q6J("ngForOf",r.items))},directives:[Y,B,P,M,$,H,p.mk,p.sg],pipes:[p.gd,p.OU,ti],styles:[""]}),n})();const li=["list"],ui=["defaultItemTemplate"];function di(n,i){if(1&n&&t._uU(0),2&n){const e=i.item,r=t.oxw();t.hij(" ",e[r.labelKey]," ")}}function ci(n,i){}const hi=function(n){return{item:n}};function pi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"li"),t.TgZ(1,"a",4),t.NdJ("mousedown",function(s){const a=t.CHM(e).index,l=t.oxw();return l.activeIndex=a,l.itemClick.emit(),s.preventDefault()}),t.YNc(2,ci,0,0,"ng-template",5),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit,r=i.index,s=t.oxw();t.ekj("active",s.activeIndex==r)("mention-active",!s.styleOff&&s.activeIndex==r),t.xp6(1),t.ekj("mention-item",!s.styleOff),t.xp6(1),t.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",t.VKq(8,hi,e))}}function rr(n){return te(n)?n.value:n.textContent}function Qe(n,i,e,r,s,o=!1){if(function(n){return null!=n&&("INPUT"==n.nodeName||"TEXTAREA"==n.nodeName||"#text"==n.nodeName)}(n)){let u=rr(n);(function(n,i){te(n)?n.value=i:n.textContent=i})(n,u.substring(0,i)+r+u.substring(e,u.length)),nr(n,i+r.length,s)}else if(!o){let u=we(s);if(u&&u.rangeCount>0){var l=u.getRangeAt(0).startOffset;Qe(u.anchorNode,l-(e-i),l,r,s,!0)}}}function te(n){return null!=n&&("INPUT"==n.nodeName||"TEXTAREA"==n.nodeName)}function nr(n,i,e=null){if(te(n)&&n.selectionStart)n.focus(),n.setSelectionRange(i,i);else{let r=ze(e).createRange();r.setStart(n,i),r.collapse(!0);let s=we(e);s.removeAllRanges(),s.addRange(r)}}function ir(n,i=null){if(te(n))return n.value.slice(0,n.selectionStart).length;var r=we(i);if(r.rangeCount>0){var s=r.getRangeAt(0),o=s.cloneRange();return o.selectNodeContents(n),o.setEnd(s.endContainer,s.endOffset),o.toString().length}}function ze(n){return n?n.contentWindow.document:document}function we(n){return n?n.contentWindow.getSelection():window.getSelection()}function sr(n){let e="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),r=ze(n?n.iframe:null),s=we(n?n.iframe:null),o=s.getRangeAt(0),a=r.createRange();a.setStart(s.anchorNode,o.startOffset),a.setEnd(s.anchorNode,o.startOffset),a.collapse(!1);let l=r.createElement("span");l.id=e,l.appendChild(r.createTextNode("\ufeff")),a.insertNode(l),s.removeAllRanges(),s.addRange(o);let d={left:0,top:l.offsetHeight};return function(n,i,e){let r=i,s=n?n.iframe:null;for(;r&&(null==n.parent||n.parent!=r);)e.left+=r.offsetLeft+r.clientLeft,e.top+=r.offsetTop+r.clientTop,r=r.offsetParent,!r&&s&&(r=s,s=null);for(r=i,s=n?n.iframe:null;r!==ze(null).body&&null!=r&&(null==n.parent||n.parent!=r);)r.scrollTop&&r.scrollTop>0&&(e.top-=r.scrollTop),r.scrollLeft&&r.scrollLeft>0&&(e.left-=r.scrollLeft),r=r.parentNode,!r&&s&&(r=s,s=null)}(n,l,d),l.parentNode.removeChild(l),d}var _i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],or="undefined"!=typeof window,vi=or&&null!=window.mozInnerScreenX;let bi=(()=>{class n{constructor(e){this.element=e,this.labelKey="label",this.itemClick=new t.vpe,this.items=[],this.activeIndex=0,this.hidden=!1,this.dropUp=!1,this.styleOff=!1,this.coords={top:0,left:0},this.offset=0}ngAfterContentChecked(){this.itemTemplate||(this.itemTemplate=this.defaultItemTemplate)}position(e,r=null){if(te(e))this.coords=function(n,i,e){if(!or)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var o=document.createElement("div");o.id="input-textarea-caret-position-mirror-div",document.body.appendChild(o);var a=o.style,l=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,d="INPUT"===n.nodeName;a.whiteSpace="pre-wrap",d||(a.wordWrap="break-word"),a.position="absolute",a.visibility="hidden",_i.forEach(function(f){if(d&&"lineHeight"===f)if("border-box"===l.boxSizing){var m=parseInt(l.height),v=parseInt(l.paddingTop)+parseInt(l.paddingBottom)+parseInt(l.borderTopWidth)+parseInt(l.borderBottomWidth),I=v+parseInt(l.lineHeight);a.lineHeight=m>I?m-v+"px":m===I?l.lineHeight:"0"}else a.lineHeight=l.height;else a[f]=l[f]}),vi?n.scrollHeight>parseInt(l.height)&&(a.overflowY="scroll"):a.overflow="hidden",o.textContent=n.value.substring(0,i),d&&(o.textContent=o.textContent.replace(/\s/g,"\xa0"));var u=document.createElement("span");u.textContent=n.value.substring(i)||".",o.appendChild(u);var h={top:u.offsetTop+parseInt(l.borderTopWidth),left:u.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return document.body.removeChild(o),h}(e,e.selectionStart),this.coords.top=e.offsetTop+this.coords.top-e.scrollTop,this.coords.left=e.offsetLeft+this.coords.left-e.scrollLeft,this.offset=this.getBlockCursorDimensions(e).height;else if(r)this.coords=sr({iframe:r,parent:r.offsetParent});else{let s=document.documentElement,o=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),a=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),l=sr({iframe:r}),d=e.getBoundingClientRect();this.coords.top=l.top-d.top+e.offsetTop-a,this.coords.left=l.left-d.left+e.offsetLeft-o}this.positionElement()}get activeItem(){return this.items[this.activeIndex]}activateNextItem(){let e=this.list.nativeElement,r=e.getElementsByClassName("active").item(0);if(r){let s=r.nextSibling;if(s&&"LI"==s.nodeName){let o=s.getBoundingClientRect();o.bottom>e.getBoundingClientRect().bottom&&(e.scrollTop=s.offsetTop+o.height-e.clientHeight)}}this.activeIndex=Math.max(Math.min(this.activeIndex+1,this.items.length-1),0)}activatePreviousItem(){let e=this.list.nativeElement,r=e.getElementsByClassName("active").item(0);if(r){let s=r.previousSibling;s&&"LI"==s.nodeName&&s.getBoundingClientRect().top<e.getBoundingClientRect().top&&(e.scrollTop=s.offsetTop)}this.activeIndex=Math.max(Math.min(this.activeIndex-1,this.items.length-1),0)}reset(){this.list.nativeElement.scrollTop=0,this.checkBounds()}checkBounds(){let e=this.coords.left,r=this.coords.top,s=this.dropUp;const o=this.list.nativeElement.getBoundingClientRect();o.left+o.width>window.innerWidth&&(e-=o.left+o.width-window.innerWidth+10),o.top<0&&(s=!1),this.positionElement(e,r,s)}positionElement(e=this.coords.left,r=this.coords.top,s=this.dropUp){const o=this.element.nativeElement;r+=s?0:this.offset,o.className=s?"dropup":null,o.style.position="absolute",o.style.left=e+"px",o.style.top=r+"px"}getBlockCursorDimensions(e){const r=window.getComputedStyle(e);return{height:parseFloat(r.lineHeight),width:parseFloat(r.fontSize)}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mention-list"]],viewQuery:function(e,r){if(1&e&&(t.Gf(li,7),t.Gf(ui,7)),2&e){let s;t.iGM(s=t.CRH())&&(r.list=s.first),t.iGM(s=t.CRH())&&(r.defaultItemTemplate=s.first)}},inputs:{labelKey:"labelKey",itemTemplate:"itemTemplate"},outputs:{itemClick:"itemClick"},decls:5,vars:6,consts:[["defaultItemTemplate",""],[1,"dropdown-menu","scrollable-menu",3,"hidden"],["list",""],[3,"active","mention-active",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,r){1&e&&(t.YNc(0,di,1,1,"ng-template",null,0,t.W1O),t.TgZ(2,"ul",1,2),t.YNc(4,pi,3,10,"li",3),t.qZA()),2&e&&(t.xp6(2),t.ekj("mention-menu",!r.styleOff)("mention-dropdown",!r.styleOff&&r.dropUp),t.Q6J("hidden",r.hidden),t.xp6(2),t.Q6J("ngForOf",r.items))},directives:[p.sg,p.tP],styles:[".mention-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:11em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25em}.mention-item[_ngcontent-%COMP%]{display:block;padding:.2em 1.5em;line-height:1.5em;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.scrollable-menu[_ngcontent-%COMP%]{display:block;height:auto;max-height:292px;overflow:auto}[hidden][_ngcontent-%COMP%]{display:none}.mention-dropdown[_ngcontent-%COMP%]{bottom:100%;top:auto;margin-bottom:2px}"]}),n})(),Ei=(()=>{class n{constructor(e,r,s){this._element=e,this._componentResolver=r,this._viewContainerRef=s,this.mentionConfig={items:[]},this.DEFAULT_CONFIG={items:[],triggerChar:"@",labelKey:"label",maxItems:-1,allowSpace:!1,returnTrigger:!1,mentionSelect:(o,a)=>this.activeConfig.triggerChar+o[this.activeConfig.labelKey],mentionFilter:(o,a)=>{const l=o.toLowerCase();return a.filter(d=>d[this.activeConfig.labelKey].toLowerCase().startsWith(l))}},this.searchTerm=new t.vpe,this.itemSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.triggerChars={}}set mention(e){this.mentionItems=e}ngOnChanges(e){(e.mention||e.mentionConfig)&&this.updateConfig()}updateConfig(){let e=this.mentionConfig;this.triggerChars={},this.mentionItems&&(e.items=this.mentionItems),this.addConfig(e),e.mentions&&e.mentions.forEach(r=>this.addConfig(r))}addConfig(e){let r=Object.assign({},this.DEFAULT_CONFIG),s=(e=Object.assign(r,e)).items;s&&s.length>0&&("string"==typeof s[0]&&(s=s.map(o=>{let a={};return a[e.labelKey]=o,a})),e.labelKey&&(s=s.filter(o=>o[e.labelKey]),e.disableSort||s.sort((o,a)=>o[e.labelKey].localeCompare(a[e.labelKey])))),e.items=s,this.triggerChars[e.triggerChar]=e,this.activeConfig&&this.activeConfig.triggerChar==e.triggerChar&&(this.activeConfig=e,this.updateSearchList())}setIframe(e){this.iframe=e}stopEvent(e){e.wasClick||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}blurHandler(e){this.stopEvent(e),this.stopSearch()}inputHandler(e,r=this._element.nativeElement){if(229===this.lastKeyCode&&e.data){let s=e.data.charCodeAt(0);this.keyHandler({keyCode:s,inputEvent:!0},r)}}keyHandler(e,r=this._element.nativeElement){if(this.lastKeyCode=e.keyCode,e.isComposing||229===e.keyCode)return;let s=rr(r),o=ir(r,this.iframe),a=e.key;if(!a){let d=e.which||e.keyCode;a=String.fromCharCode(!e.shiftKey&&d>=65&&d<=90?d+32:e.which||e.keyCode)}13==e.keyCode&&e.wasClick&&o<this.startPos&&(o=this.startNode.length,nr(this.startNode,o,this.iframe));let l=this.triggerChars[a];if(l)this.activeConfig=l,this.startPos=e.inputEvent?o-1:o,this.startNode=(this.iframe?this.iframe.contentWindow.getSelection():window.getSelection()).anchorNode,this.searching=!0,this.searchString=null,this.showSearchList(r),this.updateSearchList(),l.returnTrigger&&this.searchTerm.emit(l.triggerChar);else if(this.startPos>=0&&this.searching)if(o<=this.startPos)this.searchList.hidden=!0;else if(16!==e.keyCode&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&o>this.startPos){if(this.activeConfig.allowSpace||32!==e.keyCode){if(8===e.keyCode&&o>0)o--,o==this.startPos&&this.stopSearch();else if(this.searchList.hidden){if(9===e.keyCode||13===e.keyCode)return void this.stopSearch()}else if(!this.searchList.hidden){if(9===e.keyCode||13===e.keyCode){this.stopEvent(e),this.itemSelected.emit(this.searchList.activeItem);const d=this.activeConfig.mentionSelect(this.searchList.activeItem,this.activeConfig.triggerChar);if(Qe(r,this.startPos,o,d,this.iframe),"createEvent"in document){let u=document.createEvent("HTMLEvents");u.initEvent(this.iframe?"change":"input",!0,!1),this._element.nativeElement.dispatchEvent(u)}return this.startPos=-1,this.stopSearch(),!1}if(27===e.keyCode)return this.stopEvent(e),this.stopSearch(),!1;if(40===e.keyCode)return this.stopEvent(e),this.searchList.activateNextItem(),!1;if(38===e.keyCode)return this.stopEvent(e),this.searchList.activatePreviousItem(),!1}}else this.startPos=-1;if(1!=a.length&&8!=e.keyCode)return this.stopEvent(e),!1;if(this.searching){let d=s.substring(this.startPos+1,o);if(8!==e.keyCode&&!e.inputEvent&&(d+=a),this.searchString=d,this.activeConfig.returnTrigger){const u=this.searchString||8===e.keyCode?s.substring(this.startPos,this.startPos+1):"";this.searchTerm.emit(u+this.searchString)}else this.searchTerm.emit(this.searchString);this.updateSearchList()}}}startSearch(e,r=this._element.nativeElement){e=e||this.mentionConfig.triggerChar||this.DEFAULT_CONFIG.triggerChar;const s=ir(r,this.iframe);Qe(r,s,s,e,this.iframe),this.keyHandler({key:e,inputEvent:!0},r)}stopSearch(){this.searchList&&!this.searchList.hidden&&(this.searchList.hidden=!0,this.closed.emit()),this.activeConfig=null,this.searching=!1}updateSearchList(){let e=[];if(this.activeConfig&&this.activeConfig.items){let r=this.activeConfig.items;!this.activeConfig.disableSearch&&this.searchString&&this.activeConfig.labelKey&&this.activeConfig.mentionFilter&&(r=this.activeConfig.mentionFilter(this.searchString,r)),e=r,this.activeConfig.maxItems>0&&(e=e.slice(0,this.activeConfig.maxItems))}this.searchList&&(this.searchList.items=e,this.searchList.hidden=0==e.length)}showSearchList(e){if(this.opened.emit(),null==this.searchList){let r=this._componentResolver.resolveComponentFactory(bi),s=this._viewContainerRef.createComponent(r);this.searchList=s.instance,this.searchList.itemTemplate=this.mentionListTemplate,s.instance.itemClick.subscribe(()=>{e.focus(),this.keyHandler({key:"Enter",keyCode:13,wasClick:!0},e)})}this.searchList.labelKey=this.activeConfig.labelKey,this.searchList.dropUp=this.activeConfig.dropUp,this.searchList.styleOff=this.mentionConfig.disableStyle,this.searchList.activeIndex=0,this.searchList.position(e,this.iframe),window.requestAnimationFrame(()=>this.searchList.reset())}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t._Vd),t.Y36(t.s_b))},n.\u0275dir=t.lG2({type:n,selectors:[["","mention",""],["","mentionConfig",""]],hostAttrs:["autocomplete","off"],hostBindings:function(e,r){1&e&&t.NdJ("keydown",function(o){return r.keyHandler(o)})("input",function(o){return r.inputHandler(o)})("blur",function(o){return r.blurHandler(o)})},inputs:{mentionConfig:"mentionConfig",mention:"mention",mentionListTemplate:"mentionListTemplate"},outputs:{searchTerm:"searchTerm",itemSelected:"itemSelected",opened:"opened",closed:"closed"},features:[t.TTD]}),n})(),Ai=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez]]}),n})();const Ti=["commentBox"];function Ii(n,i){if(1&n&&(t.TgZ(0,"strong",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.AsE(" ",r.isMessageOwner(e)?"You,":e.user.firstName+","," ",t.xi3(2,2,e.commentedOn,"shortTime")," ")}}function Ni(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"i",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().handleDeleteMessage(s)}),t.qZA()}}const Mi=function(n){return{"bg-serapion":n}};function Vi(n,i){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._UZ(2,"img",18),t.qZA(),t.TgZ(3,"div",19),t.YNc(4,Ii,3,5,"strong",20),t.TgZ(5,"div",21),t.TgZ(6,"p",22),t._uU(7),t.qZA(),t.YNc(8,Ni,1,0,"i",23),t.qZA(),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=t.oxw();t.xp6(2),t.s9C("src",null==e.user?null:e.user.photo,t.LSH),t.s9C("alt",e.user.firstName+" "+e.user.lastName+" Profile Picture"),t.s9C("title",e.user.firstName+" "+e.user.lastName),t.xp6(2),t.Q6J("ngIf",e.user),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Mi,r.isCurrentUser(e.user))),t.xp6(1),t.hij(" ",e.comment," "),t.xp6(1),t.Q6J("ngIf",r.isMessageOwner(e))}}const Di=function(n){return{"opacity-0":n}};function ki(n,i){if(1&n&&(t.TgZ(0,"div",26),t._UZ(1,"img",27),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&n){const e=i.item;t.xp6(1),t.s9C("src",e.photo,t.LSH),t.Q6J("ngClass",t.VKq(3,Di,void 0===e.photo)),t.xp6(2),t.Oqu(e.firstName)}}const Fi=function(){return{labelKey:"firstName",dropUp:!0}},Zi=function(n,i){return{"btn-primary":n,"btn-disabled":i}};let Ri=(()=>{class n{constructor(e,r,s,o){this._orderService=e,this._websocketService=r,this._notificationService=s,this._toastr=o,this.orderStatus=E,this.users$=new q.X([]),this.toMention=[],this.messages=[],this.subs=new R.Y,this.commentForm=new F({comment:new O(null,[S.required,S.minLength(1),S.maxLength(140)])}),this._getUsers$=()=>this._orderService.getOrderItems(this.order.id).pipe((0,Ee.U)(a=>a.map(({orderedItems:l})=>null==l?void 0:l.map(({user:d})=>d)).flat())),this._getNewUsers$=a=>{var l;return a.id===(null===(l=this.order)||void 0===l?void 0:l.id)?this._orderService.getOrderItems(this.order.id).pipe((0,Ee.U)(d=>d.map(({orderedItems:u})=>null==u?void 0:u.map(({user:h})=>h)).flat())):(0,N.of)(void 0)},this._populateMentionList=a=>{const l=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));l&&l.subscriptionId&&(a=a.filter(u=>u.subscriptionId!==l.subscriptionId));let d=[...new Map(a.map(u=>[u.id,u])).values()];d.length&&d.unshift({id:-1,firstName:"All",lastName:"All",email:"All"}),this.users$.next(d)},this.isMessageOwner=({user:a})=>{const l=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));return!!a&&a.id===l.id},this.handleDeleteMessage=({id:a})=>{a&&(this._orderService.deleteMessageWithId(a).subscribe(),this.messages=this.messages.filter(l=>l.id!==a))}}ngOnInit(){this.order&&(this.subs.sink=this._orderService.getComments(this.order.id).subscribe(e=>{this.messages=e,this.messages.sort((r,s)=>r.commentedOn<s.commentedOn?-1:1)}),this.subs.sink=this._getUsers$().subscribe(e=>this._populateMentionList(e))),this.subs.sink=this._websocketService.onCommentDeleted().pipe((0,y.w)(()=>this._orderService.getComments(this.order.id))).subscribe(e=>{this.messages=e,this.messages.sort((r,s)=>r.commentedOn<s.commentedOn?-1:1)}),this.subs.sink=this._websocketService.onOrderItemAdded().pipe((0,y.w)(e=>{var r;return e.order.id===(null===(r=this.order)||void 0===r?void 0:r.id)&&this.order&&(this.order.orderItems?this.order.orderItems.push(e):this.order.orderItems=[e]),this._getNewUsers$(e.order)})).subscribe(e=>e&&this._populateMentionList(e)),this.subs.sink=this._websocketService.onOrderItemDeleted().pipe((0,y.w)(e=>{let r=!1;return this.order&&this.order.orderItems&&this.order.orderItems.forEach(s=>{s.id===+e&&(r=!0)}),this.order&&r?this._getNewUsers$(this.order):(0,N.of)(void 0)})).subscribe(e=>e&&this._populateMentionList(e)),this.subs.sink=this._websocketService.onOrderItemUserAdded().pipe((0,y.w)(e=>{let r=!1;return this.order&&this.order.orderItems&&this.order.orderItems.forEach(s=>{e.id===s.id&&this.order&&(r=!0)}),this.order&&r?this._getNewUsers$(this.order):(0,N.of)(void 0)})).subscribe(e=>{e&&this._populateMentionList(e)}),this.subs.sink=this._websocketService.onOrderItemUserDeleted().pipe((0,y.w)(e=>{let r=!1;return this.order&&this.order.orderItems&&this.order.orderItems.forEach(s=>{e.orderItem&&s.id===e.orderItem.id&&(r=!0)}),this.order&&r?this._getNewUsers$(this.order):(0,N.of)(void 0)})).subscribe(e=>e&&this._populateMentionList(e)),this.subs.sink=this._websocketService.onCommentReceived().subscribe(e=>{var r;e.order.id===(null===(r=this.order)||void 0===r?void 0:r.id)&&(this.messages.push(e),this.messages.sort((s,o)=>s.commentedOn<o.commentedOn?-1:1),setTimeout(()=>{this.commentBox.nativeElement.scroll({top:Number.MAX_SAFE_INTEGER,left:0,behavior:"smooth"})},100))})}ngAfterViewInit(){}ngAfterViewChecked(){this.commentBox.nativeElement.scroll({top:Number.MAX_SAFE_INTEGER,left:0,behavior:"smooth"})}onAddComment(){var e;const r={comment:null===(e=this.commentForm.get("comment"))||void 0===e?void 0:e.value,user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER)),order:this.order};this._orderService.addNewComment(r).pipe((0,be.K)(s=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,N.of)(void 0))),(0,y.w)(s=>{var o;return s?this._orderService.getOrderItems(null===(o=s.order)||void 0===o?void 0:o.id):(0,N.of)(void 0)})).subscribe(s=>{var o,a,l,d;if(s){let u=[];if(s.length){s.forEach(f=>{var m;null===(m=f.orderedItems)||void 0===m||m.forEach(v=>{var I;(null===(I=v.user)||void 0===I?void 0:I.subscriptionId)&&u.push(v.user.subscriptionId)})});const h=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(u=[...new Set(u)],h&&h.subscriptionId&&(u=u.filter(f=>f!==h.subscriptionId)),u.length){const f=`New message in ${null===(o=this.order)||void 0===o?void 0:o.restaurant.name}!\n${r.comment}`;this._notificationService.sendNotificationToUsers(u,f)}}if(this.toMention.length){const h=this.toMention.findIndex(v=>"All"===v.firstName);let f=[];-1!==h?this.users$.value.forEach(v=>{v.subscriptionId&&f.push(v.subscriptionId)}):this.toMention.forEach(v=>{v.subscriptionId&&f.push(v.subscriptionId)});const m=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(f=[...new Set(f)],m&&m.subscriptionId&&(f=f.filter(v=>v!=m.subscriptionId)),f.length){const v=`New mention in ${null===(a=this.order)||void 0===a?void 0:a.restaurant.name}!\n${null===(l=this.order)||void 0===l?void 0:l.user.firstName} ${null===(d=this.order)||void 0===d?void 0:d.user.lastName}\n${r.comment}`;this._notificationService.sendMentionToUsers(f,v)}}}}),this.toMention=[],this.commentForm.reset()}isCurrentUser(e){const r=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));return!(!r||(null==e?void 0:e.id)!==r.id)}onItemSelected(e,r){}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ye),t.Y36(ge),t.Y36(_e),t.Y36(Je._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-order-chat"]],viewQuery:function(e,r){if(1&e&&t.Gf(Ti,5),2&e){let s;t.iGM(s=t.CRH())&&(r.commentBox=s.first)}},inputs:{order:"order"},decls:20,vars:15,consts:[[1,"mt-8","py-4","border-t","border-opacity-25","border-serapion-grey-100","border-dashed"],[1,"text-xs","font-thin","uppercase","text-serapion-grey-200","dark:text-serapion-grey-100"],[1,"mb-4","flex","flex-col","text-xs","h-40","overflow-y-auto","space-y-4"],["commentBox",""],["class","flex flex-row justify-start items-start space-x-4 h-full",4,"ngFor","ngForOf"],[1,"pt-4","flex","flex-row","justify-between","items-center"],[1,"flex","flex-col","lg:flex-row","group","relative","text-serapion-grey-100","justify-between","text-xs","flex-1",3,"formGroup","ngSubmit"],[1,"flex-1","w-full","lg:w-2/4","mr-2"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],[1,"w-6","text-right","mr-4","text-serapion-grey-100","cursor-pointer",3,"for"],[1,"fas","fa-xs","fa-comment"],["type","text","placeholder","Your comment, try typing @...","autocomplete","off","name","comment","formControlName","comment",1,"mentions","flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"id","mention","mentionConfig","mentionListTemplate","itemSelected"],[1,"w-full","py-2","pt-4","lg:w-max","lg:py-0"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled","ngClass"],[1,"fas","fa-paper-plane","fa-xs","pr-1"],["mentionListTemplate",""],[1,"flex","flex-row","justify-start","items-start","space-x-4","h-full"],[1,"mt-2"],["referrerpolicy","no-referrer",1,"w-6","h-6","rounded-full",3,"src","alt","title"],[1,"flex-1","flex","flex-col","justify-start","items-start","space-y-1"],["class","font-normal text-xs text-serapion-grey-100",4,"ngIf"],[1,"flex","flex-row","justify-between","items-center","mr-36","xl:mr-24","space-x-2"],[1,"bg-serapion-blue-100","rounded-tl-sm","rounded-xl","p-4","pt-2","pl-2","dark:bg-serapion-black-100",3,"ngClass"],["class","fas fa-sm fa-trash text-serapion-grey-100 hover:text-serapion-grey-200 transition-all duration-300 dark:hover:text-serapion-white cursor-pointer",3,"click",4,"ngIf"],[1,"font-normal","text-xs","text-serapion-grey-100"],[1,"fas","fa-sm","fa-trash","text-serapion-grey-100","hover:text-serapion-grey-200","transition-all","duration-300","dark:hover:text-serapion-white","cursor-pointer",3,"click"],[1,"flex","flex-row","justify-start","items-center","space-x-2","py-1"],["alt","",1,"rounded-full","w-6","h-6",3,"ngClass","src"]],template:function(e,r){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2," Comments "),t.qZA(),t.qZA(),t.TgZ(3,"div",2,3),t.YNc(5,Vi,9,9,"div",4),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"form",6),t.NdJ("ngSubmit",function(){return r.onAddComment()}),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"label",9),t._UZ(11,"i",10),t.qZA(),t.TgZ(12,"input",11),t.NdJ("itemSelected",function(o){return r.onItemSelected(o,r.order.id)}),t.ALo(13,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",12),t.TgZ(15,"button",13),t._UZ(16,"i",14),t._uU(17," Send "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,ki,4,5,"ng-template",null,15,t.W1O)),2&e){const s=t.MAs(19);t.xp6(5),t.Q6J("ngForOf",r.messages),t.xp6(2),t.Q6J("formGroup",r.commentForm),t.xp6(3),t.MGl("for","comment-",null==r.order?null:r.order.id,""),t.xp6(2),t.MGl("id","comment-",null==r.order?null:r.order.id,""),t.Q6J("mention",t.lcZ(13,9,r.users$))("mentionConfig",t.DdM(11,Fi))("mentionListTemplate",s),t.xp6(3),t.Q6J("disabled",r.commentForm.invalid)("ngClass",t.WLB(12,Zi,!r.commentForm.invalid,r.commentForm.invalid))}},directives:[p.sg,Y,B,P,M,$,H,Ei,p.mk,p.O5],pipes:[p.Ov,p.uU],styles:["[_nghost-%COMP%]     mention-list .scrollable-menu{max-height:160px!important;z-index:50;--tw-bg-opacity: 1;background-color:rgba(238,245,250,var(--tw-bg-opacity))}.dark   [_nghost-%COMP%]     mention-list .scrollable-menu{--tw-bg-opacity: 1;background-color:rgba(30,33,34,var(--tw-bg-opacity))}[_nghost-%COMP%]     mention-list .mention-menu>li{cursor:pointer}[_nghost-%COMP%]     mention-list .mention-menu>li>a{z-index:50;font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgba(45,50,61,var(--tw-text-opacity))}.dark   [_nghost-%COMP%]     mention-list .mention-menu>li>a{--tw-text-opacity: 1;color:rgba(238,245,250,var(--tw-text-opacity))}[_nghost-%COMP%]     mention-list .mention-active>a{background-color:#5a8ed1!important}[_nghost-%COMP%]     mention-list .mention-active>a:after .dropdown-item a:hover:after{background-color:#5a8ed1!important}"]}),n})();const Ui=["cancelDialog"],Pi=["confirmDialog"];function Li(n,i){if(1&n&&(t.TgZ(0,"a",31),t.TgZ(1,"span",32),t._uU(2,"Check out restaurant menu"),t.qZA(),t.O4$(),t.TgZ(3,"svg",33),t._UZ(4,"path",34),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("href",e.restaurant.menu,t.LSH)}}function Gi(n,i){if(1&n&&(t.TgZ(0,"div",35),t._UZ(1,"i",36),t.TgZ(2,"p",4),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"date"),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(3),t.AsE(" ",t.lcZ(4,2,r.getOwnerFullName(e))," has opened the order @",t.xi3(5,4,e.openedAt,"shortTime")," ")}}function qi(n,i){if(1&n&&(t.TgZ(0,"div",37),t._UZ(1,"i",38),t.TgZ(2,"p",4),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(3),t.hij(" ",r.isOrderOrderer(e)?"You are ":t.lcZ(4,1,e.orderer.firstName+" "+e.orderer.lastName)+" is"," due to make the order ")}}function $i(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"form",39),t.NdJ("change",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().onOrderTypeChange(s)}),t.TgZ(1,"div",40),t.TgZ(2,"div",41),t.TgZ(3,"div",42),t._UZ(4,"input",43),t.TgZ(5,"label",44),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",45),t._UZ(8,"input",43),t.TgZ(9,"label",44),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().index,r=t.oxw();t.Q6J("formGroup",r.ordersForm),t.xp6(2),t.Q6J("formGroupName",e),t.xp6(2),t.s9C("id",r.orderType.DELIVERY+"-"+e),t.s9C("value",r.orderType.DELIVERY),t.xp6(1),t.s9C("for",r.orderType.DELIVERY+"-"+e),t.xp6(1),t.hij(" ",r.orderType.DELIVERY,""),t.xp6(2),t.s9C("id",r.orderType.TAKEAWAY+"-"+e),t.s9C("value",r.orderType.TAKEAWAY),t.xp6(1),t.s9C("for",r.orderType.TAKEAWAY+"-"+e),t.xp6(1),t.hij(" ",r.orderType.TAKEAWAY,"")}}function Bi(n,i){if(1&n&&(t.TgZ(0,"div",46),t._UZ(1,"i",47),t.TgZ(2,"p",4),t._uU(3),t.qZA(),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.type," ")}}function ji(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"button",49),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().sendArrivedCall(s)}),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"path",51),t.qZA(),t.qZA(),t.kcU(),t.TgZ(4,"p",4),t._uU(5),t.ALo(6,"date"),t.qZA(),t.qZA()}if(2&n){const e=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.MGl("title","Food Arrived ",null==e||null==e.restaurant?null:e.restaurant.name,""),t.xp6(4),t.hij(" ",((null==e?null:e.type)===r.orderType.DELIVERY?"Arrives at ":"Departure at ")+t.xi3(6,2,null==e?null:e.arrivalTime,"shortTime")," ")}}function Yi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",52),t.TgZ(1,"div",53),t.TgZ(2,"span",54),t._uU(3,"Details"),t.qZA(),t.TgZ(4,"button",55),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().sendLastCall(s)}),t.O4$(),t.TgZ(5,"svg",56),t._UZ(6,"path",51),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(7,"p",57),t.TgZ(8,"span",58),t._uU(9),t.qZA(),t._uU(10,", you have to finish this order, add arrival time! "),t.qZA(),t.TgZ(11,"div",59),t.TgZ(12,"div",60),t.TgZ(13,"label",61),t._UZ(14,"i",62),t.qZA(),t._UZ(15,"input",63),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw(),r=e.$implicit,s=e.index,o=t.oxw();t.xp6(4),t.MGl("title","Last call ",null==r||null==r.restaurant?null:r.restaurant.name,""),t.xp6(5),t.Oqu(null==r.orderer?null:r.orderer.firstName),t.xp6(4),t.MGl("for","order-time-",null==r?null:r.id,""),t.xp6(2),t.MGl("id","order-time-",null==r?null:r.id,""),t.Q6J("formControl",o.orderArrivalArr.at(s)),t.uIk("disabled",(null==r?null:r.status)===o.orderStatus.INACTIVE?"":null)}}const Hi=function(n,i){return{"btn-primary":n,"btn-disabled":i}};function Ji(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().confirmOrder(s)}),t._UZ(1,"i",65),t._uU(2," Order "),t.qZA()}if(2&n){const e=t.oxw(),r=e.$implicit,s=e.index,o=t.oxw();t.Q6J("ngClass",t.WLB(2,Hi,o.isOrderOrderer(r)&&r.status===o.orderStatus.ACTIVE&&!o.orderArrivalArr.at(s).invalid,o.orderArrivalArr.at(s).invalid))("disabled",o.orderArrivalArr.at(s).invalid)}}const Qi=function(n,i){return{"btn-secondary":n,"btn-disabled":i}};function zi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().closeRestaurant(s)}),t._UZ(1,"i",67),t._uU(2," Close "),t.qZA()}if(2&n){const e=t.oxw().$implicit,r=t.oxw();t.Q6J("ngClass",t.WLB(2,Qi,r.isOrderOwner(e)||e.status===r.orderStatus.INACTIVE,!r.isOrderOwner(e)&&e.status===r.orderStatus.ACTIVE))("disabled",!r.isOrderOwner(e)&&e.status===r.orderStatus.ACTIVE)}}function Wi(n,i){if(1&n&&(t.TgZ(0,"li",68),t.TgZ(1,"div",69),t._uU(2),t.qZA(),t.TgZ(3,"div",70),t.TgZ(4,"p",71),t._uU(5),t.qZA(),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij(" ",null==e.orderedItems?null:e.orderedItems.length,"x ")}}function Ki(n,i){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"div"),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"div"),t._uU(6),t.qZA(),t.YNc(7,Li,5,1,"a",6),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"i",8),t.TgZ(10,"span",9),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"div",10),t._UZ(13,"i",11),t.TgZ(14,"p",4),t._uU(15),t.qZA(),t.qZA(),t.YNc(16,Gi,6,7,"div",12),t.YNc(17,qi,5,3,"div",13),t.TgZ(18,"div",14),t.YNc(19,$i,11,10,"form",15),t.YNc(20,Bi,4,1,"div",16),t.qZA(),t.YNc(21,ji,7,5,"div",17),t.qZA(),t.qZA(),t._UZ(22,"app-order-items",18,19),t._UZ(24,"app-order-chat",18),t.YNc(25,Yi,16,6,"div",20),t.TgZ(26,"div",21),t.YNc(27,Ji,3,5,"button",22),t.YNc(28,zi,3,5,"button",23),t.qZA(),t.qZA(),t.TgZ(29,"app-modal",24,25),t.TgZ(31,"div",26),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"app-modal",24,27),t.TgZ(35,"div",26),t._uU(36),t.qZA(),t.TgZ(37,"div",28),t.TgZ(38,"ul",29),t.YNc(39,Wi,6,2,"li",30),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){const e=i.$implicit,r=t.oxw();t.xp6(1),t.Gre("rounded-md bg-serapion-white p-4 z-10 lg:transform",e.status===r.orderStatus.ACTIVE?"border-serapion-green":"border-serapion-purple"," border-t-0 lg:hover:scale-102 dark:bg-serapion-black-200"),t.xp6(4),t.Gre("",e.status===r.orderStatus.ACTIVE?"bg-serapion-green":"bg-serapion-purple","\n              rounded-md px-6 py-1 font-normal tracking-widest uppercase text-serapion-grey-200"),t.xp6(1),t.hij(" ",e.status===r.orderStatus.ACTIVE?"active":"finished"," "),t.xp6(1),t.Q6J("ngIf",e.restaurant.menu),t.xp6(4),t.hij(" ",e.restaurant.name," "),t.xp6(4),t.hij(" ",e.restaurant.phoneNumber?e.restaurant.phoneNumber:"Phone info not available"," "),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.status)!==r.orderStatus.INACTIVE),t.xp6(1),t.Q6J("ngIf",e.orderer&&(null==e?null:e.status)===r.orderStatus.ACTIVE),t.xp6(2),t.Q6J("ngIf",r.isOrderOwner(e)&&(null==e?null:e.status)===r.orderStatus.ACTIVE),t.xp6(1),t.Q6J("ngIf",!r.isOrderOwner(e)||(null==e?null:e.status)===r.orderStatus.INACTIVE),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.status)===r.orderStatus.INACTIVE&&e.arrivalTime),t.xp6(1),t.Q6J("order",e),t.xp6(2),t.Q6J("order",e),t.xp6(1),t.Q6J("ngIf",r.isOrderOrderer(e)&&(null==e?null:e.status)===r.orderStatus.ACTIVE),t.xp6(2),t.Q6J("ngIf",e.status===r.orderStatus.ACTIVE),t.xp6(1),t.Q6J("ngIf",r.isOrderOwner(e)||e.status===r.orderStatus.INACTIVE),t.xp6(1),t.MGl("id","cancel-",e.id,""),t.xp6(3),t.hij(" Are you sure you want to close ",e.restaurant.name,"? "),t.xp6(1),t.MGl("id","confirm-",e.id,""),t.xp6(3),t.hij(" Are you sure you want to confirm ",e.restaurant.name,"? "),t.xp6(3),t.Q6J("ngForOf",e.orderItems)}}const Xi=function(n){return{"lg:grid-cols-3 2xl:grid-cols-4":n}};let es=(()=>{class n{constructor(e,r,s,o,a){this._orderService=e,this._userService=r,this._websocketService=s,this._notificationService=o,this._formBuilder=a,this.orders=[],this.users=[],this.orderStatus=E,this.orderType=X,this.subs=new R.Y,this.getOrderItems$=l=>this._orderService.getOrderItems(l),this._populateOrders=l=>{l&&(this.orders=l,this.orders.forEach(d=>{var u;(null===(u=this.ordersForm)||void 0===u?void 0:u.get("orders")).push(this._formBuilder.group({orderType:[{value:d.type,disabled:d.status===this.orderStatus.INACTIVE}]}));const h=new O(null,S.required);this.orderArrivalArr.push(h)}),this._setOrderers())}}ngOnInit(){this.ordersForm=this._formBuilder.group({orders:this._formBuilder.array([])}),this.orderArrivalArr=this._formBuilder.array([]),this.subs.sink=this._orderService.getAllOrders().subscribe(e=>{this.orders=e,this.orders.forEach(r=>{var s;(null===(s=this.ordersForm)||void 0===s?void 0:s.get("orders")).push(this._formBuilder.group({orderType:[{value:r.type,disabled:r.status===this.orderStatus.INACTIVE}]}));const o=new O(null,S.required);this.orderArrivalArr.push(o)}),this._setOrderers()}),this.subs.sink=this._websocketService.onRestaurantUpdated().pipe((0,y.w)(()=>this._orderService.getAllOrders())).subscribe(e=>this._populateOrders(e)),this.subs.sink=this._websocketService.onRestaurantDeleted().pipe((0,y.w)(()=>this._orderService.getAllOrders())).subscribe(e=>this._populateOrders(e)),this.subs.sink=this._websocketService.onOrderOpened().subscribe(e=>{var r;this.orders.push(e),(null===(r=this.ordersForm)||void 0===r?void 0:r.get("orders")).push(this._formBuilder.group({orderType:[{value:e.type,disabled:e.status===this.orderStatus.INACTIVE}]}));const s=new O(null,S.required);this.orderArrivalArr.push(s)}),this.subs.sink=this._websocketService.onOrderItemAdded().subscribe(e=>{this.orders.forEach(r=>{e.order.id&&r.id===e.order.id&&(r.orderItems?r.orderItems.push(e):r.orderItems=[e])}),this._setNewOrderer(e.order)}),this.subs.sink=this._websocketService.onCommentReceived().pipe((0,y.w)(({order:e})=>this._orderService.getOrderById(e.id))).subscribe(e=>{e&&this.orders.forEach(r=>{r.id===e.id&&(r=e)})}),this.subs.sink=this._websocketService.onOrderClosed().subscribe(e=>{var r;if(e){const s=this.orders.findIndex(o=>o.id===e.id);-1!==s&&(this.orders.splice(s,1),(null===(r=this.ordersForm)||void 0===r?void 0:r.get("orders")).removeAt(s),this.orderArrivalArr.removeAt(s))}}),this.subs.sink=this._websocketService.onRestaurantAdded().subscribe(e=>{var r;const s=this.orders.findIndex(o=>o.restaurant.id===e.id);-1!==s&&(this.orders.splice(s,1),(null===(r=this.ordersForm)||void 0===r?void 0:r.get("orders")).removeAt(s),this.orderArrivalArr.removeAt(s))}),this.subs.sink=this._websocketService.onOrderItemUserAdded().subscribe(e=>{this.orders.forEach(r=>{r.orderItems&&r.orderItems.forEach(s=>{s.id===e.id&&this._setNewOrderer(r)})})}),this.subs.sink=this._websocketService.onOrderItemUserDeleted().subscribe(e=>{this.orders.forEach(r=>{r.orderItems&&r.orderItems.forEach(s=>{e.orderItem&&e.orderItem.id===s.id&&this._setNewOrderer(r)})})}),this.subs.sink=this._websocketService.onOrderItemDeleted().subscribe(e=>{this.orders.forEach(r=>{r.orderItems&&r.orderItems.forEach(s=>{e&&+e===s.id&&this._setNewOrderer(r)})})}),this.subs.sink=this._websocketService.onOrderCompleted().pipe((0,y.w)(e=>{var r,s;return this.orders[this.orders.findIndex(a=>a.id===e.id)]=e,null===(s=(null===(r=this.ordersForm)||void 0===r?void 0:r.get("orders")).controls[this.orders.findIndex(a=>a.id===e.id)].get("orderType"))||void 0===s||s.disable(),this._userService.getById(e.orderer.id).pipe((0,y.w)(a=>(a.lastOrder=new Date,this._userService.updateOne(a))))})).subscribe(e=>{this.orders.forEach(r=>{r.status===this.orderStatus.ACTIVE&&r.orderItems&&r.orderItems.forEach(s=>{var o;s.orderedItems&&(null===(o=s.orderedItems)||void 0===o||o.forEach(a=>{a.user=a.user.id===e.id?e:a.user}))})}),this._setOrderers()}),this.subs.sink=this._websocketService.onOrderTypeUpdate().subscribe(e=>{this.orders=this.orders.map(r=>(r.id==e&&(r.type=r.type===this.orderType.DELIVERY?this.orderType.TAKEAWAY:this.orderType.DELIVERY),r))}),this.subs.sink=this._websocketService.onCleanUp().subscribe(()=>{})}ngAfterViewChecked(){}closeRestaurant({id:e}){this.subs.sink=this.cancelDialog.toggleModal(`cancel-${e}`).subscribe(r=>{e&&r&&(this.subs.sink=this._orderService.deleteOrderById(e).subscribe(s=>{s&&s.id&&(this.orders=this.orders.filter(o=>o.id!==s.id))}))})}confirmOrder(e){this.subs.sink=this._orderService.getOrderItems(e.id).pipe((0,y.w)(r=>(this.orders.forEach(s=>{s.id===e.id&&(s.orderItems=r)}),this.confirmDialog.toggleModal(`confirm-${e.id}`)))).subscribe(r=>{if(e&&r){e.status=E.INACTIVE;const s=new Date,o=this.orders.findIndex(a=>a.id==e.id);e.arrivalTime=new Date(s.toDateString()+" "+this.orderArrivalArr.at(o).value),this.subs.sink=this._orderService.getOrderItems(e.id).pipe((0,y.w)(a=>(e.orderItems=a,this._orderService.getComments(e.id)))).pipe((0,y.w)(a=>(e.comments=a,this._orderService.completeOrder(e.id,e)))).pipe((0,y.w)(()=>this._orderService.getOrderItems(e.id))).subscribe(a=>{let l=[];a.forEach(u=>{var h;null===(h=u.orderedItems)||void 0===h||h.forEach(f=>{var m;(null===(m=f.user)||void 0===m?void 0:m.subscriptionId)&&l.push(f.user.subscriptionId)})});const d=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(l=[...new Set(l)],d&&d.subscriptionId&&(l=l.filter(u=>u!=d.subscriptionId)),l.length&&e.arrivalTime&&e.type){const u=e.arrivalTime.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});this._notificationService.sendNotificationToUsers(l,`Order ${null==e?void 0:e.restaurant.name} completed, and ${e.type===this.orderType.DELIVERY?"it will arrive":"we depart"} @${u}!`)}})}})}ngOnDestroy(){this.subs.unsubscribe()}getOwnerFullName(e){var r,s;return`${null===(r=e.user)||void 0===r?void 0:r.firstName} ${null===(s=e.user)||void 0===s?void 0:s.lastName}`}getOwnerId(e){var r;return null===(r=e.user)||void 0===r?void 0:r.id}isOrderOwner(e){const r=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(r)return r.id===this.getOwnerId(e)}isOrderOrderer(e){var r;const s=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(s){const o=null===(r=this.orders.find(a=>a.id==e.id))||void 0===r?void 0:r.orderer;if(o)return o.id===s.id}}_setOrderers(){this.orders.forEach(e=>{e.status===E.ACTIVE&&(this.subs.sink=this._orderService.getOrderOrderer(e.id).subscribe(r=>{r?this.subs.sink=this._userService.getById(r.user_id).subscribe(s=>{e.orderer=s}):e.orderer=void 0}))})}_setNewOrderer(e){this.orders.forEach(r=>{r.status===E.ACTIVE&&r.id===e.id&&(this.subs.sink=this._orderService.getOrderOrderer(r.id).subscribe(s=>{s&&r.id===e.id?this.subs.sink=this._userService.getById(s.user_id).subscribe(o=>{r.orderer=o}):r.orderer=void 0}))})}onOrderTypeChange(e){var r,s;const o=e.id,a=this.orders.findIndex(u=>u.id==o),d=null===(s=(null===(r=this.ordersForm)||void 0===r?void 0:r.get("orders")).controls[a].get("orderType"))||void 0===s?void 0:s.value;this._orderService.updateTypeById(o,d)}sendLastCall(e){this.subs.sink=this._orderService.getOrderItems(e.id).subscribe(r=>{let s=[];r.forEach(a=>{var l;null===(l=a.orderedItems)||void 0===l||l.forEach(d=>{var u;(null===(u=d.user)||void 0===u?void 0:u.subscriptionId)&&s.push(d.user.subscriptionId)})});const o=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));s=[...new Set(s)],o&&o.subscriptionId&&(s=s.filter(a=>a!=o.subscriptionId)),s.length&&this._notificationService.sendNotificationToUsers(s,`Last call ${null==e?void 0:e.restaurant.name}!`)})}isSidebarCollapsed(){const{sidebar:e}=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_UI_PREFERENCES));return"collapsed"===e}sendArrivedCall(e){this.subs.sink=this._orderService.getOrderItems(e.id).subscribe(r=>{let s=[];r.forEach(a=>{var l;null===(l=a.orderedItems)||void 0===l||l.forEach(d=>{var u;(null===(u=d.user)||void 0===u?void 0:u.subscriptionId)&&s.push(d.user.subscriptionId)})});const o=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));s=[...new Set(s)],o&&o.subscriptionId&&(s=s.filter(a=>a!=o.subscriptionId)),s.length&&this._notificationService.sendNotificationToUsers(s,`Order arrived ${null==e?void 0:e.restaurant.name}!`)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ye),t.Y36(Z.K),t.Y36(ge),t.Y36(_e),t.Y36(mn))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-order-list"]],viewQuery:function(e,r){if(1&e&&(t.Gf(Ui,5),t.Gf(Pi,5)),2&e){let s;t.iGM(s=t.CRH())&&(r.cancelDialog=s.first),t.iGM(s=t.CRH())&&(r.confirmDialog=s.first)}},decls:2,vars:4,consts:[[1,"overflow-orders","p-4","lg:pt-8","grid","grid-cols-1","gap-2","lg:grid-cols-2","2xl:grid-cols-3","lg:gap-4","z-10","2xl:pt-12","bg-serapion-blue-200","bg-opacity-5","bg-hero","bg-cover","bg-no-repeat","dark:bg-opacity-95","bg-blend-lighten","shadow-md","dark:bg-serapion-black-100",3,"ngClass"],["class","place-self-strech",4,"ngFor","ngForOf"],[1,"place-self-strech"],[1,"flex","flex-row","items-start","justify-items-between","z-10"],[1,"flex-1"],[1,"text-xs","flex","flex-row","justify-between","items-center","space-x-6","w-full","py-1","px-1","rounded-md","bg-serapion-blue-100","bg-opacity-100","dark:bg-serapion-black-100"],["class","group flex-1 flex flex-row items-center justify-between text-serapion-grey-200 cursor-pointer dark:text-serapion-grey-100","target","_blank",3,"href",4,"ngIf"],[1,"flex","flex-row","space-x-2","items-center","mt-4"],[1,"fas","fa-store","pr-1"],[1,"font-thin","uppercase","text-lg","select-all"],[1,"pt-4","flex","flex-row","space-x-2","justify-between","items-center","text-xs","text-serapion-grey-200","dark:text-serapion-white"],[1,"fas","fa-xs","fa-phone","pr-1"],["class","pt-2 flex flex-row space-x-2 justify-between items-center text-xs text-serapion-grey-200 dark:text-serapion-grey-100",4,"ngIf"],["class","pt-2 flex flex-row space-x-2 justify-between items-center text-xs text-serapion-red font-normal",4,"ngIf"],[1,"text-xs","uppercase","text-serapion-grey-200","dark:text-serapion-grey-100"],[3,"formGroup","change",4,"ngIf"],["class","py-2 flex flex-row space-x-2 justify-between items-center text-xs font-thin text-serapion-grey-200 dark:text-serapion-grey-100",4,"ngIf"],["class","py-2 pt-0 flex flex-row space-x-2 justify-between items-center text-xs font-normal text-serapion-purple",4,"ngIf"],[3,"order"],["orderItems",""],["class","mt-8 py-4 border-t border-opacity-25 border-serapion-grey-100 border-dashed",4,"ngIf"],[1,"flex-grow","pt-8","flex","flex-row-reverse","justify-end","items-center"],["class","btn flex-1 ml-1",3,"ngClass","disabled","click",4,"ngIf"],["class","btn flex-1",3,"ngClass","disabled","click",4,"ngIf"],[3,"id"],["cancelDialog",""],[1,"uppercase","font-thin","text-lg"],["confirmDialog",""],[1,"mt-4"],["role","list",1,"divide-y","divide-serapion-grey-100","text-xs","text-serapion-grey-100"],["class","flex flex-row justify-between items-center py-4 first:pt-0 last:pb-0",4,"ngFor","ngForOf"],["target","_blank",1,"group","flex-1","flex","flex-row","items-center","justify-between","text-serapion-grey-200","cursor-pointer","dark:text-serapion-grey-100",3,"href"],[1,"group-hover:text-serapion-grey-100","dark:group-hover:text-serapion-white","transition-all"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","group-hover:text-serapion-grey-100","dark:group-hover:text-serapion-white","transition-all"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"pt-2","flex","flex-row","space-x-2","justify-between","items-center","text-xs","text-serapion-grey-200","dark:text-serapion-grey-100"],[1,"fas","fa-xs","fa-user","pr-1"],[1,"pt-2","flex","flex-row","space-x-2","justify-between","items-center","text-xs","text-serapion-red","font-normal"],[1,"fas","fa-xs","fa-car","pr-1"],[3,"formGroup","change"],["formArrayName","orders"],[3,"formGroupName"],[1,"flex","p-2","pt-3","pl-0","items-center"],["type","radio","name","orderType","formControlName","orderType",1,"w-3","h-3","text-serapion-blue-300","focus:text-serapion-blue-300","focus:ring-serapion-blue-300","mr-2","cursor-pointer",3,"id","value"],[1,"cursor-pointer",3,"for"],[1,"flex","p-2","pl-0","pt-0","items-center"],[1,"py-2","flex","flex-row","space-x-2","justify-between","items-center","text-xs","font-thin","text-serapion-grey-200","dark:text-serapion-grey-100"],[1,"fas","fa-xs","fa-hashtag","pr-1"],[1,"py-2","pt-0","flex","flex-row","space-x-2","justify-between","items-center","text-xs","font-normal","text-serapion-purple"],[1,"hover:text-serapion-yellow",3,"title","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3","w-3","animate-wiggle"],["d","M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"],[1,"mt-8","py-4","border-t","border-opacity-25","border-serapion-grey-100","border-dashed"],[1,"flex","flex-row","items-center","justify-between"],[1,"flex-1","text-xs","font-thin","uppercase","text-serapion-grey-100"],[1,"text-serapion-grey-100","hover:text-serapion-yellow",3,"title","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","animate-wiggle"],[1,"text-xs","text-serapion-grey-100","mt-2"],[1,"font-semibold"],[1,"flex","flex-row","justify-between","items-center","space-x-6","mt-2"],[1,"relative","flex-1","mt-2","flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],[1,"w-6","text-right","mr-4","text-serapion-grey-100","cursor-pointer",3,"for"],[1,"fas","fa-xs","fa-clock"],["type","time","name","orderArrivalTime","autocomplete","off",1,"flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"id","formControl"],[1,"btn","flex-1","ml-1",3,"ngClass","disabled","click"],[1,"fas","fa-check","pr-1"],[1,"btn","flex-1",3,"ngClass","disabled","click"],[1,"fas","fa-times","pr-1"],[1,"flex","flex-row","justify-between","items-center","py-4","first:pt-0","last:pb-0"],[1,"uppercase"],[1,""],[1,"text-sm","text-slate-500","truncate"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ki,40,25,"div",1),t.qZA()),2&e&&(t.Q6J("ngClass",t.VKq(2,Xi,r.isSidebarCollapsed())),t.xp6(1),t.Q6J("ngForOf",r.orders))},directives:[p.mk,p.sg,p.O5,ai,Ri,Kt,Y,B,P,fe,pe,Ge,M,$,H,$e],pipes:[p.rS,p.uU],styles:[".overflow-orders[_ngcontent-%COMP%]{overflow:auto;height:calc(100vh - 112px)}"]}),n})();function ts(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().openSidebar()}),t._UZ(1,"i",7),t.qZA()}}function rs(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"img",9),t.TgZ(2,"div",10),t.TgZ(3,"div",11),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"div",12),t._uU(7),t.qZA(),t.TgZ(8,"div",13),t.TgZ(9,"a",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().logout()}),t.O4$(),t.TgZ(10,"svg",15),t._UZ(11,"path",16),t.qZA(),t.kcU(),t.TgZ(12,"span",10),t._uU(13,"Sign out"),t.qZA(),t.qZA(),t.TgZ(14,"a",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeTheme()}),t._UZ(15,"i",18),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.s9C("src",e.user.photo,t.LSH),t.s9C("alt",e.user.firstName+" "+e.user.lastName+" Profile Picture"),t.s9C("title",e.user.firstName+" "+e.user.lastName),t.xp6(3),t.hij(" ",t.lcZ(5,5,e.user.firstName+" "+e.user.lastName)," "),t.xp6(3),t.hij(" ",e.user.email," ")}}let ns=(()=>{class n{constructor(e,r,s,o,a){this._userService=e,this._router=r,this._sidebarService=s,this._themeService=o,this._socialAuthService=a,this.isHidden$=this._sidebarService.isHidden$,this.user=this._userService.user}logout(){var e=this;return function(n){return function(){var i=this,e=arguments;return new Promise(function(r,s){var o=n.apply(i,e);function a(d){er(o,r,s,a,l,"next",d)}function l(d){er(o,r,s,a,l,"throw",d)}a(void 0)})}}(function*(){try{yield e._socialAuthService.signOut(!0)}catch(r){}finally{e._userService.removeUser(),yield e._router.navigate(["login"])}})()}openSidebar(){this._sidebarService.toggleSidebar()}changeTheme(){this._themeService.toggleTheme()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.K),t.Y36(ne.F0),t.Y36(Se),t.Y36(Xn.f),t.Y36(ei.xE))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-orders"]],decls:11,vars:4,consts:[[1,"sticky","top-0","p-4","flex","flex-row","justify-between","items-center","bg-serapion-white","font-thin","z-10","dark:bg-serapion-black-100","dark:bg-opacity-50","bg-opacity-50"],[1,"flex","flex-row","items-center","justify-between","space-x-4"],["class","hidden shadow-md lg:flex flex-row items-center justify-center bg-serapion-blue-100 dark:bg-serapion-black-100 bg-opacity-50 w-12 h-12 rounded-full cursor-pointer",3,"click",4,"ngIf"],[1,"tracking-widest","uppercase","text-xl"],[1,"text-sm","font-thin","text-serapion-grey-100"],["class","group border-serapion-grey-100 border-opacity-25 p-3 rounded-lg flex flex-row justify-between space-x-3 items-center",4,"ngIf"],[1,"hidden","shadow-md","lg:flex","flex-row","items-center","justify-center","bg-serapion-blue-100","dark:bg-serapion-black-100","bg-opacity-50","w-12","h-12","rounded-full","cursor-pointer",3,"click"],[1,"fas","fa-utensils","fa-md","text-serapion-grey-100","hover:text-serapion-grey-200","dark:hover:text-serapion-white","transition-all","duration-300"],[1,"group","border-serapion-grey-100","border-opacity-25","p-3","rounded-lg","flex","flex-row","justify-between","space-x-3","items-center"],["referrerpolicy","no-referrer",1,"w-12","h-12","rounded-full",3,"src","alt","title"],[1,"text-xs"],[1,"font-semibold","text-serapion-grey-200","dark:text-serapion-white"],[1,"text-serapion-grey-100"],[1,"flex","flex-row","justify-between","items-center","pt-2"],[1,"flex","flex-row","space-x-1","text-serapion-grey-100","hover:text-serapion-grey-200","items-center","cursor-pointer","dark:hover:text-serapion-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"text-serapion-grey-100","hover:text-serapion-grey-200","cursor-pointer","dark:hover:text-serapion-white",3,"click"],[1,"fas","fa-adjust"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,ts,2,0,"div",2),t.ALo(3,"async"),t.TgZ(4,"div"),t.TgZ(5,"div",3),t._uU(6,"Orders"),t.qZA(),t.TgZ(7,"span",4),t._uU(8,"Orders from you and your colleagues"),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,rs,16,7,"div",5),t.qZA(),t._UZ(10,"app-order-list")),2&e&&(t.xp6(2),t.Q6J("ngIf",!!t.lcZ(3,2,r.isHidden$)),t.xp6(7),t.Q6J("ngIf",r.user))},directives:[p.O5,es],pipes:[p.Ov,p.rS],styles:[".orders-hero[_ngcontent-%COMP%]{background-image:url(food-raw.72c399756f82f3b9.jpg);--tw-bg-opacity: 1;background-color:rgba(222,242,255,var(--tw-bg-opacity));background-size:cover;background-position:center;background-repeat:no-repeat;padding:11rem;background-blend-mode:darken;--tw-blur: var(--tw-empty, );--tw-brightness: var(--tw-empty, );--tw-contrast: var(--tw-empty, );--tw-grayscale: var(--tw-empty, );--tw-hue-rotate: var(--tw-empty, );--tw-invert: var(--tw-empty, );--tw-saturate: var(--tw-empty, );--tw-sepia: var(--tw-empty, );--tw-drop-shadow: var(--tw-empty, );filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);--tw-blur: blur(4px)}[_nghost-%COMP%]{overflow:hidden}"]}),n})();const is=function(n){return{"lg:hidden":n}};let ss=(()=>{class n{constructor(e,r){this._userService=e,this._sidebarService=r,this.subs=new R.Y,this.isHidden$=this._sidebarService.isHidden$}ngOnInit(){const e=this._userService.user,r=localStorage.getItem(g.$.SUBSCRIPTION_ID);r&&(this.subs.sink=this._userService.getAllUsers().pipe((0,y.w)(s=>{const o=s.find(a=>a.email===e.email);return o?(o.subscriptionId=r,this._userService.user=o,this._userService.updateOne(o)):s})).subscribe())}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Z.K),t.Y36(Se))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-landing"]],decls:6,vars:5,consts:[[1,"flex","flex-1","flex-col","w-screen","lg:flex-row","lg:h-screen","justify-center","text-base","overflow-hidden"],[1,"flex-auto","lg:w-1/3","bg-serapion-white","flex","flex-col","overflow-x-hidden","overflow-y-auto","transition-all","duration-300","dark:bg-serapion-black-200",3,"ngClass"],[1,"flex-auto","lg:w-2/3","bg-serapion-white","flex","flex-col","overflow-x-hidden","overflow-y-auto","dark:bg-serapion-black-200"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.ALo(2,"async"),t._UZ(3,"app-places"),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"app-orders"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",t.VKq(3,is,!!t.lcZ(2,1,r.isHidden$))))},directives:[p.mk,Wn,ns],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:flex}"]}),n})(),ur=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-place-form"]],decls:2,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"place-form works!"),t.qZA())},styles:[""]}),n})();const os=[{path:"",component:ss,canActivate:[pr]},{path:"restaurant/add",component:ur},{path:"restaurant/edit/:id",component:ur}];let as=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[ne.Bz.forChild(os)],ne.Bz]}),n})(),ls=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez]]}),n})(),us=(()=>{class n{constructor(e,r){this._notificationService=e,this._userService=r,this._notificationService.init(),this.subs=this._userService.userSubjectChange.subscribe(s=>{s&&this._notificationService.getSubscriptionUserId()})}ngOnDestroy(){this.subs.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(_e),t.LFG(Z.K))},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,as,pn,Ai,Ht,ls]]}),n})()}}]);