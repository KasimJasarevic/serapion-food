"use strict";var cs=Object.defineProperty,hs=Object.defineProperties,ps=Object.getOwnPropertyDescriptors,cn=Object.getOwnPropertySymbols,fs=Object.prototype.hasOwnProperty,ms=Object.prototype.propertyIsEnumerable,hn=(E,C,c)=>C in E?cs(E,C,{enumerable:!0,configurable:!0,writable:!0,value:c}):E[C]=c,P=(E,C)=>{for(var c in C||(C={}))fs.call(C,c)&&hn(E,c,C[c]);if(cn)for(var c of cn(C))ms.call(C,c)&&hn(E,c,C[c]);return E},ne=(E,C)=>hs(E,ps(C));(self.webpackChunkorder_app_redesign=self.webpackChunkorder_app_redesign||[]).push([[510],{2510:(E,C,c)=>{c.r(C),c.d(C,{OrderingModule:()=>us});var p=c(6019),re=c(439),pn=c(7091),g=c(3543),t=c(241),k=c(6821);let fn=(()=>{class r{constructor(e,n){this._router=e,this._userService=n,this._helperSerivce=new pn.N0}canActivate(e,n){const s=localStorage.getItem(g.$.FOOD_ORDERING_AUTH_TOKEN);return s?!this._helperSerivce.isTokenExpired(s)||(this._userService.removeUser(),this._router.navigate(["login"]),!1):(this._router.navigate(["login"]),!1)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(re.F0),t.LFG(k.K))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Z=c(4122),y=c(7878),L=c(9634),G=c(9978);let Se=(()=>{class r{constructor(){const e=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_UI_PREFERENCES));e?this._isHidden$=new G.X(e.sidebar===L.t.COLLAPSED):(this._isHidden$=new G.X(!1),localStorage.setItem(g.$.FOOD_ORDERING_UI_PREFERENCES,JSON.stringify({theme:L.B.DARK,sidebar:L.t.EXPANDED})))}get isHidden$(){return this._isHidden$.asObservable()}toggleSidebar(){const e=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_UI_PREFERENCES));e.sidebar===L.t.COLLAPSED?(this._isHidden$.next(!1),e.sidebar=L.t.EXPANDED,localStorage.setItem(g.$.FOOD_ORDERING_UI_PREFERENCES,JSON.stringify(e))):(this._isHidden$.next(!0),e.sidebar=L.t.COLLAPSED,localStorage.setItem(g.$.FOOD_ORDERING_UI_PREFERENCES,JSON.stringify(e)))}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var ze=c(7396);let Oe=(()=>{class r{constructor(){this.showModal$=new ze.x}modalOpen(e){this.showModal$.next(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var mn=c(6658),gn=c(9105),_n=c(8856),vn=c(5823),yn=c(5907),bn=c(9817),wn=c(3406),Cn=c(8919),We=c(2201);let Ke=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.Qsj),t.Y36(t.SBq))},r.\u0275dir=t.lG2({type:r}),r})(),R=(()=>{class r extends Ke{}return r.\u0275fac=function(){let i;return function(n){return(i||(i=t.n5z(r)))(n||r)}}(),r.\u0275dir=t.lG2({type:r,features:[t.qOj]}),r})();const A=new t.OlP("NgValueAccessor"),On={provide:A,useExisting:(0,t.Gpc)(()=>N),multi:!0},An=new t.OlP("CompositionEventMode");let N=(()=>{class r extends Ke{constructor(e,n,s){super(e,n),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=(0,p.q)()?(0,p.q)().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(An,8))},r.\u0275dir=t.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&t.NdJ("input",function(o){return n._handleInput(o.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(o){return n._compositionEnd(o.target.value)})},features:[t._Bn([On]),t.qOj]}),r})();function V(r){return null==r||0===r.length}function et(r){return null!=r&&"number"==typeof r.length}const w=new t.OlP("NgValidators"),I=new t.OlP("NgAsyncValidators"),Tn=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class S{static min(i){return r=i,i=>{if(V(i.value)||V(r))return null;const e=parseFloat(i.value);return!isNaN(e)&&e<r?{min:{min:r,actual:i.value}}:null};var r}static max(i){return r=i,i=>{if(V(i.value)||V(r))return null;const e=parseFloat(i.value);return!isNaN(e)&&e>r?{max:{max:r,actual:i.value}}:null};var r}static required(i){return V(i.value)?{required:!0}:null}static requiredTrue(i){return!0===i.value?null:{required:!0}}static email(i){return V((r=i).value)||Tn.test(r.value)?null:{email:!0};var r}static minLength(i){return r=i,i=>V(i.value)||!et(i.value)?null:i.value.length<r?{minlength:{requiredLength:r,actualLength:i.value.length}}:null;var r}static maxLength(i){return r=i,i=>et(i.value)&&i.value.length>r?{maxlength:{requiredLength:r,actualLength:i.value.length}}:null;var r}static pattern(i){return function(r){if(!r)return H;let i,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),i=new RegExp(e)):(e=r.toString(),i=r),n=>{if(V(n.value))return null;const s=n.value;return i.test(s)?null:{pattern:{requiredPattern:e,actualValue:s}}}}(i)}static nullValidator(i){return null}static compose(i){return ft(i)}static composeAsync(i){return mt(i)}}function H(r){return null}function ut(r){return null!=r}function dt(r){const i=(0,t.QGY)(r)?(0,mn.D)(r):r;return(0,t.CqO)(i),i}function ct(r){let i={};return r.forEach(e=>{i=null!=e?P(P({},i),e):i}),0===Object.keys(i).length?null:i}function ht(r,i){return i.map(e=>e(r))}function pt(r){return r.map(i=>function(r){return!r.validate}(i)?i:e=>i.validate(e))}function ft(r){if(!r)return null;const i=r.filter(ut);return 0==i.length?null:function(e){return ct(ht(e,i))}}function Ee(r){return null!=r?ft(pt(r)):null}function mt(r){if(!r)return null;const i=r.filter(ut);return 0==i.length?null:function(e){return function(...r){const i=(0,yn.jO)(r),{args:e,keys:n}=(0,_n.D)(r),s=new gn.y(o=>{const{length:a}=e;if(!a)return void o.complete();const l=new Array(a);let d=a,u=a;for(let h=0;h<a;h++){let f=!1;(0,vn.Xf)(e[h]).subscribe(new bn.Q(o,m=>{f||(f=!0,u--),l[h]=m},()=>d--,void 0,()=>{(!d||!f)&&(u||o.next(n?(0,Cn.n)(n,l):l),o.complete())}))}});return i?s.pipe((0,wn.Z)(i)):s}(ht(e,i).map(dt)).pipe((0,We.U)(ct))}}function Ae(r){return null!=r?mt(pt(r)):null}function gt(r,i){return null===r?[i]:Array.isArray(r)?[...r,i]:[r,i]}function _t(r){return r._rawValidators}function vt(r){return r._rawAsyncValidators}function Te(r){return r?Array.isArray(r)?r:[r]:[]}function ie(r,i){return Array.isArray(r)?r.includes(i):r===i}function yt(r,i){const e=Te(i);return Te(r).forEach(s=>{ie(e,s)||e.push(s)}),e}function bt(r,i){return Te(i).filter(e=>!ie(r,e))}class wt{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(i){this._rawValidators=i||[],this._composedValidatorFn=Ee(this._rawValidators)}_setAsyncValidators(i){this._rawAsyncValidators=i||[],this._composedAsyncValidatorFn=Ae(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(i){this._onDestroyCallbacks.push(i)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(i=>i()),this._onDestroyCallbacks=[]}reset(i){this.control&&this.control.reset(i)}hasError(i,e){return!!this.control&&this.control.hasError(i,e)}getError(i,e){return this.control?this.control.getError(i,e):null}}class x extends wt{get formDirective(){return null}get path(){return null}}class D extends wt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ct{constructor(i){this._cd=i}is(i){var e,n,s;return"submitted"===i?!!(null==(e=this._cd)?void 0:e.submitted):!!(null==(s=null==(n=this._cd)?void 0:n.control)?void 0:s[i])}}let q=(()=>{class r extends Ct{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(D,2))},r.\u0275dir=t.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&t.ekj("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[t.qOj]}),r})(),$=(()=>{class r extends Ct{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(x,10))},r.\u0275dir=t.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&t.ekj("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[t.qOj]}),r})();function oe(r,i){return[...i.path,r]}function J(r,i){Ve(r,i),i.valueAccessor.writeValue(r.value),function(r,i){i.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&xt(r,i)})}(r,i),function(r,i){const e=(n,s)=>{i.valueAccessor.writeValue(n),s&&i.viewToModelUpdate(n)};r.registerOnChange(e),i._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,i),function(r,i){i.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&xt(r,i),"submit"!==r.updateOn&&r.markAsTouched()})}(r,i),function(r,i){if(i.valueAccessor.setDisabledState){const e=n=>{i.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),i._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,i)}function ae(r,i,e=!0){const n=()=>{};i.valueAccessor&&(i.valueAccessor.registerOnChange(n),i.valueAccessor.registerOnTouched(n)),ue(r,i),r&&(i._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function le(r,i){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(i)})}function Ve(r,i){const e=_t(r);null!==i.validator?r.setValidators(gt(e,i.validator)):"function"==typeof e&&r.setValidators([e]);const n=vt(r);null!==i.asyncValidator?r.setAsyncValidators(gt(n,i.asyncValidator)):"function"==typeof n&&r.setAsyncValidators([n]);const s=()=>r.updateValueAndValidity();le(i._rawValidators,s),le(i._rawAsyncValidators,s)}function ue(r,i){let e=!1;if(null!==r){if(null!==i.validator){const s=_t(r);if(Array.isArray(s)&&s.length>0){const o=s.filter(a=>a!==i.validator);o.length!==s.length&&(e=!0,r.setValidators(o))}}if(null!==i.asyncValidator){const s=vt(r);if(Array.isArray(s)&&s.length>0){const o=s.filter(a=>a!==i.asyncValidator);o.length!==s.length&&(e=!0,r.setAsyncValidators(o))}}}const n=()=>{};return le(i._rawValidators,n),le(i._rawAsyncValidators,n),e}function xt(r,i){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),i.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function St(r,i){Ve(r,i)}function Ie(r,i){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(i,e.currentValue)}function Ot(r,i){r._syncPendingControls(),i.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function De(r,i){if(!i)return null;let e,n,s;return Array.isArray(i),i.forEach(o=>{o.constructor===N?e=o:function(r){return Object.getPrototypeOf(r.constructor)===R}(o)?n=o:s=o}),s||n||e||null}function de(r,i){const e=r.indexOf(i);e>-1&&r.splice(e,1)}const Q="VALID",ce="INVALID",B="PENDING",z="DISABLED";function Fe(r){return(Ze(r)?r.validators:r)||null}function Et(r){return Array.isArray(r)?Ee(r):r||null}function ke(r,i){return(Ze(i)?i.asyncValidators:r)||null}function At(r){return Array.isArray(r)?Ae(r):r||null}function Ze(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Re{constructor(i,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=i,this._rawAsyncValidators=e,this._composedValidatorFn=Et(this._rawValidators),this._composedAsyncValidatorFn=At(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(i){this._rawValidators=this._composedValidatorFn=i}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(i){this._rawAsyncValidators=this._composedAsyncValidatorFn=i}get parent(){return this._parent}get valid(){return this.status===Q}get invalid(){return this.status===ce}get pending(){return this.status==B}get disabled(){return this.status===z}get enabled(){return this.status!==z}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(i){this._rawValidators=i,this._composedValidatorFn=Et(i)}setAsyncValidators(i){this._rawAsyncValidators=i,this._composedAsyncValidatorFn=At(i)}addValidators(i){this.setValidators(yt(i,this._rawValidators))}addAsyncValidators(i){this.setAsyncValidators(yt(i,this._rawAsyncValidators))}removeValidators(i){this.setValidators(bt(i,this._rawValidators))}removeAsyncValidators(i){this.setAsyncValidators(bt(i,this._rawAsyncValidators))}hasValidator(i){return ie(this._rawValidators,i)}hasAsyncValidator(i){return ie(this._rawAsyncValidators,i)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(i={}){this.touched=!0,this._parent&&!i.onlySelf&&this._parent.markAsTouched(i)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(i=>i.markAllAsTouched())}markAsUntouched(i={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}markAsDirty(i={}){this.pristine=!1,this._parent&&!i.onlySelf&&this._parent.markAsDirty(i)}markAsPristine(i={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}markAsPending(i={}){this.status=B,!1!==i.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!i.onlySelf&&this._parent.markAsPending(i)}disable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=z,this.errors=null,this._forEachChild(n=>{n.disable(ne(P({},i),{onlySelf:!0}))}),this._updateValue(),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(P({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(i={}){const e=this._parentMarkedDirty(i.onlySelf);this.status=Q,this._forEachChild(n=>{n.enable(ne(P({},i),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent}),this._updateAncestors(ne(P({},i),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(i){this._parent&&!i.onlySelf&&(this._parent.updateValueAndValidity(i),i.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(i){this._parent=i}updateValueAndValidity(i={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Q||this.status===B)&&this._runAsyncValidator(i.emitEvent)),!1!==i.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!i.onlySelf&&this._parent.updateValueAndValidity(i)}_updateTreeValidity(i={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(i)),this.updateValueAndValidity({onlySelf:!0,emitEvent:i.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?z:Q}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(i){if(this.asyncValidator){this.status=B,this._hasOwnPendingAsyncValidator=!0;const e=dt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:i})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(i,e={}){this.errors=i,this._updateControlsErrors(!1!==e.emitEvent)}get(i){return function(r,i,e){if(null==i||(Array.isArray(i)||(i=i.split(".")),Array.isArray(i)&&0===i.length))return null;let n=r;return i.forEach(s=>{n=n instanceof F?n.controls.hasOwnProperty(s)?n.controls[s]:null:n instanceof Ue&&n.at(s)||null}),n}(this,i)}getError(i,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[i]:null}hasError(i,e){return!!this.getError(i,e)}get root(){let i=this;for(;i._parent;)i=i._parent;return i}_updateControlsErrors(i){this.status=this._calculateStatus(),i&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(i)}_initObservables(){this.valueChanges=new t.vpe,this.statusChanges=new t.vpe}_calculateStatus(){return this._allControlsDisabled()?z:this.errors?ce:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(B)?B:this._anyControlsHaveStatus(ce)?ce:Q}_anyControlsHaveStatus(i){return this._anyControls(e=>e.status===i)}_anyControlsDirty(){return this._anyControls(i=>i.dirty)}_anyControlsTouched(){return this._anyControls(i=>i.touched)}_updatePristine(i={}){this.pristine=!this._anyControlsDirty(),this._parent&&!i.onlySelf&&this._parent._updatePristine(i)}_updateTouched(i={}){this.touched=this._anyControlsTouched(),this._parent&&!i.onlySelf&&this._parent._updateTouched(i)}_isBoxedValue(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}_registerOnCollectionChange(i){this._onCollectionChange=i}_setUpdateStrategy(i){Ze(i)&&null!=i.updateOn&&(this._updateOn=i.updateOn)}_parentMarkedDirty(i){return!i&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class O extends Re{constructor(i=null,e,n){super(Fe(e),ke(n,e)),this._onChange=[],this._applyFormState(i),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(i,e={}){this.value=this._pendingValue=i,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(i,e={}){this.setValue(i,e)}reset(i=null,e={}){this._applyFormState(i),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(i){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(i){this._onChange.push(i)}_unregisterOnChange(i){de(this._onChange,i)}registerOnDisabledChange(i){this._onDisabledChange.push(i)}_unregisterOnDisabledChange(i){de(this._onDisabledChange,i)}_forEachChild(i){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(i){this._isBoxedValue(i)?(this.value=this._pendingValue=i.value,i.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=i}}class F extends Re{constructor(i,e,n){super(Fe(e),ke(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(i,e){return this.controls[i]?this.controls[i]:(this.controls[i]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(i,e,n={}){this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),delete this.controls[i],e&&this.registerControl(i,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(i){return this.controls.hasOwnProperty(i)&&this.controls[i].enabled}setValue(i,e={}){this._checkAllValuesPresent(i),Object.keys(i).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(Object.keys(i).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(i[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i={},e={}){this._forEachChild((n,s)=>{n.reset(i[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(i,e,n)=>(i[n]=e instanceof O?e.value:e.getRawValue(),i))}_syncPendingControls(){let i=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[i])throw new Error(`Cannot find form control with name: ${i}.`)}_forEachChild(i){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&i(n,e)})}_setUpControls(){this._forEachChild(i=>{i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(i){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&i(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(i,e,n)=>((e.enabled||this.disabled)&&(i[n]=e.value),i))}_reduceChildren(i,e){let n=i;return this._forEachChild((s,o)=>{n=e(n,s,o)}),n}_allControlsDisabled(){for(const i of Object.keys(this.controls))if(this.controls[i].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(i){this._forEachChild((e,n)=>{if(void 0===i[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ue extends Re{constructor(i,e,n){super(Fe(e),ke(n,e)),this.controls=i,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(i){return this.controls[i]}push(i,e={}){this.controls.push(i),this._registerControl(i),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(i,e,n={}){this.controls.splice(i,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(i,e={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(i,e,n={}){this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(i,e={}){this._checkAllValuesPresent(i),i.forEach((n,s)=>{this._throwIfControlMissing(s),this.at(s).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(i,e={}){null!=i&&(i.forEach((n,s)=>{this.at(s)&&this.at(s).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(i=[],e={}){this._forEachChild((n,s)=>{n.reset(i[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(i=>i instanceof O?i.value:i.getRawValue())}clear(i={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:i.emitEvent}))}_syncPendingControls(){let i=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return i&&this.updateValueAndValidity({onlySelf:!0}),i}_throwIfControlMissing(i){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(i))throw new Error(`Cannot find form control at index ${i}`)}_forEachChild(i){this.controls.forEach((e,n)=>{i(e,n)})}_updateValue(){this.value=this.controls.filter(i=>i.enabled||this.disabled).map(i=>i.value)}_anyControls(i){return this.controls.some(e=>e.enabled&&i(e))}_setUpControls(){this._forEachChild(i=>this._registerControl(i))}_checkAllValuesPresent(i){this._forEachChild((e,n)=>{if(void 0===i[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const i of this.controls)if(i.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(i){i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange)}}const Gn={provide:x,useExisting:(0,t.Gpc)(()=>he)},W=(()=>Promise.resolve(null))();let he=(()=>{class r extends x{constructor(e,n){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new t.vpe,this.form=new F({},Ee(e),Ae(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){W.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),J(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){W.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),de(this._directives,e)})}addFormGroup(e){W.then(()=>{const n=this._findContainer(e.path),s=new F({});St(s,e),n.registerControl(e.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){W.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){W.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Ot(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(w,10),t.Y36(I,10))},r.\u0275dir=t.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&t.NdJ("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[t._Bn([Gn]),t.qOj]}),r})(),Tt=(()=>{class r extends x{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return r.\u0275fac=function(){let i;return function(n){return(i||(i=t.n5z(r)))(n||r)}}(),r.\u0275dir=t.lG2({type:r,features:[t.qOj]}),r})();const $n={provide:D,useExisting:(0,t.Gpc)(()=>Pe)},Nt=(()=>Promise.resolve(null))();let Pe=(()=>{class r extends D{constructor(e,n,s,o){super(),this.control=new O,this._registered=!1,this.update=new t.vpe,this._parent=e,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=De(0,o)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Ie(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?oe(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){J(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Nt.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const n=e.isDisabled.currentValue,s=""===n||n&&"false"!==n;Nt.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(x,9),t.Y36(w,10),t.Y36(I,10),t.Y36(A,10))},r.\u0275dir=t.lG2({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[t._Bn([$n]),t.qOj,t.TTD]}),r})(),j=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=t.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})();const jn={provide:A,useExisting:(0,t.Gpc)(()=>Le),multi:!0};let It=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({}),r})(),Yn=(()=>{class r{constructor(){this._accessors=[]}add(e,n){this._accessors.push([e,n])}remove(e){for(let n=this._accessors.length-1;n>=0;--n)if(this._accessors[n][1]===e)return void this._accessors.splice(n,1)}select(e){this._accessors.forEach(n=>{this._isSameGroup(n,e)&&n[1]!==e&&n[1].fireUncheck(e.value)})}_isSameGroup(e,n){return!!e[0].control&&e[0]._parent===n._control._parent&&e[1].name===n.name}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:It}),r})(),Le=(()=>{class r extends R{constructor(e,n,s,o){super(e,n),this._registry=s,this._injector=o,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(D),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(e){this._state=e===this.value,this.setProperty("checked",this._state)}registerOnChange(e){this._fn=e,this.onChange=()=>{e(this.value),this._registry.select(this)}}fireUncheck(e){this.writeValue(e)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(Yn),t.Y36(t.zs3))},r.\u0275dir=t.lG2({type:r,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(e,n){1&e&&t.NdJ("change",function(){return n.onChange()})("blur",function(){return n.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[t._Bn([jn]),t.qOj]}),r})();const Ge=new t.OlP("NgModelWithFormControlWarning"),Jn={provide:D,useExisting:(0,t.Gpc)(()=>qe)};let qe=(()=>{class r extends D{constructor(e,n,s,o){super(),this._ngModelWarningConfig=o,this.update=new t.vpe,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=De(0,s)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const n=e.form.previousValue;n&&ae(n,this,!1),J(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Ie(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ae(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(t.Y36(w,10),t.Y36(I,10),t.Y36(A,10),t.Y36(Ge,8))},r.\u0275dir=t.lG2({type:r,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[t._Bn([Jn]),t.qOj,t.TTD]}),r})();const Qn={provide:x,useExisting:(0,t.Gpc)(()=>U)};let U=(()=>{class r extends x{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new t.vpe,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ue(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return J(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){ae(e.control||null,e,!1),de(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,Ot(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,s=this.form.get(e.path);n!==s&&(ae(n||null,e),s instanceof O&&(J(s,e),e.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);St(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function(r,i){return ue(r,i)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ve(this.form,this),this._oldForm&&ue(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(w,10),t.Y36(I,10))},r.\u0275dir=t.lG2({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&t.NdJ("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[t._Bn([Qn]),t.qOj,t.TTD]}),r})();const zn={provide:x,useExisting:(0,t.Gpc)(()=>pe)};let pe=(()=>{class r extends Tt{constructor(e,n,s){super(),this._parent=e,this._setValidators(n),this._setAsyncValidators(s)}_checkParentType(){Ft(this._parent)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(x,13),t.Y36(w,10),t.Y36(I,10))},r.\u0275dir=t.lG2({type:r,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[t._Bn([zn]),t.qOj]}),r})();const Wn={provide:x,useExisting:(0,t.Gpc)(()=>fe)};let fe=(()=>{class r extends x{constructor(e,n,s){super(),this._parent=e,this._setValidators(n),this._setAsyncValidators(s)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Ft(this._parent)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(x,13),t.Y36(w,10),t.Y36(I,10))},r.\u0275dir=t.lG2({type:r,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[t._Bn([Wn]),t.qOj]}),r})();function Ft(r){return!(r instanceof pe||r instanceof U||r instanceof fe)}const Kn={provide:D,useExisting:(0,t.Gpc)(()=>Y)};let Y=(()=>{class r extends D{constructor(e,n,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.update=new t.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=De(0,o)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Ie(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(t.Y36(x,13),t.Y36(w,10),t.Y36(I,10),t.Y36(A,10),t.Y36(Ge,8))},r.\u0275dir=t.lG2({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[t._Bn([Kn]),t.qOj,t.TTD]}),r})(),Yt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[It]]}),r})(),pr=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Yt]}),r})(),Ht=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Ge,useValue:e.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Yt]}),r})(),mr=(()=>{class r{group(e,n=null){const s=this._reduceControls(e);let l,o=null,a=null;return null!=n&&(function(r){return void 0!==r.asyncValidators||void 0!==r.validators||void 0!==r.updateOn}(n)?(o=null!=n.validators?n.validators:null,a=null!=n.asyncValidators?n.asyncValidators:null,l=null!=n.updateOn?n.updateOn:void 0):(o=null!=n.validator?n.validator:null,a=null!=n.asyncValidator?n.asyncValidator:null)),new F(s,{asyncValidators:a,updateOn:l,validators:o})}control(e,n,s){return new O(e,n,s)}array(e,n,s){const o=e.map(a=>this._createControl(a));return new Ue(o,n,s)}_reduceControls(e){const n={};return Object.keys(e).forEach(s=>{n[s]=this._createControl(e[s])}),n}_createControl(e){return e instanceof O||e instanceof F||e instanceof Ue?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:Ht}),r})();var K=(()=>{return(r=K||(K={})).TAKEAWAY="TAKEAWAY",r.DELIVERY="DELIVERY",K;var r})(),T=(()=>{return(r=T||(T={})).INACTIVE="INACTIVE",r.ACTIVE="ACTIVE",T;var r})(),_=c(1251),X=c(4522);let Jt=(()=>{class r{constructor(e){this._http=e,this._collapsedPlacesSub$=new G.X([]),this._collapsedPlaces$=this._collapsedPlacesSub$.asObservable(),this.collapsePlace=n=>{const s=this._collapsedPlacesSub$.value;s.push(n),this._collapsedPlacesSub$.next(s)},this.expandPlace=n=>{let s=this._collapsedPlacesSub$.value;s=s.filter(o=>o!==n),this._collapsedPlacesSub$.next(s)},this.togglePlace=n=>{let s=this._collapsedPlacesSub$.value;-1!==s.findIndex(a=>a===n)?s=s.filter(a=>a!==n):s.push(n),this._collapsedPlacesSub$.next(s)}}get collapsedPlaces$(){return this._collapsedPlaces$}addNewPlace(e){return this._http.post(_.N.api_url+"/restaurants",e)}getAllPlaces(){return this._http.get(`${_.N.api_url}/restaurants`)}updatePlace(e,n){return this._http.put(_.N.api_url+`/restaurants/${e}`,n)}getPlaceById(e){return this._http.get(`${_.N.api_url}/restaurants/${e}`)}deletePlace(e){return this._http.delete(`${_.N.api_url}/restaurants/${e}`)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(X.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var b=(()=>{return(r=b||(b={})).COMMENT_EVENT="commentEvent",r.RESTAURANT_NEW_EVENT="newRestaurantEvent",r.ORDER_COMPLETED_EVENT="orderCompletedEvent",r.ORDER_CLOSED_EVENT="orderClosedEvent",r.RESTAURANT_NEW_UPDATE_EVENT="newRestaurantUpdateEvent",r.RESTAURANT_DELETED_EVENT="deleteRestaurantEvent",r.ORDER_ITEM_EVENT="orderItemEvent",r.ORDER_ITEM_DELETE_EVENT="orderItemDeleteEvent",r.ORDER_ITEM_USER_EVENT="orderItemUserEvent",r.ORDER_ITEM_USER_DELETE_EVENT="deleteOrderItemUserEvent",r.ORDER_NEW_EVENT="orderNewEvent",r.ORDER_TYPE_EVENT="orderTypeUpdatedEvent",r.CLEAN_UP_EVENT="cleanUpEvent",r.COMMENT_DELETED="commentDeletedEvent",b;var r})(),gr=c(5900);let ge=(()=>{class r{constructor(e){this._socket=e}onCommentReceived(){return this._socket.fromEvent(b.COMMENT_EVENT)}onCommentDeleted(){return this._socket.fromEvent(b.COMMENT_DELETED)}onOrderItemAdded(){return this._socket.fromEvent(b.ORDER_ITEM_EVENT)}onOrderItemDeleted(){return this._socket.fromEvent(b.ORDER_ITEM_DELETE_EVENT)}onOrderItemUserAdded(){return this._socket.fromEvent(b.ORDER_ITEM_USER_EVENT)}onOrderItemUserDeleted(){return this._socket.fromEvent(b.ORDER_ITEM_USER_DELETE_EVENT)}onOrderCompleted(){return this._socket.fromEvent(b.ORDER_COMPLETED_EVENT)}onOrderClosed(){return this._socket.fromEvent(b.ORDER_CLOSED_EVENT)}onRestaurantAdded(){return this._socket.fromEvent(b.RESTAURANT_NEW_EVENT)}onRestaurantUpdated(){return this._socket.fromEvent(b.RESTAURANT_NEW_UPDATE_EVENT)}onRestaurantDeleted(){return this._socket.fromEvent(b.RESTAURANT_DELETED_EVENT)}onOrderOpened(){return this._socket.fromEvent(b.ORDER_NEW_EVENT)}onOrderTypeUpdate(){return this._socket.fromEvent(b.ORDER_TYPE_EVENT)}onCleanUp(){return this._socket.fromEvent(b.CLEAN_UP_EVENT)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(gr.sk))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),wr=(()=>{class r{constructor(){this.isOneSignalInitialized=!1,this.ngOneSignalFunctionQueue=[],this.injectScript=()=>{const e=document.createElement("script");e.id="onesignal-sdk",e.src="https://cdn.onesignal.com/sdks/OneSignalSDK.js",e.async=!0,document.head.appendChild(e)},this.doesOneSignalExist=()=>!!window.OneSignal,this.processQueuedOneSignalFunctions=()=>{this.ngOneSignalFunctionQueue.forEach(e=>{const{name:n,args:s,promiseResolver:o}=e;o?this[n](...s).then(a=>{o(a)}):window.OneSignal[n](...s)})},this.setupOneSignalIfMissing=()=>{this.doesOneSignalExist()||(window.OneSignal=window.OneSignal||[])}}init(e){return new Promise(n=>{if(this.isOneSignalInitialized)return;this.injectScript(),this.setupOneSignalIfMissing(),window.OneSignal.push(()=>{window.OneSignal.init(e)});const s=setTimeout(()=>{console.error("OneSignal is not setup correctly.")},3e4);window.OneSignal.push(()=>{clearTimeout(s),this.isOneSignalInitialized=!0,this.processQueuedOneSignalFunctions(),n()})})}on(e,n){this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.on(e,n)}):this.ngOneSignalFunctionQueue.push({name:"on",args:arguments})}off(e,n){this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.off(e,n)}):this.ngOneSignalFunctionQueue.push({name:"off",args:arguments})}once(e,n){this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.once(e,n)}):this.ngOneSignalFunctionQueue.push({name:"once",args:arguments})}isPushNotificationsEnabled(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.isPushNotificationsEnabled(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"isPushNotificationsEnabled",args:arguments,promiseResolver:n})})}showHttpPrompt(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showHttpPrompt(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showHttpPrompt",args:arguments,promiseResolver:n})})}registerForPushNotifications(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.registerForPushNotifications(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"registerForPushNotifications",args:arguments,promiseResolver:n})})}setDefaultNotificationUrl(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setDefaultNotificationUrl(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"setDefaultNotificationUrl",args:arguments,promiseResolver:n})})}setDefaultTitle(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setDefaultTitle(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"setDefaultTitle",args:arguments,promiseResolver:n})})}getTags(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getTags(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getTags",args:arguments,promiseResolver:n})})}sendTag(e,n,s){return new Promise((o,a)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.sendTag(e,n,s).then(l=>o(l)).catch(l=>a(l))}):this.ngOneSignalFunctionQueue.push({name:"sendTag",args:arguments,promiseResolver:o})})}sendTags(e,n){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.sendTags(e,n).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"sendTags",args:arguments,promiseResolver:s})})}deleteTag(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.deleteTag(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"deleteTag",args:arguments,promiseResolver:n})})}deleteTags(e,n){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.deleteTags(e,n).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"deleteTags",args:arguments,promiseResolver:s})})}addListenerForNotificationOpened(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.addListenerForNotificationOpened(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"addListenerForNotificationOpened",args:arguments,promiseResolver:n})})}setSubscription(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setSubscription(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"setSubscription",args:arguments,promiseResolver:n})})}showHttpPermissionRequest(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showHttpPermissionRequest(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showHttpPermissionRequest",args:arguments,promiseResolver:n})})}showNativePrompt(){return new Promise((e,n)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showNativePrompt().then(s=>e(s)).catch(s=>n(s))}):this.ngOneSignalFunctionQueue.push({name:"showNativePrompt",args:arguments,promiseResolver:e})})}showSlidedownPrompt(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showSlidedownPrompt(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showSlidedownPrompt",args:arguments,promiseResolver:n})})}showCategorySlidedown(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showCategorySlidedown(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showCategorySlidedown",args:arguments,promiseResolver:n})})}showSmsSlidedown(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showSmsSlidedown(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showSmsSlidedown",args:arguments,promiseResolver:n})})}showEmailSlidedown(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showEmailSlidedown(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showEmailSlidedown",args:arguments,promiseResolver:n})})}showSmsAndEmailSlidedown(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.showSmsAndEmailSlidedown(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"showSmsAndEmailSlidedown",args:arguments,promiseResolver:n})})}getNotificationPermission(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getNotificationPermission(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getNotificationPermission",args:arguments,promiseResolver:n})})}getUserId(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getUserId(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getUserId",args:arguments,promiseResolver:n})})}getSubscription(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getSubscription(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getSubscription",args:arguments,promiseResolver:n})})}setEmail(e,n){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setEmail(e,n).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"setEmail",args:arguments,promiseResolver:s})})}setSMSNumber(e,n){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setSMSNumber(e,n).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"setSMSNumber",args:arguments,promiseResolver:s})})}logoutEmail(){return new Promise((e,n)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.logoutEmail().then(s=>e(s)).catch(s=>n(s))}):this.ngOneSignalFunctionQueue.push({name:"logoutEmail",args:arguments,promiseResolver:e})})}logoutSMS(){return new Promise((e,n)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.logoutSMS().then(s=>e(s)).catch(s=>n(s))}):this.ngOneSignalFunctionQueue.push({name:"logoutSMS",args:arguments,promiseResolver:e})})}setExternalUserId(e,n){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.setExternalUserId(e,n).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"setExternalUserId",args:arguments,promiseResolver:s})})}removeExternalUserId(){return new Promise((e,n)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.removeExternalUserId().then(s=>e(s)).catch(s=>n(s))}):this.ngOneSignalFunctionQueue.push({name:"removeExternalUserId",args:arguments,promiseResolver:e})})}getExternalUserId(){return new Promise((e,n)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getExternalUserId().then(s=>e(s)).catch(s=>n(s))}):this.ngOneSignalFunctionQueue.push({name:"getExternalUserId",args:arguments,promiseResolver:e})})}provideUserConsent(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.provideUserConsent(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"provideUserConsent",args:arguments,promiseResolver:n})})}getEmailId(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getEmailId(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getEmailId",args:arguments,promiseResolver:n})})}getSMSId(e){return new Promise((n,s)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.getSMSId(e).then(o=>n(o)).catch(o=>s(o))}):this.ngOneSignalFunctionQueue.push({name:"getSMSId",args:arguments,promiseResolver:n})})}sendOutcome(e,n){return new Promise((s,o)=>{this.doesOneSignalExist()?window.OneSignal.push(()=>{window.OneSignal.sendOutcome(e,n).then(a=>s(a)).catch(a=>o(a))}):this.ngOneSignalFunctionQueue.push({name:"sendOutcome",args:arguments,promiseResolver:s})})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({factory:function(){return new r},token:r,providedIn:"root"}),r})(),_e=(()=>{class r{constructor(e,n,s){this._oneSignal=e,this._http=n,this._userService=s}init(){this._oneSignal.init({appId:_.N.notificationId}),this._oneSignal.on("subscriptionChange",()=>{this.getSubscriptionUserId()})}getSubscriptionUserId(){this._oneSignal.getUserId(e=>{if(e){localStorage.setItem(g.$.SUBSCRIPTION_ID,e);let n=this._userService.user;n&&n.subscriptionId!==e&&this._userService.updateSubscriptionId(n.id,e).subscribe()}})}sendOpenRestaurantMessage(e){const n=this.createContent(e+" is opened.");this.sendNotification(n)}sendOrderItemAddedMessage(e){const n=this.createContent(e);this.sendNotification(n)}sendCloseRestaurantMessage(e){const n=this.createContent(e+" is closed.");this.sendNotification(n)}sendLastCall(e){const n=this.createContent("Last call in "+e+" order.");this.sendNotification(n)}sendNotificationToUsers(e,n){const s=this.createContentForUsers(e,n);this.sendNotification(s)}sendMentionToUsers(e,n){const s=this.createContentForUsers(e,n);this.sendNotification(s)}createContent(e){return{app_id:_.N.notificationId,contents:{en:e},included_segments:["Active Users","Inactive Users"]}}getHeaders(){return(new X.WM).set("Content-Type","application/json; charset=utf-8").set("Authorization","Basic "+_.N.signal_one_api_key)}sendNotification(e){this._http.post("https://onesignal.com/api/v1/notifications",e,{headers:this.getHeaders()}).subscribe()}createContentForUsers(e,n){return{app_id:_.N.notificationId,contents:{en:n},include_player_ids:e}}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(wr),t.LFG(X.eN),t.LFG(k.K))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ye=(()=>{class r{constructor(e){this._http=e}getAllOrders(){return this._http.get(_.N.api_url+"/orders")}getOrderById(e){return this._http.get(_.N.api_url+`/orders/${e}`)}addNewOrder(e){return this._http.post(_.N.api_url+"/orders",e)}deleteOrderById(e){return this._http.delete(_.N.api_url+`/orders/order/${e}`)}deleteOrder(e){return this._http.delete(_.N.api_url+`/orders/${e}`)}getOrderItems(e){return this._http.get(_.N.api_url+`/order-items/order/${e}`)}getComments(e){return this._http.get(_.N.api_url+`/comments/order/${e}`)}addNewComment(e){return this._http.post(_.N.api_url+"/comments",e)}addNewOrderItem(e){return this._http.post(_.N.api_url+"/order-items",e)}addOrderItem(e){this._http.put(_.N.api_url+"/order-items",e).subscribe()}addOrderItemUser(e){var{id:n}=e,s=function(r,i){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&i.indexOf(n)<0&&(e[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(r);s<n.length;s++)i.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(e[n[s]]=r[n[s]])}return e}(e,["id"]);return this._http.post(_.N.api_url+`/order-items/${n}`,s)}removeOrderItemUser({itemId:e,userId:n}){const s={params:new X.LE({fromString:`_user=${n}&_item=${e}`})};this._http.delete(_.N.api_url+"/order-items",s).subscribe()}deleteOrderItem(e){this._http.delete(_.N.api_url+`/order-items/${e}`).subscribe()}getOrderOrderer(e){return this._http.get(_.N.api_url+`/order-items/orders/${e}`)}completeOrder(e,n){return this._http.put(_.N.api_url+`/orders/${e}`,n)}updateTypeById(e,n){return this._http.put(_.N.api_url+`/orders/type/${e}`,{type:n}).subscribe()}deleteMessageWithId(e){return this._http.delete(_.N.api_url+`/comments/${e}`)}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(X.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Or=c(3453);let Er=(()=>{class r{constructor(){this._showModalSub$=new G.X(""),this._resultSub$=new ze.x,this.yesModal=e=>{this._showModalSub$.value===e&&this._resultSub$.next(!0)},this.noModal=e=>{this._showModalSub$.value===e&&this._resultSub$.next(!1)},this.toggleModal=e=>{this._showModalSub$.next(""===this._showModalSub$.value?e:"")}}get showModal$(){return this._showModalSub$.asObservable()}get result$(){return this._resultSub$.asObservable()}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Ar(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.Hsn(3),t.TgZ(4,"div",5),t.TgZ(5,"button",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().yesModal()}),t._UZ(6,"i",7),t._uU(7," Yes "),t.qZA(),t.TgZ(8,"button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw().noModal()}),t._UZ(9,"i",9),t._uU(10," No "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Tr(r,i){1&r&&t._UZ(0,"div",10)}const Mr=["*"];let Kt=(()=>{class r{constructor(e){this._sharedModalService=e,this.isVisible$=this._sharedModalService.showModal$,this.actionResult$=this._sharedModalService.result$,this.yesModal=()=>{this._sharedModalService.yesModal(this.id),this._sharedModalService.toggleModal(this.id)},this.noModal=()=>{this._sharedModalService.noModal(this.id),this._sharedModalService.toggleModal(this.id)},this.toggleModal=n=>(this._sharedModalService.toggleModal(n),this.actionResult$.pipe((0,Or.q)(1)))}ngOnInit(){}ngOnDestroy(){}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Er))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-modal"]],inputs:{id:"id"},ngContentSelectors:Mr,decls:4,vars:6,consts:[["class","z-100 fixed inset-0 justify-center items-center flex",4,"ngIf"],["class","absolute backdrop-filter backdrop-blur-lg inset-0 bg-opacity-10 bg-serapion-blue-300 z-90",4,"ngIf"],[1,"z-100","fixed","inset-0","justify-center","items-center","flex"],[1,"relative","mx-auto","w-1/2","max-w-2xl"],[1,"bg-serapion-white","rounded-md","p-8","shadow-lg","flex","flex-col","dark:bg-serapion-black-200"],[1,"pt-8","flex","flex-row-reverse","justify-between","items-center"],["type","button",1,"btn","btn-primary","w-1/2","ml-1",3,"click"],[1,"fas","fa-check","pr-1"],["type","button",1,"btn","btn-secondary","w-1/2",3,"click"],[1,"fas","fa-times","pr-1"],[1,"absolute","backdrop-filter","backdrop-blur-lg","inset-0","bg-opacity-10","bg-serapion-blue-300","z-90"]],template:function(e,n){1&e&&(t.F$t(),t.YNc(0,Ar,11,0,"div",0),t.ALo(1,"async"),t.YNc(2,Tr,1,0,"div",1),t.ALo(3,"async")),2&e&&(t.Q6J("ngIf",t.lcZ(1,2,n.isVisible$)===n.id),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,n.isVisible$)===n.id))},directives:[p.O5],pipes:[p.Ov],styles:[""],encapsulation:2}),r})(),Nr=(()=>{class r{transform(e,n,s){return n&&e?e.filter(o=>-1!==o.name.toLowerCase().indexOf(n.toLowerCase())):e}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"filter",type:r,pure:!0}),r})();const Vr=["deleteDialog"],Ir=function(r,i,e){return{"btn-disabled":r,"btn-primary":i,"cursor-not-allowed":e}};function Dr(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",16),t.TgZ(1,"button",17),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().openRestaurant(s)}),t._UZ(2,"i",18),t._uU(3," Open "),t.qZA(),t.qZA()}if(2&r){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngClass",t.kEZ(2,Ir,n.hasActiveOrders(e),!n.hasActiveOrders(e),n.hasActiveOrders(e)))("disabled",n.hasActiveOrders(e))}}const Fr=function(r){return{"line-through":r}},Xt=function(r){return{"cursor-not-allowed":r}},kr=function(r){return{"hover:text-serapion-purple":r}},Zr=function(r){return{"hover:text-serapion-grey-200 dark:hover:text-serapion-white":r}},Rr=function(){return{"hover:text-serapion-grey-200 dark:hover:text-serapion-white":!0}},Ur=function(){return[]};function Pr(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().togglePlace(o.id)}),t.ALo(4,"uppercase"),t._uU(5),t.ALo(6,"slice"),t.qZA(),t.TgZ(7,"div",6),t.TgZ(8,"button",7),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().editRestaurant(o.id)}),t._UZ(9,"i",8),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().deletePlace(o.name)}),t._UZ(11,"i",9),t.qZA(),t.TgZ(12,"button",10),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().togglePlace(o.id)}),t._UZ(13,"i",11),t.qZA(),t.qZA(),t.qZA(),t.YNc(14,Dr,4,6,"div",12),t.ALo(15,"async"),t.qZA(),t.TgZ(16,"app-modal",13,14),t.TgZ(18,"div",15),t._uU(19),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit,n=t.oxw();t.xp6(3),t.s9C("title",t.lcZ(4,13,e.name)),t.Q6J("ngClass",t.VKq(21,Fr,n.hasActiveOrders(e))),t.xp6(2),t.hij(" ",e.name.length>20?t.Dn7(6,15,e.name,0,20)+"...":e.name," "),t.xp6(3),t.Q6J("ngClass",t.VKq(23,Xt,n.hasActiveOrders(e)))("disabled",n.hasActiveOrders(e)),t.xp6(1),t.Q6J("ngClass",t.VKq(25,kr,!n.hasActiveOrders(e))),t.xp6(1),t.Q6J("ngClass",t.VKq(27,Xt,n.hasActiveOrders(e)))("disabled",n.hasActiveOrders(e)),t.xp6(1),t.Q6J("ngClass",t.VKq(29,Zr,!n.hasActiveOrders(e))),t.xp6(2),t.Q6J("ngClass",t.DdM(31,Rr)),t.xp6(1),t.Q6J("ngIf",n.isExpanded(t.lcZ(15,19,n.collapsedPlaces$)||t.DdM(32,Ur),e.id)),t.xp6(2),t.MGl("id","delete-",e.name,""),t.xp6(3),t.hij(" Are you sure you want to delete ",e.name,"? ")}}let Lr=(()=>{class r{constructor(e,n,s,o,a,l){this._placeService=e,this._websocketService=n,this._notificationService=s,this._orderService=o,this._userService=a,this._modalService=l,this.filterStr="",this.collapsedPlaces$=this._placeService.collapsedPlaces$,this.updated=new Date,this.places=[],this.subs=new Z.Y,this.hasActiveOrders=({orders:d})=>!!(d&&d.length&&d.filter(h=>h.status===T.ACTIVE).map(h=>h.status).length),this.togglePlace=d=>{d&&this._placeService.togglePlace(d)},this.isExpanded=(d,u)=>!(!u||-1===d.findIndex(f=>f===u))}ngOnInit(){this.subs.sink=this._placeService.getAllPlaces().subscribe(e=>{this.places=e}),this.subs.sink=this._websocketService.onRestaurantAdded().subscribe(e=>{this.places.push(e),this.updated=new Date}),this.subs.sink=this._websocketService.onOrderOpened().pipe((0,y.w)(()=>this._placeService.getAllPlaces())).subscribe(e=>{this.places=e,this.updated=new Date}),this.subs.sink=this._websocketService.onOrderClosed().pipe((0,y.w)(()=>this._placeService.getAllPlaces())).subscribe(e=>{this.places=e,this.updated=new Date}),this.subs.sink=this._websocketService.onOrderCompleted().pipe((0,y.w)(()=>this._placeService.getAllPlaces())).subscribe(e=>{this.places=e,this.updated=new Date}),this.subs.sink=this._websocketService.onRestaurantDeleted().subscribe(e=>{const n=this.places.findIndex(s=>s.id===e.id);this.places.splice(n,1),this.updated=new Date}),this.subs.sink=this._websocketService.onRestaurantUpdated().subscribe(e=>{this.places=this.places.map(n=>(n.id==e.id&&(n=e),n)),this.updated=new Date})}ngOnDestroy(){this.subs.unsubscribe()}openRestaurant(e){const n=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));n&&(this.subs.sink=this._orderService.addNewOrder({restaurant:e.id,user:n.id,type:K.DELIVERY,status:T.ACTIVE}).pipe((0,y.w)(()=>this._userService.getAllUsers())).subscribe(o=>{if(o&&o.length){const a=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(a&&a.subscriptionId){const l=o.filter(({subscriptionId:d})=>d!==a.subscriptionId).map(({subscriptionId:d})=>d);l.length&&this._notificationService.sendNotificationToUsers(l,`Restaurant ${e.name} opened!`)}}}))}editRestaurant(e){this._modalService.modalOpen(e)}deletePlace(e){this.subs.sink=this.deleteDialog.toggleModal(`delete-${e}`).subscribe(n=>{n&&this._placeService.deletePlace(e).subscribe()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Jt),t.Y36(ge),t.Y36(_e),t.Y36(ye),t.Y36(k.K),t.Y36(Oe))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-place-list"]],viewQuery:function(e,n){if(1&e&&t.Gf(Vr,5),2&e){let s;t.iGM(s=t.CRH())&&(n.deleteDialog=s.first)}},inputs:{filterStr:"filterStr"},decls:4,vars:5,consts:[[1,"min-h-screen","p-4","z-10","lg:pt-8","2xl:pt-8","rounded-t-xl","bg-serapion-blue-100","shadow-md","dark:bg-serapion-black-100"],[1,"grid","grid-cols-2","gap-2","lg:grid-cols-2","lg:gap-4"],[4,"ngFor","ngForOf"],[1,"border-serapion-blue-300","px-2","py-4","bg-serapion-white","rounded-md","lg:transform","lg:hover:scale-102","lg:hover:shadow-lg","transition-all","duration-300","dark:bg-serapion-black-200"],[1,"flex","flex-row","justify-between","items-center","text-sm","font-thin"],[1,"uppercase","flex-1","mr-2","cursor-pointer",3,"title","ngClass","click"],[1,"flex","flex-row","space-x-2","text-serapion-grey-100","2xl:space-x-3","mr-1"],[3,"ngClass","disabled","click"],[1,"fas","fa-sm","fa-edit","transition-all","duration-300",3,"ngClass"],[1,"fas","fa-sm","fa-trash","transition-all","duration-300",3,"ngClass"],[3,"click"],[1,"fas","fa-sm","fa-compress-alt","transition-all","duration-300",3,"ngClass"],["class","flex pt-8 space-x-2 justify-center",4,"ngIf"],[3,"id"],["deleteDialog",""],[1,"uppercase","font-thin","text-lg"],[1,"flex","pt-8","space-x-2","justify-center"],[1,"btn","flex-1","mt-2",3,"ngClass","disabled","click"],[1,"fas","fa-sm","fa-external-link-alt","pr-1"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,Pr,20,33,"div",2),t.ALo(3,"filter"),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.Dn7(3,1,n.places,n.filterStr,n.updated)))},directives:[p.sg,p.mk,p.O5,Kt],pipes:[Nr,p.gd,p.OU,p.Ov],styles:[""]}),r})();var be=c(4793),ee=c(1680),He=c(2387);function Gr(r,i){1&r&&(t.TgZ(0,"p"),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Name is required! "),t.qZA())}function qr(r,i){1&r&&(t.TgZ(0,"p"),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Name must be at least 4 characters long. "),t.qZA())}function $r(r,i){1&r&&(t.TgZ(0,"p"),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Name must be less than 140 characters. "),t.qZA())}function Br(r,i){if(1&r&&(t.TgZ(0,"div",25),t.YNc(1,Gr,4,0,"p",26),t.YNc(2,qr,4,0,"p",26),t.YNc(3,$r,4,0,"p",26),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.name.errors?null:e.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.name.errors?null:e.name.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.name.errors?null:e.name.errors.maxlength)}}function jr(r,i){1&r&&(t.TgZ(0,"div",25),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," URL is invalid! "),t.qZA())}function Yr(r,i){1&r&&(t.TgZ(0,"div",25),t.TgZ(1,"span",27),t._uU(2,"*"),t.qZA(),t._uU(3," Phone number is invalid! "),t.qZA())}const Hr=function(r,i){return{"btn-primary":r,"btn-disabled":i}};function Jr(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",2),t.TgZ(1,"div",3),t.TgZ(2,"div",4),t.TgZ(3,"div",5),t._uU(4),t.qZA(),t.TgZ(5,"form",6),t.NdJ("ngSubmit",function(){return t.CHM(e),t.oxw().onSubmit()}),t.TgZ(6,"div",7),t.YNc(7,Br,4,3,"div",8),t.TgZ(8,"div",9),t.TgZ(9,"label",10),t._UZ(10,"i",11),t.qZA(),t._UZ(11,"input",12),t.qZA(),t.qZA(),t.TgZ(12,"div",13),t.YNc(13,jr,4,0,"div",8),t.TgZ(14,"div",9),t.TgZ(15,"label",14),t._UZ(16,"i",15),t.qZA(),t._UZ(17,"input",16),t.qZA(),t.qZA(),t.TgZ(18,"div",13),t.YNc(19,Yr,4,0,"div",8),t.TgZ(20,"div",9),t.TgZ(21,"label",17),t._UZ(22,"i",18),t.qZA(),t._UZ(23,"input",19),t.qZA(),t.qZA(),t.TgZ(24,"div",20),t.TgZ(25,"button",21),t._UZ(26,"i",22),t._uU(27),t.qZA(),t.TgZ(28,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeModal()}),t._UZ(29,"i",24),t._uU(30," Close "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.xp6(4),t.hij(" ",e.place?"Edit "+e.place.name:"New Restaurant"," "),t.xp6(1),t.Q6J("formGroup",e.placeForm),t.xp6(2),t.Q6J("ngIf",e.name.invalid&&(e.name.dirty||e.name.touched)),t.xp6(6),t.Q6J("ngIf",(null==e.menu.errors?null:e.menu.errors.pattern)&&(e.menu.dirty||e.menu.touched)),t.xp6(6),t.Q6J("ngIf",(null==e.phone.errors?null:e.phone.errors.pattern)&&(e.phone.dirty||e.phone.touched)),t.xp6(6),t.Q6J("ngClass",t.WLB(8,Hr,!e.placeForm.invalid,e.placeForm.invalid))("disabled",e.placeForm.invalid),t.xp6(2),t.hij(" ",e.place?"Save":"Add"," ")}}function Qr(r,i){1&r&&t._UZ(0,"div",28)}let zr=(()=>{class r{constructor(e,n,s){this._modalService=e,this._placeService=n,this._toastr=s,this.subs=new Z.Y,this.showModal=!1,this.placeForm=new F({name:new O(null,[S.required,S.minLength(2),S.maxLength(140)]),phone:new O(null,S.pattern("^\\d{3}\\s\\d{3,4}\\s\\d{3,4}$")),menu:new O(null,S.pattern("^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\//)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$"))})}get name(){return this.placeForm.get("name")}get phone(){return this.placeForm.get("phone")}get menu(){return this.placeForm.get("menu")}closeModal(){this.place=void 0,this.placeForm.reset(),this.showModal=!1}onSubmit(){var e;const n=Object.assign({phoneNumber:null===(e=this.placeForm.get("phone"))||void 0===e?void 0:e.value},this.placeForm.value);this.subs.sink=this.place?this._placeService.updatePlace(this.place.id,n).pipe((0,be.K)(o=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,ee.of)(void 0)))).subscribe():this._placeService.addNewPlace(n).pipe((0,be.K)(s=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,ee.of)(void 0)))).subscribe(),this.closeModal()}ngOnInit(){this.subs.sink=this._modalService.showModal$.subscribe(e=>{this.showModal=!0,e&&this._placeService.getPlaceById(e).subscribe(n=>{this.place=n,this.placeForm.patchValue({name:n.name,menu:n.menu,phone:n.phoneNumber})})})}ngAfterViewInit(){}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Oe),t.Y36(Jt),t.Y36(He._W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-place-modal"]],decls:2,vars:2,consts:[["class","z-50 fixed inset-0 flex justify-center items-center",4,"ngIf"],["class","absolute backdrop-filter backdrop-blur-lg z-40 inset-0 bg-opacity-10 bg-serapion-blue-300",4,"ngIf"],[1,"z-50","fixed","inset-0","flex","justify-center","items-center"],[1,"relative","mx-auto","w-1/2","max-w-2xl"],[1,"bg-serapion-white","rounded-md","p-8","shadow-lg","flex","flex-col","dark:bg-serapion-black-200"],[1,"text-lg","font-thin","uppercase"],[1,"pt-4",3,"formGroup","ngSubmit"],[1,"w-full"],["class","text-xs text-serapion-purple pb-2",4,"ngIf"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],["for","name",1,"w-8","text-right","text-serapion-grey-100","mr-6"],[1,"fas","fa-md","fa-store"],["type","text","id","name","placeholder","e.g. Mozaik","autocomplete","off","name","name","formControlName","name",1,"flex-1","p-2","pl-0","text-md","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0"],[1,"w-full","mt-8"],["for","menu",1,"w-8","text-right","mr-6","text-serapion-grey-100"],[1,"fas","fa-md","fa-globe"],["type","text","id","menu","placeholder","e.g. https://www.google.com/","autocomplete","off","name","menu","formControlName","menu",1,"select-all","flex-1","p-2","pl-0","text-md","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0"],["for","phone",1,"w-8","text-right","mr-6","text-serapion-grey-100"],[1,"fas","fa-md","fa-phone"],["type","text","id","phone","placeholder","e.g. 062 225 883","autocomplete","off","name","phone","formControlName","phone",1,"select-all","flex-1","p-2","pl-0","text-md","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0"],[1,"pt-8","flex","flex-row-reverse","justify-between","items-center"],["type","submit",1,"btn","w-1/2","ml-1",3,"ngClass","disabled"],[1,"fas","fa-check","pr-1"],["type","button",1,"btn","btn-secondary","w-1/2",3,"click"],[1,"fas","fa-times","pr-1"],[1,"text-xs","text-serapion-purple","pb-2"],[4,"ngIf"],[1,"font-semibold"],[1,"absolute","backdrop-filter","backdrop-blur-lg","z-40","inset-0","bg-opacity-10","bg-serapion-blue-300"]],template:function(e,n){1&e&&(t.YNc(0,Jr,31,11,"div",0),t.YNc(1,Qr,1,0,"div",1)),2&e&&(t.Q6J("ngIf",n.showModal),t.xp6(1),t.Q6J("ngIf",n.showModal))},directives:[p.O5,j,$,U,N,q,Y,p.mk],styles:[""]}),r})(),Wr=(()=>{class r{constructor(e,n){this._modalService=e,this._sidebarService=n,this.filterInput="",this.showModal=!1,this.subs=new Z.Y}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}openPlacesDialog(){this._modalService.modalOpen()}hideSidebar(){this._sidebarService.toggleSidebar()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(Oe),t.Y36(Se))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-places"]],decls:21,vars:2,consts:[[1,"sticky","top-0","z-40","bg-serapion-white","dark:bg-serapion-black-200","dark:bg-opacity-95","bg-opacity-95"],[1,"flex","flex-row","items-center","p-4","z-50"],[1,"flex-1"],[1,"uppercase","font-thin","text-xl","tracking-widest"],[1,"text-sm","text-serapion-grey-100","font-thin"],[1,"flex","flex-row","space-x-2","justify-between","items-center"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fas","fa-plus","fa-xs","pr-1"],[1,"hidden","shadow-md","lg:flex","flex-row","items-center","justify-center","bg-serapion-blue-100","dark:bg-serapion-black-100","bg-opacity-50","w-12","h-12","rounded-full","cursor-pointer",3,"click"],[1,"fas","fa-compress-alt","fa-md","text-serapion-grey-100","hover:text-serapion-grey-200","dark:hover:text-serapion-white","transition-all","duration-300"],[1,"pb-6","px-4","z-50"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],["for","filter",1,"w-8","text-right","mr-4","text-serapion-grey-100"],[1,"fas","fa-xs","fa-search"],["type","text","id","filter","placeholder","Restaurant name...","autocomplete","off","name","filter",1,"flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"ngModel","ngModelChange"],[3,"filterStr"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4,"Restaurants"),t.qZA(),t.TgZ(5,"div",4),t._uU(6," Choose from local restaurants "),t.qZA(),t.qZA(),t.TgZ(7,"div",5),t.TgZ(8,"div",6),t.NdJ("click",function(){return n.openPlacesDialog()}),t._UZ(9,"i",7),t._uU(10," New "),t.qZA(),t.TgZ(11,"div",8),t.NdJ("click",function(){return n.hideSidebar()}),t._UZ(12,"i",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"form"),t.TgZ(15,"div",11),t.TgZ(16,"label",12),t._UZ(17,"i",13),t.qZA(),t.TgZ(18,"input",14),t.NdJ("ngModelChange",function(o){return n.filterInput=o}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(19,"app-place-list",15),t._UZ(20,"app-place-modal")),2&e&&(t.xp6(18),t.Q6J("ngModel",n.filterInput),t.xp6(1),t.Q6J("filterStr",n.filterInput))},directives:[j,$,he,N,q,Pe,Lr,zr],styles:[".places-hero[_ngcontent-%COMP%]{background-image:url(places-raw.01abdea7d427bd8b.jpg);--tw-bg-opacity: 1;background-color:rgba(222,242,255,var(--tw-bg-opacity));background-size:cover;background-position:center;background-repeat:no-repeat;padding:10rem;background-blend-mode:darken;--tw-blur: var(--tw-empty, );--tw-brightness: var(--tw-empty, );--tw-contrast: var(--tw-empty, );--tw-grayscale: var(--tw-empty, );--tw-hue-rotate: var(--tw-empty, );--tw-invert: var(--tw-empty, );--tw-saturate: var(--tw-empty, );--tw-sepia: var(--tw-empty, );--tw-drop-shadow: var(--tw-empty, );filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);--tw-blur: blur(4px)}"]}),r})();function en(r,i,e,n,s,o,a){try{var l=r[o](a),d=l.value}catch(u){return void e(u)}l.done?i(d):Promise.resolve(d).then(n,s)}var Xr=c(5337),ei=c(9225);let ti=(()=>{class r{transform(e,n){return e&&e.filter((s,o,a)=>a.findIndex(l=>l.user.id===s.user.id)===o)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275pipe=t.Yjl({name:"uniqueFilter",type:r,pure:!0}),r})();function ni(r,i){if(1&r&&t._UZ(0,"img",21),2&r){const e=i.$implicit;t.s9C("src",e.user.photo,t.LSH),t.s9C("alt",e.user.firstName+" "+e.user.lastName+" Profile Picture"),t.s9C("title",e.user.firstName+" "+e.user.lastName)}}const ri=function(){return{}},tn=function(r,i){return{"text-serapion-grey-100":r,"cursor-not-allowed":i}};function ii(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"div",13),t.ALo(2,"uppercase"),t._uU(3),t.qZA(),t.TgZ(4,"div",14),t.TgZ(5,"div",15),t.YNc(6,ni,1,3,"img",16),t.ALo(7,"slice"),t.ALo(8,"uniqueFilter"),t.qZA(),t.TgZ(9,"div",17),t.TgZ(10,"button",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().removeItem(o)}),t._UZ(11,"i",19),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.TgZ(14,"button",18),t.NdJ("click",function(){const o=t.CHM(e).$implicit;return t.oxw().addItem(o)}),t._UZ(15,"i",20),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit,n=t.oxw();t.xp6(1),t.s9C("title",t.lcZ(2,9,e.name)),t.xp6(2),t.hij(" ",e.name," "),t.xp6(3),t.Q6J("ngForOf",t.Dn7(7,11,t.xi3(8,15,e.orderedItems,n.updated),0,5)),t.xp6(4),t.Q6J("disabled",(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE||!n.haveThisItem(e)),t.xp6(1),t.Q6J("ngClass",t.DdM(18,ri))("ngClass",t.WLB(19,tn,!n.haveThisItem(e)||(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE,(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE)),t.xp6(2),t.hij("",e.orderedItems.length,"x"),t.xp6(1),t.Q6J("disabled",(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE),t.xp6(1),t.Q6J("ngClass",t.WLB(22,tn,(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE,(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE))}}const si=function(r){return{"cursor-not-allowed":r}},oi=function(r,i){return{"btn-primary":r,"btn-disabled":i}};let ai=(()=>{class r{constructor(e,n,s){this._orderService=e,this._websocketService=n,this._toastr=s,this.items=[],this.updated=new Date,this.subs=new Z.Y,this.orderStatus=T,this.itemForm=new F({item:new O(null,[S.required,S.minLength(1),S.maxLength(140)])})}ngOnInit(){this.order.id&&(this.subs.sink=this._orderService.getOrderItems(this.order.id).subscribe(e=>{this.items=e})),this.subs.sink=this._websocketService.onOrderItemAdded().subscribe(e=>{e.order.id===this.order.id&&(this.items.push(e),this.updated=new Date)}),this.subs.sink=this._websocketService.onOrderItemDeleted().subscribe(e=>{this.items=this.items.filter(n=>n.id!=e),this.updated=new Date}),this.subs.sink=this._websocketService.onOrderItemUserAdded().subscribe(e=>{this.items.forEach(n=>{n.id===e.id&&(n.orderedItems=e.orderedItems,this.updated=new Date)})}),this.subs.sink=this._websocketService.onOrderItemUserDeleted().subscribe(e=>{this.items.forEach(n=>{var s;if(n.id===e.orderItem.id){const o=n.orderedItems.findIndex(a=>a.user.id==e.user.id);n.orderedItems.splice(o,1),0===(null===(s=n.orderedItems)||void 0===s?void 0:s.length)&&this._orderService.deleteOrderItem(e.orderItem.id)}this.updated=new Date})}),this.subs.sink=this._websocketService.onOrderCompleted().subscribe(e=>{var n;e.id===(null===(n=this.order)||void 0===n?void 0:n.id)&&(this.order=e,this.items=e.orderItems)})}onSubmit(){var n;this.itemForm.get("item"),JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));const o={name:null===(n=this.itemForm.get("item"))||void 0===n?void 0:n.value,order:this.order,orderedItems:[{user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER))}]};this.subs.sink=this._orderService.addNewOrderItem(o).pipe((0,be.K)(a=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,ee.of)(void 0)))).subscribe(a=>{if(a){const l=Object.assign(Object.assign({},a),{user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER))});this._orderService.addOrderItemUser(l)}}),this.itemForm.reset()}addItem(e){const n={id:e.id,order:e.order,user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER))};this._orderService.addOrderItemUser(n).subscribe()}removeItem(e){const n=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));-1!==e.orderedItems.findIndex(a=>{var l;return(null===(l=a.user)||void 0===l?void 0:l.id)==n.id})&&this._orderService.removeOrderItemUser({itemId:e.id,userId:n.id})}haveThisItem(e){if(e){const n=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(e.orderedItems)return-1!==e.orderedItems.findIndex(o=>{var a;return(null===(a=o.user)||void 0===a?void 0:a.id)==n.id})}return!1}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ye),t.Y36(ge),t.Y36(He._W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-items"]],inputs:{order:"order"},decls:13,vars:13,consts:[[1,"pt-4"],[1,"relative","text-serapion-grey-100","text-xs","flex","flex-col","lg:flex-row","items-center","justify-between","gap-2",3,"formGroup","ngSubmit"],[1,"flex-1","group","w-full","lg:w-2/4","mr-1"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],[1,"w-6","text-right","mr-4","text-serapion-grey-100","cursor-pointer",3,"for"],[1,"fas","fa-xs","fa-hamburger"],["type","text","placeholder","e.g. Hamburger","autocomplete","off","name","item","formControlName","item",1,"flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"id","ngClass"],[1,"w-full","py-2","lg:w-max","lg:py-0"],["type","submit",1,"btn","btn-primary","w-full",3,"ngClass","disabled"],[1,"fas","fa-plus","fa-xs","pr-1"],[1,"flex","flex-col","justify-between"],["class","pt-8 flex flex-row justify-between items-center",4,"ngFor","ngForOf"],[1,"pt-8","flex","flex-row","justify-between","items-center"],[1,"uppercase","text-xs","font-thin",3,"title"],[1,"flex","flex-row","justify-between","items-center","flex-none","ml-1"],[1,"-space-x-2","ml-auto","mr-1"],["class","relative z-30 inline object-cover w-5 h-5 border-2 border-serapion-white rounded-full dark:border-serapion-black-200","referrerpolicy","no-referrer",3,"src","alt","title",4,"ngFor","ngForOf"],[1,"uppercase","text-xs","font-semibold"],[3,"disabled","click"],[1,"fas","fa-angle-left","fa-sm","pr-1","cursor-pointer",3,"ngClass"],[1,"fas","fa-angle-right","fa-sm","pl-1","cursor-pointer",3,"ngClass"],["referrerpolicy","no-referrer",1,"relative","z-30","inline","object-cover","w-5","h-5","border-2","border-serapion-white","rounded-full","dark:border-serapion-black-200",3,"src","alt","title"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"form",1),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"label",4),t._UZ(5,"i",5),t.qZA(),t._UZ(6,"input",6),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"button",8),t._UZ(9,"i",9),t._uU(10," Add "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",10),t.YNc(12,ii,16,25,"div",11),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.itemForm),t.xp6(3),t.MGl("for","item-",null==n.order?null:n.order.id,""),t.xp6(2),t.MGl("id","item-",null==n.order?null:n.order.id,""),t.Q6J("ngClass",t.VKq(8,si,(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE)),t.uIk("disabled",(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE?"":null),t.xp6(2),t.Q6J("ngClass",t.WLB(10,oi,!n.itemForm.invalid&&(null==n.order?null:n.order.status)===n.orderStatus.ACTIVE,n.itemForm.invalid||(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE))("disabled",n.itemForm.invalid||(null==n.order?null:n.order.status)===n.orderStatus.INACTIVE),t.xp6(4),t.Q6J("ngForOf",n.items))},directives:[j,$,U,N,q,Y,p.mk,p.sg],pipes:[p.gd,p.OU,ti],styles:[""]}),r})();const li=["list"],ui=["defaultItemTemplate"];function di(r,i){if(1&r&&t._uU(0),2&r){const e=i.item,n=t.oxw();t.hij(" ",e[n.labelKey]," ")}}function ci(r,i){}const hi=function(r){return{item:r}};function pi(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"li"),t.TgZ(1,"a",4),t.NdJ("mousedown",function(s){const a=t.CHM(e).index,l=t.oxw();return l.activeIndex=a,l.itemClick.emit(),s.preventDefault()}),t.YNc(2,ci,0,0,"ng-template",5),t.qZA(),t.qZA()}if(2&r){const e=i.$implicit,n=i.index,s=t.oxw();t.ekj("active",s.activeIndex==n)("mention-active",!s.styleOff&&s.activeIndex==n),t.xp6(1),t.ekj("mention-item",!s.styleOff),t.xp6(1),t.Q6J("ngTemplateOutlet",s.itemTemplate)("ngTemplateOutletContext",t.VKq(8,hi,e))}}function nn(r){return te(r)?r.value:r.textContent}function Je(r,i,e,n,s,o=!1){if(function(r){return null!=r&&("INPUT"==r.nodeName||"TEXTAREA"==r.nodeName||"#text"==r.nodeName)}(r)){let u=nn(r);(function(r,i){te(r)?r.value=i:r.textContent=i})(r,u.substring(0,i)+n+u.substring(e,u.length)),rn(r,i+n.length,s)}else if(!o){let u=we(s);if(u&&u.rangeCount>0){var l=u.getRangeAt(0).startOffset;Je(u.anchorNode,l-(e-i),l,n,s,!0)}}}function te(r){return null!=r&&("INPUT"==r.nodeName||"TEXTAREA"==r.nodeName)}function rn(r,i,e=null){if(te(r)&&r.selectionStart)r.focus(),r.setSelectionRange(i,i);else{let n=Qe(e).createRange();n.setStart(r,i),n.collapse(!0);let s=we(e);s.removeAllRanges(),s.addRange(n)}}function sn(r,i=null){if(te(r))return r.value.slice(0,r.selectionStart).length;var n=we(i);if(n.rangeCount>0){var s=n.getRangeAt(0),o=s.cloneRange();return o.selectNodeContents(r),o.setEnd(s.endContainer,s.endOffset),o.toString().length}}function Qe(r){return r?r.contentWindow.document:document}function we(r){return r?r.contentWindow.getSelection():window.getSelection()}function on(r){let e="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),n=Qe(r?r.iframe:null),s=we(r?r.iframe:null),o=s.getRangeAt(0),a=n.createRange();a.setStart(s.anchorNode,o.startOffset),a.setEnd(s.anchorNode,o.startOffset),a.collapse(!1);let l=n.createElement("span");l.id=e,l.appendChild(n.createTextNode("\ufeff")),a.insertNode(l),s.removeAllRanges(),s.addRange(o);let d={left:0,top:l.offsetHeight};return function(r,i,e){let n=i,s=r?r.iframe:null;for(;n&&(null==r.parent||r.parent!=n);)e.left+=n.offsetLeft+n.clientLeft,e.top+=n.offsetTop+n.clientTop,n=n.offsetParent,!n&&s&&(n=s,s=null);for(n=i,s=r?r.iframe:null;n!==Qe(null).body&&null!=n&&(null==r.parent||r.parent!=n);)n.scrollTop&&n.scrollTop>0&&(e.top-=n.scrollTop),n.scrollLeft&&n.scrollLeft>0&&(e.left-=n.scrollLeft),n=n.parentNode,!n&&s&&(n=s,s=null)}(r,l,d),l.parentNode.removeChild(l),d}var _i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],an="undefined"!=typeof window,vi=an&&null!=window.mozInnerScreenX;let bi=(()=>{class r{constructor(e){this.element=e,this.labelKey="label",this.itemClick=new t.vpe,this.items=[],this.activeIndex=0,this.hidden=!1,this.dropUp=!1,this.styleOff=!1,this.coords={top:0,left:0},this.offset=0}ngAfterContentChecked(){this.itemTemplate||(this.itemTemplate=this.defaultItemTemplate)}position(e,n=null){if(te(e))this.coords=function(r,i,e){if(!an)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var o=document.createElement("div");o.id="input-textarea-caret-position-mirror-div",document.body.appendChild(o);var a=o.style,l=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,d="INPUT"===r.nodeName;a.whiteSpace="pre-wrap",d||(a.wordWrap="break-word"),a.position="absolute",a.visibility="hidden",_i.forEach(function(f){if(d&&"lineHeight"===f)if("border-box"===l.boxSizing){var m=parseInt(l.height),v=parseInt(l.paddingTop)+parseInt(l.paddingBottom)+parseInt(l.borderTopWidth)+parseInt(l.borderBottomWidth),M=v+parseInt(l.lineHeight);a.lineHeight=m>M?m-v+"px":m===M?l.lineHeight:"0"}else a.lineHeight=l.height;else a[f]=l[f]}),vi?r.scrollHeight>parseInt(l.height)&&(a.overflowY="scroll"):a.overflow="hidden",o.textContent=r.value.substring(0,i),d&&(o.textContent=o.textContent.replace(/\s/g,"\xa0"));var u=document.createElement("span");u.textContent=r.value.substring(i)||".",o.appendChild(u);var h={top:u.offsetTop+parseInt(l.borderTopWidth),left:u.offsetLeft+parseInt(l.borderLeftWidth),height:parseInt(l.lineHeight)};return document.body.removeChild(o),h}(e,e.selectionStart),this.coords.top=e.offsetTop+this.coords.top-e.scrollTop,this.coords.left=e.offsetLeft+this.coords.left-e.scrollLeft,this.offset=this.getBlockCursorDimensions(e).height;else if(n)this.coords=on({iframe:n,parent:n.offsetParent});else{let s=document.documentElement,o=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),a=(window.pageYOffset||s.scrollTop)-(s.clientTop||0),l=on({iframe:n}),d=e.getBoundingClientRect();this.coords.top=l.top-d.top+e.offsetTop-a,this.coords.left=l.left-d.left+e.offsetLeft-o}this.positionElement()}get activeItem(){return this.items[this.activeIndex]}activateNextItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.nextSibling;if(s&&"LI"==s.nodeName){let o=s.getBoundingClientRect();o.bottom>e.getBoundingClientRect().bottom&&(e.scrollTop=s.offsetTop+o.height-e.clientHeight)}}this.activeIndex=Math.max(Math.min(this.activeIndex+1,this.items.length-1),0)}activatePreviousItem(){let e=this.list.nativeElement,n=e.getElementsByClassName("active").item(0);if(n){let s=n.previousSibling;s&&"LI"==s.nodeName&&s.getBoundingClientRect().top<e.getBoundingClientRect().top&&(e.scrollTop=s.offsetTop)}this.activeIndex=Math.max(Math.min(this.activeIndex-1,this.items.length-1),0)}reset(){this.list.nativeElement.scrollTop=0,this.checkBounds()}checkBounds(){let e=this.coords.left,n=this.coords.top,s=this.dropUp;const o=this.list.nativeElement.getBoundingClientRect();o.left+o.width>window.innerWidth&&(e-=o.left+o.width-window.innerWidth+10),o.top<0&&(s=!1),this.positionElement(e,n,s)}positionElement(e=this.coords.left,n=this.coords.top,s=this.dropUp){const o=this.element.nativeElement;n+=s?0:this.offset,o.className=s?"dropup":null,o.style.position="absolute",o.style.left=e+"px",o.style.top=n+"px"}getBlockCursorDimensions(e){const n=window.getComputedStyle(e);return{height:parseFloat(n.lineHeight),width:parseFloat(n.fontSize)}}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.SBq))},r.\u0275cmp=t.Xpm({type:r,selectors:[["mention-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(li,7),t.Gf(ui,7)),2&e){let s;t.iGM(s=t.CRH())&&(n.list=s.first),t.iGM(s=t.CRH())&&(n.defaultItemTemplate=s.first)}},inputs:{labelKey:"labelKey",itemTemplate:"itemTemplate"},outputs:{itemClick:"itemClick"},decls:5,vars:6,consts:[["defaultItemTemplate",""],[1,"dropdown-menu","scrollable-menu",3,"hidden"],["list",""],[3,"active","mention-active",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"mousedown"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,n){1&e&&(t.YNc(0,di,1,1,"ng-template",null,0,t.W1O),t.TgZ(2,"ul",1,2),t.YNc(4,pi,3,10,"li",3),t.qZA()),2&e&&(t.xp6(2),t.ekj("mention-menu",!n.styleOff)("mention-dropdown",!n.styleOff&&n.dropUp),t.Q6J("hidden",n.hidden),t.xp6(2),t.Q6J("ngForOf",n.items))},directives:[p.sg,p.tP],styles:[".mention-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;display:none;float:left;min-width:11em;padding:.5em 0;margin:.125em 0 0;font-size:1em;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25em}.mention-item[_ngcontent-%COMP%]{display:block;padding:.2em 1.5em;line-height:1.5em;clear:both;font-weight:400;color:#212529;text-align:inherit;white-space:nowrap;background-color:transparent;border:0}.mention-active[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;background-color:#337ab7;outline:0}.scrollable-menu[_ngcontent-%COMP%]{display:block;height:auto;max-height:292px;overflow:auto}[hidden][_ngcontent-%COMP%]{display:none}.mention-dropdown[_ngcontent-%COMP%]{bottom:100%;top:auto;margin-bottom:2px}"]}),r})(),Ei=(()=>{class r{constructor(e,n,s){this._element=e,this._componentResolver=n,this._viewContainerRef=s,this.mentionConfig={items:[]},this.DEFAULT_CONFIG={items:[],triggerChar:"@",labelKey:"label",maxItems:-1,allowSpace:!1,returnTrigger:!1,mentionSelect:(o,a)=>this.activeConfig.triggerChar+o[this.activeConfig.labelKey],mentionFilter:(o,a)=>{const l=o.toLowerCase();return a.filter(d=>d[this.activeConfig.labelKey].toLowerCase().startsWith(l))}},this.searchTerm=new t.vpe,this.itemSelected=new t.vpe,this.opened=new t.vpe,this.closed=new t.vpe,this.triggerChars={}}set mention(e){this.mentionItems=e}ngOnChanges(e){(e.mention||e.mentionConfig)&&this.updateConfig()}updateConfig(){let e=this.mentionConfig;this.triggerChars={},this.mentionItems&&(e.items=this.mentionItems),this.addConfig(e),e.mentions&&e.mentions.forEach(n=>this.addConfig(n))}addConfig(e){let n=Object.assign({},this.DEFAULT_CONFIG),s=(e=Object.assign(n,e)).items;s&&s.length>0&&("string"==typeof s[0]&&(s=s.map(o=>{let a={};return a[e.labelKey]=o,a})),e.labelKey&&(s=s.filter(o=>o[e.labelKey]),e.disableSort||s.sort((o,a)=>o[e.labelKey].localeCompare(a[e.labelKey])))),e.items=s,this.triggerChars[e.triggerChar]=e,this.activeConfig&&this.activeConfig.triggerChar==e.triggerChar&&(this.activeConfig=e,this.updateSearchList())}setIframe(e){this.iframe=e}stopEvent(e){e.wasClick||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}blurHandler(e){this.stopEvent(e),this.stopSearch()}inputHandler(e,n=this._element.nativeElement){if(229===this.lastKeyCode&&e.data){let s=e.data.charCodeAt(0);this.keyHandler({keyCode:s,inputEvent:!0},n)}}keyHandler(e,n=this._element.nativeElement){if(this.lastKeyCode=e.keyCode,e.isComposing||229===e.keyCode)return;let s=nn(n),o=sn(n,this.iframe),a=e.key;if(!a){let d=e.which||e.keyCode;a=String.fromCharCode(!e.shiftKey&&d>=65&&d<=90?d+32:e.which||e.keyCode)}13==e.keyCode&&e.wasClick&&o<this.startPos&&(o=this.startNode.length,rn(this.startNode,o,this.iframe));let l=this.triggerChars[a];if(l)this.activeConfig=l,this.startPos=e.inputEvent?o-1:o,this.startNode=(this.iframe?this.iframe.contentWindow.getSelection():window.getSelection()).anchorNode,this.searching=!0,this.searchString=null,this.showSearchList(n),this.updateSearchList(),l.returnTrigger&&this.searchTerm.emit(l.triggerChar);else if(this.startPos>=0&&this.searching)if(o<=this.startPos)this.searchList.hidden=!0;else if(16!==e.keyCode&&!e.metaKey&&!e.altKey&&!e.ctrlKey&&o>this.startPos){if(this.activeConfig.allowSpace||32!==e.keyCode){if(8===e.keyCode&&o>0)o--,o==this.startPos&&this.stopSearch();else if(this.searchList.hidden){if(9===e.keyCode||13===e.keyCode)return void this.stopSearch()}else if(!this.searchList.hidden){if(9===e.keyCode||13===e.keyCode){this.stopEvent(e),this.itemSelected.emit(this.searchList.activeItem);const d=this.activeConfig.mentionSelect(this.searchList.activeItem,this.activeConfig.triggerChar);if(Je(n,this.startPos,o,d,this.iframe),"createEvent"in document){let u=document.createEvent("HTMLEvents");u.initEvent(this.iframe?"change":"input",!0,!1),this._element.nativeElement.dispatchEvent(u)}return this.startPos=-1,this.stopSearch(),!1}if(27===e.keyCode)return this.stopEvent(e),this.stopSearch(),!1;if(40===e.keyCode)return this.stopEvent(e),this.searchList.activateNextItem(),!1;if(38===e.keyCode)return this.stopEvent(e),this.searchList.activatePreviousItem(),!1}}else this.startPos=-1;if(1!=a.length&&8!=e.keyCode)return this.stopEvent(e),!1;if(this.searching){let d=s.substring(this.startPos+1,o);if(8!==e.keyCode&&!e.inputEvent&&(d+=a),this.searchString=d,this.activeConfig.returnTrigger){const u=this.searchString||8===e.keyCode?s.substring(this.startPos,this.startPos+1):"";this.searchTerm.emit(u+this.searchString)}else this.searchTerm.emit(this.searchString);this.updateSearchList()}}}startSearch(e,n=this._element.nativeElement){e=e||this.mentionConfig.triggerChar||this.DEFAULT_CONFIG.triggerChar;const s=sn(n,this.iframe);Je(n,s,s,e,this.iframe),this.keyHandler({key:e,inputEvent:!0},n)}stopSearch(){this.searchList&&!this.searchList.hidden&&(this.searchList.hidden=!0,this.closed.emit()),this.activeConfig=null,this.searching=!1}updateSearchList(){let e=[];if(this.activeConfig&&this.activeConfig.items){let n=this.activeConfig.items;!this.activeConfig.disableSearch&&this.searchString&&this.activeConfig.labelKey&&this.activeConfig.mentionFilter&&(n=this.activeConfig.mentionFilter(this.searchString,n)),e=n,this.activeConfig.maxItems>0&&(e=e.slice(0,this.activeConfig.maxItems))}this.searchList&&(this.searchList.items=e,this.searchList.hidden=0==e.length)}showSearchList(e){if(this.opened.emit(),null==this.searchList){let n=this._componentResolver.resolveComponentFactory(bi),s=this._viewContainerRef.createComponent(n);this.searchList=s.instance,this.searchList.itemTemplate=this.mentionListTemplate,s.instance.itemClick.subscribe(()=>{e.focus(),this.keyHandler({key:"Enter",keyCode:13,wasClick:!0},e)})}this.searchList.labelKey=this.activeConfig.labelKey,this.searchList.dropUp=this.activeConfig.dropUp,this.searchList.styleOff=this.mentionConfig.disableStyle,this.searchList.activeIndex=0,this.searchList.position(e,this.iframe),window.requestAnimationFrame(()=>this.searchList.reset())}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(t.SBq),t.Y36(t._Vd),t.Y36(t.s_b))},r.\u0275dir=t.lG2({type:r,selectors:[["","mention",""],["","mentionConfig",""]],hostAttrs:["autocomplete","off"],hostBindings:function(e,n){1&e&&t.NdJ("keydown",function(o){return n.keyHandler(o)})("input",function(o){return n.inputHandler(o)})("blur",function(o){return n.blurHandler(o)})},inputs:{mentionConfig:"mentionConfig",mention:"mention",mentionListTemplate:"mentionListTemplate"},outputs:{searchTerm:"searchTerm",itemSelected:"itemSelected",opened:"opened",closed:"closed"},features:[t.TTD]}),r})(),Ai=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[p.ez]]}),r})();const Ti=["commentBox"];function Mi(r,i){if(1&r&&(t.TgZ(0,"strong",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&r){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.AsE(" ",n.isMessageOwner(e)?"You,":e.user.firstName+","," ",t.xi3(2,2,e.commentedOn,"shortTime")," ")}}function Ni(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"i",25),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().handleDeleteMessage(s)}),t.qZA()}}const Vi=function(r){return{"bg-serapion":r}};function Ii(r,i){if(1&r&&(t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._UZ(2,"img",18),t.qZA(),t.TgZ(3,"div",19),t.YNc(4,Mi,3,5,"strong",20),t.TgZ(5,"div",21),t.TgZ(6,"p",22),t._uU(7),t.qZA(),t.YNc(8,Ni,1,0,"i",23),t.qZA(),t.qZA(),t.qZA()),2&r){const e=i.$implicit,n=t.oxw();t.xp6(2),t.s9C("src",null==e.user?null:e.user.photo,t.LSH),t.s9C("alt",e.user.firstName+" "+e.user.lastName+" Profile Picture"),t.s9C("title",e.user.firstName+" "+e.user.lastName),t.xp6(2),t.Q6J("ngIf",e.user),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Vi,n.isCurrentUser(e.user))),t.xp6(1),t.hij(" ",e.comment," "),t.xp6(1),t.Q6J("ngIf",n.isMessageOwner(e))}}const Di=function(r){return{"opacity-0":r}};function Fi(r,i){if(1&r&&(t.TgZ(0,"div",26),t._UZ(1,"img",27),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA()),2&r){const e=i.item;t.xp6(1),t.s9C("src",e.photo,t.LSH),t.Q6J("ngClass",t.VKq(3,Di,void 0===e.photo)),t.xp6(2),t.Oqu(e.firstName)}}const ki=function(){return{labelKey:"firstName",dropUp:!0}},Zi=function(r,i){return{"btn-primary":r,"btn-disabled":i}};let Ri=(()=>{class r{constructor(e,n,s,o){this._orderService=e,this._websocketService=n,this._notificationService=s,this._toastr=o,this.orderStatus=T,this.users$=new G.X([]),this.toMention=[],this.messages=[],this.subs=new Z.Y,this.commentForm=new F({comment:new O(null,[S.required,S.minLength(1),S.maxLength(140)])}),this._getUsers$=()=>this._orderService.getOrderItems(this.order.id).pipe((0,We.U)(a=>a.map(({orderedItems:l})=>null==l?void 0:l.map(({user:d})=>d)).flat())),this._populateMentionList=a=>{const l=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));l&&l.subscriptionId&&(a=a.filter(u=>u.subscriptionId!==l.subscriptionId));let d=[...new Map(a.map(u=>[u.id,u])).values()];d.length&&d.unshift({id:-1,firstName:"All",lastName:"All",email:"All"}),this.users$.next(d)},this.isMessageOwner=({user:a})=>{const l=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));return!!a&&a.id===l.id},this.handleDeleteMessage=({id:a})=>{a&&(this._orderService.deleteMessageWithId(a).subscribe(),this.messages=this.messages.filter(l=>l.id!==a))}}ngOnInit(){this.order&&(this.subs.sink=this._orderService.getComments(this.order.id).subscribe(e=>{this.messages=e,this.messages.sort((n,s)=>n.commentedOn<s.commentedOn?-1:1)}),this.subs.sink=this._getUsers$().subscribe(e=>this._populateMentionList(e))),this.subs.sink=this._websocketService.onCommentDeleted().pipe((0,y.w)(()=>this._orderService.getComments(this.order.id))).subscribe(e=>{this.messages=e,this.messages.sort((n,s)=>n.commentedOn<s.commentedOn?-1:1)}),this.subs.sink=this._websocketService.onOrderItemAdded().pipe((0,y.w)(()=>this._getUsers$())).subscribe(e=>this._populateMentionList(e)),this.subs.sink=this._websocketService.onOrderItemDeleted().pipe((0,y.w)(()=>this._getUsers$())).subscribe(e=>this._populateMentionList(e)),this.subs.sink=this._websocketService.onOrderItemUserAdded().pipe((0,y.w)(()=>this._getUsers$())).subscribe(e=>this._populateMentionList(e)),this.subs.sink=this._websocketService.onOrderItemUserDeleted().pipe((0,y.w)(()=>this._getUsers$())).subscribe(e=>this._populateMentionList(e)),this.subs.sink=this._websocketService.onCommentReceived().subscribe(e=>{var n;e.order.id===(null===(n=this.order)||void 0===n?void 0:n.id)&&(this.messages.push(e),this.messages.sort((s,o)=>s.commentedOn<o.commentedOn?-1:1),setTimeout(()=>{this.commentBox.nativeElement.scroll({top:Number.MAX_SAFE_INTEGER,left:0,behavior:"smooth"})},100))})}onAddComment(){var e;const n={comment:null===(e=this.commentForm.get("comment"))||void 0===e?void 0:e.value,user:JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER)),order:this.order};this._orderService.addNewComment(n).pipe((0,be.K)(s=>(this._toastr.error("Something went wrong.","Hmmm..."),(0,ee.of)(void 0))),(0,y.w)(s=>{var o;return s?this._orderService.getOrderItems(null===(o=s.order)||void 0===o?void 0:o.id):(0,ee.of)(void 0)})).subscribe(s=>{var o,a,l,d;if(s){let u=[];if(s.length){s.forEach(f=>{var m;null===(m=f.orderedItems)||void 0===m||m.forEach(v=>{var M;(null===(M=v.user)||void 0===M?void 0:M.subscriptionId)&&u.push(v.user.subscriptionId)})});const h=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(u=[...new Set(u)],h&&h.subscriptionId&&(u=u.filter(f=>f!==h.subscriptionId)),u.length){const f=`New message in ${null===(o=this.order)||void 0===o?void 0:o.restaurant.name}!\n${n.comment}`;this._notificationService.sendNotificationToUsers(u,f)}}if(this.toMention.length){const h=this.toMention.findIndex(v=>"All"===v.firstName);let f=[];-1!==h?this.users$.value.forEach(v=>{v.subscriptionId&&f.push(v.subscriptionId)}):this.toMention.forEach(v=>{v.subscriptionId&&f.push(v.subscriptionId)});const m=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(f=[...new Set(f)],m&&m.subscriptionId&&(f=f.filter(v=>v!=m.subscriptionId)),f.length){const v=`New mention in ${null===(a=this.order)||void 0===a?void 0:a.restaurant.name}!\n${null===(l=this.order)||void 0===l?void 0:l.user.firstName} ${null===(d=this.order)||void 0===d?void 0:d.user.lastName}\n${n.comment}`;this._notificationService.sendMentionToUsers(f,v)}}}}),this.toMention=[],this.commentForm.reset()}isCurrentUser(e){const n=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));return!(!n||(null==e?void 0:e.id)!==n.id)}onItemSelected(e,n){var s;n===(null===(s=this.order)||void 0===s?void 0:s.id)&&this.toMention.push(e)}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ye),t.Y36(ge),t.Y36(_e),t.Y36(He._W))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-chat"]],viewQuery:function(e,n){if(1&e&&t.Gf(Ti,5),2&e){let s;t.iGM(s=t.CRH())&&(n.commentBox=s.first)}},inputs:{order:"order"},decls:20,vars:15,consts:[[1,"mt-8","py-4","border-t","border-opacity-25","border-serapion-grey-100","border-dashed"],[1,"text-xs","font-thin","uppercase","text-serapion-grey-100"],[1,"mb-4","flex","flex-col","text-xs","h-40","overflow-y-auto","space-y-4"],["commentBox",""],["class","flex flex-row justify-start items-start space-x-4 h-full",4,"ngFor","ngForOf"],[1,"pt-4","flex","flex-row","justify-between","items-center"],[1,"flex","flex-col","lg:flex-row","group","relative","text-serapion-grey-100","justify-between","text-xs","flex-1",3,"formGroup","ngSubmit"],[1,"flex-1","w-full","lg:w-2/4","mr-2"],[1,"flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],[1,"w-6","text-right","mr-4","text-serapion-grey-100","cursor-pointer",3,"for"],[1,"fas","fa-xs","fa-comment"],["type","text","placeholder","Your comment, try typing @...","autocomplete","off","name","comment","formControlName","comment",1,"mentions","flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"id","mention","mentionConfig","mentionListTemplate","itemSelected"],[1,"w-full","py-2","pt-4","lg:w-max","lg:py-0"],["type","submit",1,"btn","btn-primary","w-full",3,"disabled","ngClass"],[1,"fas","fa-paper-plane","fa-xs","pr-1"],["mentionListTemplate",""],[1,"flex","flex-row","justify-start","items-start","space-x-4","h-full"],[1,"mt-2"],["referrerpolicy","no-referrer",1,"w-6","h-6","rounded-full",3,"src","alt","title"],[1,"flex-1","flex","flex-col","justify-start","items-start","space-y-1"],["class","font-normal text-xs text-serapion-grey-100",4,"ngIf"],[1,"flex","flex-row","justify-between","items-center","mr-36","xl:mr-24","space-x-2"],[1,"bg-serapion-blue-100","rounded-tl-sm","rounded-xl","p-4","pt-2","pl-2","dark:bg-serapion-black-100",3,"ngClass"],["class","fas fa-sm fa-trash text-serapion-grey-100 hover:text-serapion-grey-200 transition-all duration-300 dark:hover:text-serapion-white cursor-pointer",3,"click",4,"ngIf"],[1,"font-normal","text-xs","text-serapion-grey-100"],[1,"fas","fa-sm","fa-trash","text-serapion-grey-100","hover:text-serapion-grey-200","transition-all","duration-300","dark:hover:text-serapion-white","cursor-pointer",3,"click"],[1,"flex","flex-row","justify-start","items-center","space-x-2","py-1"],["alt","",1,"rounded-full","w-6","h-6",3,"ngClass","src"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2," Comments "),t.qZA(),t.qZA(),t.TgZ(3,"div",2,3),t.YNc(5,Ii,9,9,"div",4),t.qZA(),t.TgZ(6,"div",5),t.TgZ(7,"form",6),t.NdJ("ngSubmit",function(){return n.onAddComment()}),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"label",9),t._UZ(11,"i",10),t.qZA(),t.TgZ(12,"input",11),t.NdJ("itemSelected",function(o){return n.onItemSelected(o,n.order.id)}),t.ALo(13,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",12),t.TgZ(15,"button",13),t._UZ(16,"i",14),t._uU(17," Send "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,Fi,4,5,"ng-template",null,15,t.W1O)),2&e){const s=t.MAs(19);t.xp6(5),t.Q6J("ngForOf",n.messages),t.xp6(2),t.Q6J("formGroup",n.commentForm),t.xp6(3),t.MGl("for","comment-",null==n.order?null:n.order.id,""),t.xp6(2),t.MGl("id","comment-",null==n.order?null:n.order.id,""),t.Q6J("mention",t.lcZ(13,9,n.users$))("mentionConfig",t.DdM(11,ki))("mentionListTemplate",s),t.xp6(3),t.Q6J("disabled",n.commentForm.invalid)("ngClass",t.WLB(12,Zi,!n.commentForm.invalid,n.commentForm.invalid))}},directives:[p.sg,j,$,U,N,q,Y,Ei,p.mk,p.O5],pipes:[p.Ov,p.uU],styles:["[_nghost-%COMP%]     mention-list .scrollable-menu{max-height:160px!important;z-index:50;--tw-bg-opacity: 1;background-color:rgba(238,245,250,var(--tw-bg-opacity))}.dark   [_nghost-%COMP%]     mention-list .scrollable-menu{--tw-bg-opacity: 1;background-color:rgba(30,33,34,var(--tw-bg-opacity))}[_nghost-%COMP%]     mention-list .mention-menu>li{cursor:pointer}[_nghost-%COMP%]     mention-list .mention-menu>li>a{z-index:50;font-size:.75rem;line-height:1rem;--tw-text-opacity: 1;color:rgba(63,71,86,var(--tw-text-opacity))}.dark   [_nghost-%COMP%]     mention-list .mention-menu>li>a{--tw-text-opacity: 1;color:rgba(238,245,250,var(--tw-text-opacity))}[_nghost-%COMP%]     mention-list .mention-active>a{background-color:#5a8ed1!important}[_nghost-%COMP%]     mention-list .mention-active>a:after .dropdown-item a:hover:after{background-color:#5a8ed1!important}"]}),r})();const Ui=["cancelDialog"],Pi=["confirmDialog"];function Li(r,i){if(1&r&&(t.TgZ(0,"a",31),t.TgZ(1,"span",32),t._uU(2,"Check out restaurant menu"),t.qZA(),t.O4$(),t.TgZ(3,"svg",33),t._UZ(4,"path",34),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit;t.Q6J("href",e.restaurant.menu,t.LSH)}}function Gi(r,i){if(1&r&&(t.TgZ(0,"div",35),t._UZ(1,"i",36),t.TgZ(2,"p",4),t._uU(3),t.ALo(4,"titlecase"),t.ALo(5,"date"),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit,n=t.oxw();t.xp6(3),t.AsE(" ",t.lcZ(4,2,n.getOwnerFullName(e))," has opened the order @",t.xi3(5,4,e.openedAt,"shortTime")," ")}}function qi(r,i){if(1&r&&(t.TgZ(0,"div",37),t._UZ(1,"i",38),t.TgZ(2,"p",4),t._uU(3),t.ALo(4,"titlecase"),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit,n=t.oxw();t.xp6(3),t.hij(" ",n.isOrderOrderer(e)?"You are ":t.lcZ(4,1,e.orderer.firstName+" "+e.orderer.lastName)+" is"," due to make the order ")}}function $i(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"form",39),t.NdJ("change",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().onOrderTypeChange(s)}),t.TgZ(1,"div",40),t.TgZ(2,"div",41),t.TgZ(3,"div",42),t._UZ(4,"input",43),t.TgZ(5,"label",44),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",45),t._UZ(8,"input",43),t.TgZ(9,"label",44),t._uU(10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw().index,n=t.oxw();t.Q6J("formGroup",n.ordersForm),t.xp6(2),t.Q6J("formGroupName",e),t.xp6(2),t.s9C("id",n.orderType.DELIVERY+"-"+e),t.s9C("value",n.orderType.DELIVERY),t.xp6(1),t.s9C("for",n.orderType.DELIVERY+"-"+e),t.xp6(1),t.hij(" ",n.orderType.DELIVERY,""),t.xp6(2),t.s9C("id",n.orderType.TAKEAWAY+"-"+e),t.s9C("value",n.orderType.TAKEAWAY),t.xp6(1),t.s9C("for",n.orderType.TAKEAWAY+"-"+e),t.xp6(1),t.hij(" ",n.orderType.TAKEAWAY,"")}}function Bi(r,i){if(1&r&&(t.TgZ(0,"div",46),t._UZ(1,"i",47),t.TgZ(2,"p",4),t._uU(3),t.qZA(),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.type," ")}}function ji(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",48),t.TgZ(1,"button",49),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().sendArrivedCall(s)}),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"path",51),t.qZA(),t.qZA(),t.kcU(),t.TgZ(4,"p",4),t._uU(5),t.ALo(6,"date"),t.qZA(),t.qZA()}if(2&r){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.MGl("title","Food Arrived ",null==e||null==e.restaurant?null:e.restaurant.name,""),t.xp6(4),t.hij(" ",((null==e?null:e.type)===n.orderType.DELIVERY?"Arrives at ":"Departure at ")+t.xi3(6,2,null==e?null:e.arrivalTime,"shortTime")," ")}}function Yi(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",52),t.TgZ(1,"div",53),t.TgZ(2,"span",54),t._uU(3,"Details"),t.qZA(),t.TgZ(4,"button",55),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().sendLastCall(s)}),t.O4$(),t.TgZ(5,"svg",56),t._UZ(6,"path",51),t.qZA(),t.qZA(),t.qZA(),t.kcU(),t.TgZ(7,"p",57),t.TgZ(8,"span",58),t._uU(9),t.qZA(),t._uU(10,", you have to finish this order, add arrival time! "),t.qZA(),t.TgZ(11,"div",59),t.TgZ(12,"div",60),t.TgZ(13,"label",61),t._UZ(14,"i",62),t.qZA(),t._UZ(15,"input",63),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw(),n=e.$implicit,s=e.index,o=t.oxw();t.xp6(4),t.MGl("title","Last call ",null==n||null==n.restaurant?null:n.restaurant.name,""),t.xp6(5),t.Oqu(null==n.orderer?null:n.orderer.firstName),t.xp6(4),t.MGl("for","order-time-",null==n?null:n.id,""),t.xp6(2),t.MGl("id","order-time-",null==n?null:n.id,""),t.Q6J("formControl",o.orderArrivalArr.at(s)),t.uIk("disabled",(null==n?null:n.status)===o.orderStatus.INACTIVE?"":null)}}const Hi=function(r,i){return{"btn-primary":r,"btn-disabled":i}};function Ji(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().confirmOrder(s)}),t._UZ(1,"i",65),t._uU(2," Order "),t.qZA()}if(2&r){const e=t.oxw(),n=e.$implicit,s=e.index,o=t.oxw();t.Q6J("ngClass",t.WLB(2,Hi,o.isOrderOrderer(n)&&n.status===o.orderStatus.ACTIVE&&!o.orderArrivalArr.at(s).invalid,o.orderArrivalArr.at(s).invalid))("disabled",o.orderArrivalArr.at(s).invalid)}}const Qi=function(r,i){return{"btn-secondary":r,"btn-disabled":i}};function zi(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit;return t.oxw().closeRestaurant(s)}),t._UZ(1,"i",67),t._uU(2," Close "),t.qZA()}if(2&r){const e=t.oxw().$implicit,n=t.oxw();t.Q6J("ngClass",t.WLB(2,Qi,n.isOrderOwner(e)||e.status===n.orderStatus.INACTIVE,!n.isOrderOwner(e)&&e.status===n.orderStatus.ACTIVE))("disabled",!n.isOrderOwner(e)&&e.status===n.orderStatus.ACTIVE)}}function Wi(r,i){if(1&r&&(t.TgZ(0,"li",68),t.TgZ(1,"div",69),t._uU(2),t.qZA(),t.TgZ(3,"div",70),t.TgZ(4,"p",71),t._uU(5),t.qZA(),t.qZA(),t.qZA()),2&r){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij(" ",null==e.orderedItems?null:e.orderedItems.length,"x ")}}function Ki(r,i){if(1&r&&(t.TgZ(0,"div",2),t.TgZ(1,"div"),t.TgZ(2,"div",3),t.TgZ(3,"div",4),t.TgZ(4,"div",5),t.TgZ(5,"div"),t._uU(6),t.qZA(),t.YNc(7,Li,5,1,"a",6),t.qZA(),t.TgZ(8,"div",7),t._UZ(9,"i",8),t.TgZ(10,"span",9),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"div",10),t._UZ(13,"i",11),t.TgZ(14,"p",4),t._uU(15),t.qZA(),t.qZA(),t.YNc(16,Gi,6,7,"div",12),t.YNc(17,qi,5,3,"div",13),t.TgZ(18,"div",14),t.YNc(19,$i,11,10,"form",15),t.YNc(20,Bi,4,1,"div",16),t.qZA(),t.YNc(21,ji,7,5,"div",17),t.qZA(),t.qZA(),t._UZ(22,"app-order-items",18,19),t._UZ(24,"app-order-chat",18),t.YNc(25,Yi,16,6,"div",20),t.TgZ(26,"div",21),t.YNc(27,Ji,3,5,"button",22),t.YNc(28,zi,3,5,"button",23),t.qZA(),t.qZA(),t.TgZ(29,"app-modal",24,25),t.TgZ(31,"div",26),t._uU(32),t.qZA(),t.qZA(),t.TgZ(33,"app-modal",24,27),t.TgZ(35,"div",26),t._uU(36),t.qZA(),t.TgZ(37,"div",28),t.TgZ(38,"ul",29),t.YNc(39,Wi,6,2,"li",30),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){const e=i.$implicit,n=t.oxw();t.xp6(1),t.Gre("rounded-md bg-serapion-white p-4 z-10 lg:transform",e.status===n.orderStatus.ACTIVE?"border-serapion-green":"border-serapion-purple"," border-t-0 lg:hover:scale-102 dark:bg-serapion-black-200"),t.xp6(4),t.Gre("",e.status===n.orderStatus.ACTIVE?"bg-serapion-green":"bg-serapion-purple","\n              rounded-md px-6 py-1 uppercase text-serapion-white"),t.xp6(1),t.hij(" ",e.status===n.orderStatus.ACTIVE?"active":"finished"," "),t.xp6(1),t.Q6J("ngIf",e.restaurant.menu),t.xp6(4),t.hij(" ",e.restaurant.name," "),t.xp6(4),t.hij(" ",e.restaurant.phoneNumber?e.restaurant.phoneNumber:"Phone info not available"," "),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.status)!==n.orderStatus.INACTIVE),t.xp6(1),t.Q6J("ngIf",e.orderer&&(null==e?null:e.status)===n.orderStatus.ACTIVE),t.xp6(2),t.Q6J("ngIf",n.isOrderOwner(e)&&(null==e?null:e.status)===n.orderStatus.ACTIVE),t.xp6(1),t.Q6J("ngIf",!n.isOrderOwner(e)||(null==e?null:e.status)===n.orderStatus.INACTIVE),t.xp6(1),t.Q6J("ngIf",(null==e?null:e.status)===n.orderStatus.INACTIVE&&e.arrivalTime),t.xp6(1),t.Q6J("order",e),t.xp6(2),t.Q6J("order",e),t.xp6(1),t.Q6J("ngIf",n.isOrderOrderer(e)&&(null==e?null:e.status)===n.orderStatus.ACTIVE),t.xp6(2),t.Q6J("ngIf",e.status===n.orderStatus.ACTIVE),t.xp6(1),t.Q6J("ngIf",n.isOrderOwner(e)||e.status===n.orderStatus.INACTIVE),t.xp6(1),t.MGl("id","cancel-",e.id,""),t.xp6(3),t.hij(" Are you sure you want to close ",e.restaurant.name,"? "),t.xp6(1),t.MGl("id","confirm-",e.id,""),t.xp6(3),t.hij(" Are you sure you want to confirm ",e.restaurant.name,"? "),t.xp6(3),t.Q6J("ngForOf",e.orderItems)}}const Xi=function(r){return{"lg:grid-cols-3 2xl:grid-cols-4":r}};let es=(()=>{class r{constructor(e,n,s,o,a){this._orderService=e,this._userService=n,this._websocketService=s,this._notificationService=o,this._formBuilder=a,this.orders=[],this.users=[],this.orderStatus=T,this.orderType=K,this.subs=new Z.Y,this.getOrderItems$=l=>this._orderService.getOrderItems(l),this._populateOrders=l=>{l&&(this.orders=l,this.orders.forEach(d=>{var u;(null===(u=this.ordersForm)||void 0===u?void 0:u.get("orders")).push(this._formBuilder.group({orderType:[{value:d.type,disabled:d.status===this.orderStatus.INACTIVE}]}));const h=new O(null,S.required);this.orderArrivalArr.push(h)}),this._setOrderers())}}ngOnInit(){this.ordersForm=this._formBuilder.group({orders:this._formBuilder.array([])}),this.orderArrivalArr=this._formBuilder.array([]),this.subs.sink=this._orderService.getAllOrders().subscribe(e=>{this.orders=e,this.orders.forEach(n=>{var s;(null===(s=this.ordersForm)||void 0===s?void 0:s.get("orders")).push(this._formBuilder.group({orderType:[{value:n.type,disabled:n.status===this.orderStatus.INACTIVE}]}));const o=new O(null,S.required);this.orderArrivalArr.push(o)}),this._setOrderers()}),this.subs.sink=this._websocketService.onRestaurantUpdated().pipe((0,y.w)(()=>this._orderService.getAllOrders())).subscribe(e=>this._populateOrders(e)),this.subs.sink=this._websocketService.onRestaurantDeleted().pipe((0,y.w)(()=>this._orderService.getAllOrders())).subscribe(e=>this._populateOrders(e)),this.subs.sink=this._websocketService.onOrderOpened().subscribe(e=>{var n;this.orders.push(e),(null===(n=this.ordersForm)||void 0===n?void 0:n.get("orders")).push(this._formBuilder.group({orderType:[{value:e.type,disabled:e.status===this.orderStatus.INACTIVE}]}));const s=new O(null,S.required);this.orderArrivalArr.push(s)}),this.subs.sink=this._websocketService.onOrderItemAdded().subscribe(()=>{this._setOrderers()}),this.subs.sink=this._websocketService.onCommentReceived().pipe((0,y.w)(({order:e})=>this._orderService.getOrderById(e.id))).subscribe(e=>{e&&this.orders.forEach(n=>{n.id===e.id&&(n=e)})}),this.subs.sink=this._websocketService.onOrderClosed().subscribe(e=>{var n;if(e){const s=this.orders.findIndex(o=>o.id===e.id);-1!==s&&(this.orders.splice(s,1),(null===(n=this.ordersForm)||void 0===n?void 0:n.get("orders")).removeAt(s),this.orderArrivalArr.removeAt(s))}}),this.subs.sink=this._websocketService.onRestaurantAdded().subscribe(e=>{var n;const s=this.orders.findIndex(o=>o.restaurant.id===e.id);-1!==s&&(this.orders.splice(s,1),(null===(n=this.ordersForm)||void 0===n?void 0:n.get("orders")).removeAt(s),this.orderArrivalArr.removeAt(s))}),this.subs.sink=this._websocketService.onOrderItemUserAdded().subscribe(()=>{this._setOrderers()}),this.subs.sink=this._websocketService.onOrderItemUserDeleted().subscribe(()=>{this._setOrderers()}),this.subs.sink=this._websocketService.onOrderItemDeleted().subscribe(e=>{this._setOrderers()}),this.subs.sink=this._websocketService.onOrderCompleted().pipe((0,y.w)(e=>{var n,s;return this.orders[this.orders.findIndex(a=>a.id===e.id)]=e,null===(s=(null===(n=this.ordersForm)||void 0===n?void 0:n.get("orders")).controls[this.orders.findIndex(a=>a.id===e.id)].get("orderType"))||void 0===s||s.disable(),this._userService.getById(e.orderer.id).pipe((0,y.w)(a=>(a.lastOrder=new Date,this._userService.updateOne(a))))})).subscribe(e=>{this.orders.forEach(n=>{n.status===this.orderStatus.ACTIVE&&n.orderItems&&n.orderItems.forEach(s=>{var o;s.orderedItems&&(null===(o=s.orderedItems)||void 0===o||o.forEach(a=>{a.user=a.user.id===e.id?e:a.user}))})}),this._setOrderers()}),this.subs.sink=this._websocketService.onOrderTypeUpdate().subscribe(e=>{this.orders=this.orders.map(n=>(n.id==e&&(n.type=n.type===this.orderType.DELIVERY?this.orderType.TAKEAWAY:this.orderType.DELIVERY),n))}),this.subs.sink=this._websocketService.onCleanUp().subscribe(()=>{})}ngAfterViewChecked(){}closeRestaurant({id:e}){this.subs.sink=this.cancelDialog.toggleModal(`cancel-${e}`).subscribe(n=>{e&&n&&(this.subs.sink=this._orderService.deleteOrderById(e).subscribe(s=>{s&&s.id&&(this.orders=this.orders.filter(o=>o.id!==s.id))}))})}confirmOrder(e){this.subs.sink=this._orderService.getOrderItems(e.id).pipe((0,y.w)(n=>(this.orders.forEach(s=>{s.id===e.id&&(s.orderItems=n)}),this.confirmDialog.toggleModal(`confirm-${e.id}`)))).subscribe(n=>{if(e&&n){e.status=T.INACTIVE;const s=new Date,o=this.orders.findIndex(a=>a.id==e.id);e.arrivalTime=new Date(s.toDateString()+" "+this.orderArrivalArr.at(o).value),this.subs.sink=this._orderService.getOrderItems(e.id).pipe((0,y.w)(a=>(e.orderItems=a,this._orderService.getComments(e.id)))).pipe((0,y.w)(a=>(e.comments=a,this._orderService.completeOrder(e.id,e)))).pipe((0,y.w)(()=>this._orderService.getOrderItems(e.id))).subscribe(a=>{let l=[];a.forEach(u=>{var h;null===(h=u.orderedItems)||void 0===h||h.forEach(f=>{var m;(null===(m=f.user)||void 0===m?void 0:m.subscriptionId)&&l.push(f.user.subscriptionId)})});const d=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(l=[...new Set(l)],d&&d.subscriptionId&&(l=l.filter(u=>u!=d.subscriptionId)),l.length&&e.arrivalTime&&e.type){const u=e.arrivalTime.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit"});this._notificationService.sendNotificationToUsers(l,`Order ${null==e?void 0:e.restaurant.name} completed, and ${e.type===this.orderType.DELIVERY?"it will arrive":"we depart"} @${u}!`)}})}})}ngOnDestroy(){this.subs.unsubscribe()}getOwnerFullName(e){var n,s;return`${null===(n=e.user)||void 0===n?void 0:n.firstName} ${null===(s=e.user)||void 0===s?void 0:s.lastName}`}getOwnerId(e){var n;return null===(n=e.user)||void 0===n?void 0:n.id}isOrderOwner(e){const n=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(n)return n.id===this.getOwnerId(e)}isOrderOrderer(e){var n;const s=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));if(s){const o=null===(n=this.orders.find(a=>a.id==e.id))||void 0===n?void 0:n.orderer;if(o)return o.id===s.id}}_setOrderers(){this.orders.forEach(e=>{e.status===T.ACTIVE&&(this.subs.sink=this._orderService.getOrderOrderer(e.id).subscribe(n=>{n?this.subs.sink=this._userService.getById(n.user_id).subscribe(s=>{e.orderer=s}):e.orderer=void 0}))})}onOrderTypeChange(e){var n,s;const o=e.id,a=this.orders.findIndex(u=>u.id==o),d=null===(s=(null===(n=this.ordersForm)||void 0===n?void 0:n.get("orders")).controls[a].get("orderType"))||void 0===s?void 0:s.value;this._orderService.updateTypeById(o,d)}sendLastCall(e){this.subs.sink=this._orderService.getOrderItems(e.id).subscribe(n=>{let s=[];n.forEach(a=>{var l;null===(l=a.orderedItems)||void 0===l||l.forEach(d=>{var u;(null===(u=d.user)||void 0===u?void 0:u.subscriptionId)&&s.push(d.user.subscriptionId)})});const o=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));s=[...new Set(s)],o&&o.subscriptionId&&(s=s.filter(a=>a!=o.subscriptionId)),s.length&&this._notificationService.sendNotificationToUsers(s,`Last call ${null==e?void 0:e.restaurant.name}!`)})}isSidebarCollapsed(){const{sidebar:e}=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_UI_PREFERENCES));return"collapsed"===e}sendArrivedCall(e){this.subs.sink=this._orderService.getOrderItems(e.id).subscribe(n=>{let s=[];n.forEach(a=>{var l;null===(l=a.orderedItems)||void 0===l||l.forEach(d=>{var u;(null===(u=d.user)||void 0===u?void 0:u.subscriptionId)&&s.push(d.user.subscriptionId)})});const o=JSON.parse(localStorage.getItem(g.$.FOOD_ORDERING_CURRENT_USER));s=[...new Set(s)],o&&o.subscriptionId&&(s=s.filter(a=>a!=o.subscriptionId)),s.length&&this._notificationService.sendNotificationToUsers(s,`Order arrived ${null==e?void 0:e.restaurant.name}!`)})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(ye),t.Y36(k.K),t.Y36(ge),t.Y36(_e),t.Y36(mr))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Ui,5),t.Gf(Pi,5)),2&e){let s;t.iGM(s=t.CRH())&&(n.cancelDialog=s.first),t.iGM(s=t.CRH())&&(n.confirmDialog=s.first)}},decls:2,vars:4,consts:[[1,"overflow-orders","p-4","lg:pt-8","grid","grid-cols-1","gap-2","lg:grid-cols-2","2xl:grid-cols-3","lg:gap-4","z-10","2xl:pt-12","bg-serapion-blue-100","bg-opacity-50","bg-hero","bg-cover","bg-no-repeat","bg-blend-soft-light","shadow-md","dark:bg-serapion-black-100",3,"ngClass"],["class","place-self-strech",4,"ngFor","ngForOf"],[1,"place-self-strech"],[1,"flex","flex-row","items-start","justify-items-between","z-10"],[1,"flex-1"],[1,"text-xs","flex","flex-row","justify-between","items-center","space-x-6","w-full","py-1","px-1","rounded-md","bg-serapion-blue-100","dark:bg-serapion-black-100"],["class","group flex-1 flex flex-row items-center justify-between text-serapion-grey-100 cursor-pointer","target","_blank",3,"href",4,"ngIf"],[1,"flex","flex-row","space-x-2","items-center","mt-4"],[1,"fas","fa-store","pr-1"],[1,"font-thin","uppercase","text-lg","select-all"],[1,"pt-4","flex","flex-row","space-x-2","justify-between","items-center","text-xs","text-serapion-grey-200","dark:text-serapion-white"],[1,"fas","fa-xs","fa-phone","pr-1"],["class","pt-2 flex flex-row space-x-2 justify-between items-center text-xs text-serapion-grey-100",4,"ngIf"],["class","pt-2 flex flex-row space-x-2 justify-between items-center text-xs text-serapion-green font-normal",4,"ngIf"],[1,"text-xs","uppercase","text-serapion-grey-100"],[3,"formGroup","change",4,"ngIf"],["class","py-2 flex flex-row space-x-2 justify-between items-center text-xs font-thin text-serapion-grey-100",4,"ngIf"],["class","py-2 pt-0 flex flex-row space-x-2 justify-between items-center text-xs font-normal text-serapion-purple",4,"ngIf"],[3,"order"],["orderItems",""],["class","mt-8 py-4 border-t border-opacity-25 border-serapion-grey-100 border-dashed",4,"ngIf"],[1,"flex-grow","pt-8","flex","flex-row-reverse","justify-end","items-center"],["class","btn flex-1 ml-1",3,"ngClass","disabled","click",4,"ngIf"],["class","btn flex-1",3,"ngClass","disabled","click",4,"ngIf"],[3,"id"],["cancelDialog",""],[1,"uppercase","font-thin","text-lg"],["confirmDialog",""],[1,"mt-4"],["role","list",1,"divide-y","divide-serapion-grey-100","text-xs","text-serapion-grey-100"],["class","flex flex-row justify-between items-center py-4 first:pt-0 last:pb-0",4,"ngFor","ngForOf"],["target","_blank",1,"group","flex-1","flex","flex-row","items-center","justify-between","text-serapion-grey-100","cursor-pointer",3,"href"],[1,"group-hover:text-serapion-grey-200","dark:group-hover:text-serapion-white","transition-all"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","group-hover:text-serapion-grey-200","dark:group-hover:text-serapion-white","transition-all"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"pt-2","flex","flex-row","space-x-2","justify-between","items-center","text-xs","text-serapion-grey-100"],[1,"fas","fa-xs","fa-user","pr-1"],[1,"pt-2","flex","flex-row","space-x-2","justify-between","items-center","text-xs","text-serapion-green","font-normal"],[1,"fas","fa-xs","fa-car","pr-1"],[3,"formGroup","change"],["formArrayName","orders"],[3,"formGroupName"],[1,"flex","p-2","pt-3","pl-0","items-center"],["type","radio","name","orderType","formControlName","orderType",1,"w-3","h-3","text-serapion-blue-300","focus:text-serapion-blue-300","focus:ring-serapion-blue-300","mr-2","cursor-pointer",3,"id","value"],[1,"cursor-pointer",3,"for"],[1,"flex","p-2","pl-0","pt-0","items-center"],[1,"py-2","flex","flex-row","space-x-2","justify-between","items-center","text-xs","font-thin","text-serapion-grey-100"],[1,"fas","fa-xs","fa-hashtag","pr-1"],[1,"py-2","pt-0","flex","flex-row","space-x-2","justify-between","items-center","text-xs","font-normal","text-serapion-purple"],[1,"hover:text-serapion-yellow",3,"title","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3","w-3","animate-wiggle"],["d","M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"],[1,"mt-8","py-4","border-t","border-opacity-25","border-serapion-grey-100","border-dashed"],[1,"flex","flex-row","items-center","justify-between"],[1,"flex-1","text-xs","font-thin","uppercase","text-serapion-grey-100"],[1,"text-serapion-grey-100","hover:text-serapion-yellow",3,"title","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","animate-wiggle"],[1,"text-xs","text-serapion-grey-100","mt-2"],[1,"font-semibold"],[1,"flex","flex-row","justify-between","items-center","space-x-6","mt-2"],[1,"relative","flex-1","mt-2","flex","items-center","rounded","border","border-serapion-grey-100","text-serapion-grey-200","dark:text-serapion-white"],[1,"w-6","text-right","mr-4","text-serapion-grey-100","cursor-pointer",3,"for"],[1,"fas","fa-xs","fa-clock"],["type","time","name","orderArrivalTime","autocomplete","off",1,"flex-1","p-2","pl-0","text-xs","bg-transparent","border-0","placeholder-serapion-grey-100","focus:ring-0",3,"id","formControl"],[1,"btn","flex-1","ml-1",3,"ngClass","disabled","click"],[1,"fas","fa-check","pr-1"],[1,"btn","flex-1",3,"ngClass","disabled","click"],[1,"fas","fa-times","pr-1"],[1,"flex","flex-row","justify-between","items-center","py-4","first:pt-0","last:pb-0"],[1,"uppercase"],[1,""],[1,"text-sm","text-slate-500","truncate"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Ki,40,25,"div",1),t.qZA()),2&e&&(t.Q6J("ngClass",t.VKq(2,Xi,n.isSidebarCollapsed())),t.xp6(1),t.Q6J("ngForOf",n.orders))},directives:[p.mk,p.sg,p.O5,ai,Ri,Kt,j,$,U,fe,pe,Le,N,q,Y,qe],pipes:[p.rS,p.uU],styles:[".overflow-orders[_ngcontent-%COMP%]{overflow:auto;height:calc(100vh - 112px)}"]}),r})();function ts(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("click",function(){return t.CHM(e),t.oxw().openSidebar()}),t._UZ(1,"i",7),t.qZA()}}function ns(r,i){if(1&r){const e=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"img",9),t.TgZ(2,"div",10),t.TgZ(3,"div",11),t._uU(4),t.ALo(5,"titlecase"),t.qZA(),t.TgZ(6,"div",12),t._uU(7),t.qZA(),t.TgZ(8,"div",13),t.TgZ(9,"a",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().logout()}),t.O4$(),t.TgZ(10,"svg",15),t._UZ(11,"path",16),t.qZA(),t.kcU(),t.TgZ(12,"span",10),t._uU(13,"Sign out"),t.qZA(),t.qZA(),t.TgZ(14,"a",17),t.NdJ("click",function(){return t.CHM(e),t.oxw().changeTheme()}),t._UZ(15,"i",18),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&r){const e=t.oxw();t.xp6(1),t.s9C("src",e.user.photo,t.LSH),t.s9C("alt",e.user.firstName+" "+e.user.lastName+" Profile Picture"),t.s9C("title",e.user.firstName+" "+e.user.lastName),t.xp6(3),t.hij(" ",t.lcZ(5,5,e.user.firstName+" "+e.user.lastName)," "),t.xp6(3),t.hij(" ",e.user.email," ")}}let rs=(()=>{class r{constructor(e,n,s,o,a){this._userService=e,this._router=n,this._sidebarService=s,this._themeService=o,this._socialAuthService=a,this.isHidden$=this._sidebarService.isHidden$,this.user=this._userService.user}logout(){var e=this;return function(r){return function(){var i=this,e=arguments;return new Promise(function(n,s){var o=r.apply(i,e);function a(d){en(o,n,s,a,l,"next",d)}function l(d){en(o,n,s,a,l,"throw",d)}a(void 0)})}}(function*(){try{yield e._socialAuthService.signOut(!0)}catch(n){}finally{e._userService.removeUser(),yield e._router.navigate(["login"])}})()}openSidebar(){this._sidebarService.toggleSidebar()}changeTheme(){this._themeService.toggleTheme()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(k.K),t.Y36(re.F0),t.Y36(Se),t.Y36(Xr.f),t.Y36(ei.xE))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders"]],decls:11,vars:4,consts:[[1,"sticky","top-0","p-4","flex","flex-row","justify-between","items-center","bg-serapion-white","font-thin","z-10","dark:bg-serapion-black-100","dark:bg-opacity-50","bg-opacity-50"],[1,"flex","flex-row","items-center","justify-between","space-x-4"],["class","hidden shadow-md lg:flex flex-row items-center justify-center bg-serapion-blue-100 dark:bg-serapion-black-100 bg-opacity-50 w-12 h-12 rounded-full cursor-pointer",3,"click",4,"ngIf"],[1,"tracking-widest","uppercase","text-xl"],[1,"text-sm","font-thin","text-serapion-grey-100"],["class","group border-serapion-grey-100 border-opacity-25 p-3 rounded-lg flex flex-row justify-between space-x-3 items-center",4,"ngIf"],[1,"hidden","shadow-md","lg:flex","flex-row","items-center","justify-center","bg-serapion-blue-100","dark:bg-serapion-black-100","bg-opacity-50","w-12","h-12","rounded-full","cursor-pointer",3,"click"],[1,"fas","fa-utensils","fa-md","text-serapion-grey-100","hover:text-serapion-grey-200","dark:hover:text-serapion-white","transition-all","duration-300"],[1,"group","border-serapion-grey-100","border-opacity-25","p-3","rounded-lg","flex","flex-row","justify-between","space-x-3","items-center"],["referrerpolicy","no-referrer",1,"w-12","h-12","rounded-full",3,"src","alt","title"],[1,"text-xs"],[1,"font-semibold","text-serapion-grey-200","dark:text-serapion-white"],[1,"text-serapion-grey-100"],[1,"flex","flex-row","justify-between","items-center","pt-2"],[1,"flex","flex-row","space-x-1","text-serapion-grey-100","hover:text-serapion-grey-200","items-center","cursor-pointer","dark:hover:text-serapion-white",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"text-serapion-grey-100","hover:text-serapion-grey-200","cursor-pointer","dark:hover:text-serapion-white",3,"click"],[1,"fas","fa-adjust"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,ts,2,0,"div",2),t.ALo(3,"async"),t.TgZ(4,"div"),t.TgZ(5,"div",3),t._uU(6,"Orders"),t.qZA(),t.TgZ(7,"span",4),t._uU(8,"Orders from you and your colleagues"),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,ns,16,7,"div",5),t.qZA(),t._UZ(10,"app-order-list")),2&e&&(t.xp6(2),t.Q6J("ngIf",!!t.lcZ(3,2,n.isHidden$)),t.xp6(7),t.Q6J("ngIf",n.user))},directives:[p.O5,es],pipes:[p.Ov,p.rS],styles:[".orders-hero[_ngcontent-%COMP%]{background-image:url(food-raw.72c399756f82f3b9.jpg);--tw-bg-opacity: 1;background-color:rgba(222,242,255,var(--tw-bg-opacity));background-size:cover;background-position:center;background-repeat:no-repeat;padding:11rem;background-blend-mode:darken;--tw-blur: var(--tw-empty, );--tw-brightness: var(--tw-empty, );--tw-contrast: var(--tw-empty, );--tw-grayscale: var(--tw-empty, );--tw-hue-rotate: var(--tw-empty, );--tw-invert: var(--tw-empty, );--tw-saturate: var(--tw-empty, );--tw-sepia: var(--tw-empty, );--tw-drop-shadow: var(--tw-empty, );filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);--tw-blur: blur(4px)}[_nghost-%COMP%]{overflow:hidden}"]}),r})();const is=function(r){return{"lg:hidden":r}};let ss=(()=>{class r{constructor(e,n){this._userService=e,this._sidebarService=n,this.subs=new Z.Y,this.isHidden$=this._sidebarService.isHidden$}ngOnInit(){const e=this._userService.user,n=localStorage.getItem(g.$.SUBSCRIPTION_ID);n&&(this.subs.sink=this._userService.getAllUsers().pipe((0,y.w)(s=>{const o=s.find(a=>a.email===e.email);return o?(o.subscriptionId=n,this._userService.user=o,this._userService.updateOne(o)):s})).subscribe())}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(k.K),t.Y36(Se))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-landing"]],decls:6,vars:5,consts:[[1,"flex","flex-1","flex-col","w-screen","lg:flex-row","lg:h-screen","justify-center","text-base","overflow-hidden"],[1,"flex-auto","lg:w-1/3","bg-serapion-white","flex","flex-col","overflow-x-hidden","overflow-y-auto","transition-all","duration-300","dark:bg-serapion-black-200",3,"ngClass"],[1,"flex-auto","lg:w-2/3","bg-serapion-white","flex","flex-col","overflow-x-hidden","overflow-y-auto","dark:bg-serapion-black-200"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.ALo(2,"async"),t._UZ(3,"app-places"),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"app-orders"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngClass",t.VKq(3,is,!!t.lcZ(2,1,n.isHidden$))))},directives:[p.mk,Wr,rs],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:flex}"]}),r})(),dn=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-place-form"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"place-form works!"),t.qZA())},styles:[""]}),r})();const os=[{path:"",component:ss,canActivate:[fn]},{path:"restaurant/add",component:dn},{path:"restaurant/edit/:id",component:dn}];let as=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[re.Bz.forChild(os)],re.Bz]}),r})(),ls=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[p.ez]]}),r})(),us=(()=>{class r{constructor(e,n){this._notificationService=e,this._userService=n,this._notificationService.init(),this.subs=this._userService.userSubjectChange.subscribe(s=>{s&&this._notificationService.getSubscriptionUserId()})}ngOnDestroy(){this.subs.unsubscribe()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(_e),t.LFG(k.K))},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[p.ez,as,pr,Ai,Ht,ls]]}),r})()}}]);