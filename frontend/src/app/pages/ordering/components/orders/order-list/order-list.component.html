<div
  class="h-screen p-4 grid grid-cols-1 gap-2 lg:grid-cols-2 2xl:grid-cols-3 lg:gap-4 z-10 2xl:pt-12 bg-serapion-blue-100 bg-hero bg-cover bg-center bg-no-repeat bg-blend-soft-light rounded-t-xl shadow-md dark:bg-serapion-black-100"
>
  <!-- ORDER -->
  <div *ngFor="let order of orders; let i = index" class="place-self-strech">
    <div
      class="rounded-md bg-serapion-white p-4 z-10 lg:transform shadow-lg transition-all duration-300 {{
        order.status === orderStatus.ACTIVE
          ? 'border-serapion-green'
          : 'border-serapion-purple'
      }} border-t-4 dark:bg-serapion-black-200"
    >
      <!-- CARD HEADER -->
      <div class="flex flex-row items-start justify-items-between z-10">
        <div class="flex-1">
          <div class="flex flex-row space-x-2 items-center">
            <i class="fas fa-store pr-1"></i>
            <span class="font-thin uppercase text-lg">
              {{ order.restaurant.name }}
            </span>
          </div>
          <div
            class="pt-4 flex flex-row space-x-2 justify-between items-center text-xs font-semibold text-serapion-grey-200 dark:text-serapion-white"
          >
            <i class="fas fa-xs fa-phone pr-1"></i>
            <p class="flex-1">
              {{
                order.restaurant.phoneNumber
                  ? order.restaurant.phoneNumber
                  : "No phone number"
              }}
            </p>
          </div>
          <div
            class="pt-2 flex flex-row space-x-2 justify-between items-center text-xs font-thin text-serapion-grey-100"
          >
            <i class="fas fa-xs fa-user pr-1"></i>
            <p class="flex-1">{{ getOwnerFullName(order) | titlecase }}</p>
          </div>
          <div
            class="py-2 flex flex-row space-x-2 justify-between items-center text-xs text-serapion-blue-300 font-thin"
            *ngIf="order.orderer"
          >
            <i class="fas fa-xs fa-car pr-1"></i>
            <p class="flex-1">
              {{
                order.orderer.firstName + " " + order.orderer.lastName
                  | titlecase
              }}
            </p>
          </div>
          <div class="text-xs uppercase text-serapion-grey-100">
            <form
              *ngIf="isOrderOwner(order)"
              (change)="onOrderTypeChange(order)"
              [formGroup]="ordersForm!"
            >
              <div formArrayName="orders">
                <div [formGroupName]="i">
                  <div class="flex p-2 pt-4 pl-0 items-center">
                    <input
                      id="{{ orderType.DELIVERY + '-' + i }}"
                      type="radio"
                      value="{{ orderType.DELIVERY }}"
                      name="orderType"
                      formControlName="orderType"
                      class="w-3 h-3 text-serapion-blue-300 focus:text-serapion-blue-300 focus:ring-serapion-blue-300 mr-2 cursor-pointer"
                    />
                    <label
                      for="{{ orderType.DELIVERY + '-' + i }}"
                      class="cursor-pointer"
                    >
                      {{ orderType.DELIVERY }}</label
                    >
                  </div>
                  <div class="flex p-2 pl-0 pt-0 items-center">
                    <input
                      id="{{ orderType.TAKEAWAY + '-' + i }}"
                      type="radio"
                      value="{{ orderType.TAKEAWAY }}"
                      name="orderType"
                      formControlName="orderType"
                      class="w-3 h-3 text-serapion-blue-300 focus:text-serapion-blue-300 focus:ring-serapion-blue-300 mr-2 cursor-pointer"
                    />
                    <label
                      for="{{ orderType.TAKEAWAY + '-' + i }}"
                      class="cursor-pointer"
                    >
                      {{ orderType.TAKEAWAY }}</label
                    >
                  </div>
                </div>
              </div>
            </form>
            <div
              class="py-2 flex flex-row space-x-2 justify-between items-center text-xs font-thin text-serapion-grey-100"
              *ngIf="!isOrderOwner(order)"
            >
              <i class="fas fa-xs fa-hashtag pr-1"></i>
              <p class="flex-1">
                {{ order.type }}
              </p>
            </div>
          </div>
        </div>
        <a
          class="btn btn-white"
          [href]="order.restaurant.menu"
          target="_blank"
          *ngIf="order.restaurant.menu"
        >
          <i class="fas fa-globe fa-sm pr-1"></i> Visit
        </a>
      </div>
      <!-- CARD HEADER END -->

      <!-- ORDER ITEMS -->
      <app-order-items [order]="order" #orderItems></app-order-items>
      <!-- ORDER ITEMS END -->

      <!-- ORDER COMMENTS -->
      <app-order-chat [order]="order"></app-order-chat>
      <!-- ORDER COMMENTS END -->

      <!-- SUBMIT BUTTONS -->
      <div
        class="flex-grow pt-8 flex flex-row-reverse justify-end items-center"
      >
        <button
          class="btn w-1/2 ml-1"
          [ngClass]="{
            'btn-primary':
              isOrderOrderer(order) && order.status === orderStatus.ACTIVE,
            'btn-disabled':
              !isOrderOrderer(order) || order.status === orderStatus.INACTIVE
          }"
          [disabled]="
            !isOrderOrderer(order) || order.status === orderStatus.INACTIVE
          "
          (click)="confirmOrder(order)"
        >
          <i class="fas fa-check pr-1"></i> Confirm
        </button>
        <button
          class="btn w-1/2"
          [ngClass]="{
            'btn-secondary':
              isOrderOwner(order) || order.status === orderStatus.INACTIVE,
            'btn-disabled':
              !isOrderOwner(order) && order.status === orderStatus.ACTIVE
          }"
          [disabled]="
            !isOrderOwner(order) && order.status === orderStatus.ACTIVE
          "
          (click)="closeRestaurant(order.restaurant.id)"
        >
          <i class="fas fa-times pr-1"></i> Close
        </button>
      </div>
      <!-- SUBMIT BUTTONS END -->
    </div>
  </div>
  <!--ORDER END -->
</div>
